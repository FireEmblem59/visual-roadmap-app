(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(a){if(a.ep)return;a.ep=!0;const u=n(a);fetch(a.href,u)}})();function hp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Km={exports:{}},fu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ov;function yR(){if(Ov)return fu;Ov=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(s,a,u){var c=null;if(u!==void 0&&(c=""+u),a.key!==void 0&&(c=""+a.key),"key"in a){u={};for(var d in a)d!=="key"&&(u[d]=a[d])}else u=a;return a=u.ref,{$$typeof:e,type:s,key:c,ref:a!==void 0?a:null,props:u}}return fu.Fragment=t,fu.jsx=n,fu.jsxs=n,fu}var Vv;function _R(){return Vv||(Vv=1,Km.exports=yR()),Km.exports}var gt=_R(),Qm={exports:{}},kt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kv;function vR(){if(kv)return kt;kv=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.iterator;function S(C){return C===null||typeof C!="object"?null:(C=v&&C[v]||C["@@iterator"],typeof C=="function"?C:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,P={};function U(C,q,J){this.props=C,this.context=q,this.refs=P,this.updater=J||b}U.prototype.isReactComponent={},U.prototype.setState=function(C,q){if(typeof C!="object"&&typeof C!="function"&&C!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,C,q,"setState")},U.prototype.forceUpdate=function(C){this.updater.enqueueForceUpdate(this,C,"forceUpdate")};function B(){}B.prototype=U.prototype;function j(C,q,J){this.props=C,this.context=q,this.refs=P,this.updater=J||b}var X=j.prototype=new B;X.constructor=j,k(X,U.prototype),X.isPureReactComponent=!0;var F=Array.isArray,at={H:null,A:null,T:null,S:null,V:null},Z=Object.prototype.hasOwnProperty;function N(C,q,J,rt,ht,yt){return J=yt.ref,{$$typeof:e,type:C,key:q,ref:J!==void 0?J:null,props:yt}}function A(C,q){return N(C.type,q,void 0,void 0,void 0,C.props)}function R(C){return typeof C=="object"&&C!==null&&C.$$typeof===e}function D(C){var q={"=":"=0",":":"=2"};return"$"+C.replace(/[=:]/g,function(J){return q[J]})}var O=/\/+/g;function L(C,q){return typeof C=="object"&&C!==null&&C.key!=null?D(""+C.key):q.toString(36)}function I(){}function M(C){switch(C.status){case"fulfilled":return C.value;case"rejected":throw C.reason;default:switch(typeof C.status=="string"?C.then(I,I):(C.status="pending",C.then(function(q){C.status==="pending"&&(C.status="fulfilled",C.value=q)},function(q){C.status==="pending"&&(C.status="rejected",C.reason=q)})),C.status){case"fulfilled":return C.value;case"rejected":throw C.reason}}throw C}function et(C,q,J,rt,ht){var yt=typeof C;(yt==="undefined"||yt==="boolean")&&(C=null);var _t=!1;if(C===null)_t=!0;else switch(yt){case"bigint":case"string":case"number":_t=!0;break;case"object":switch(C.$$typeof){case e:case t:_t=!0;break;case y:return _t=C._init,et(_t(C._payload),q,J,rt,ht)}}if(_t)return ht=ht(C),_t=rt===""?"."+L(C,0):rt,F(ht)?(J="",_t!=null&&(J=_t.replace(O,"$&/")+"/"),et(ht,q,J,"",function(Zt){return Zt})):ht!=null&&(R(ht)&&(ht=A(ht,J+(ht.key==null||C&&C.key===ht.key?"":(""+ht.key).replace(O,"$&/")+"/")+_t)),q.push(ht)),1;_t=0;var Nt=rt===""?".":rt+":";if(F(C))for(var At=0;At<C.length;At++)rt=C[At],yt=Nt+L(rt,At),_t+=et(rt,q,J,yt,ht);else if(At=S(C),typeof At=="function")for(C=At.call(C),At=0;!(rt=C.next()).done;)rt=rt.value,yt=Nt+L(rt,At++),_t+=et(rt,q,J,yt,ht);else if(yt==="object"){if(typeof C.then=="function")return et(M(C),q,J,rt,ht);throw q=String(C),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(C).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.")}return _t}function V(C,q,J){if(C==null)return C;var rt=[],ht=0;return et(C,rt,"","",function(yt){return q.call(J,yt,ht++)}),rt}function G(C){if(C._status===-1){var q=C._result;q=q(),q.then(function(J){(C._status===0||C._status===-1)&&(C._status=1,C._result=J)},function(J){(C._status===0||C._status===-1)&&(C._status=2,C._result=J)}),C._status===-1&&(C._status=0,C._result=q)}if(C._status===1)return C._result.default;throw C._result}var tt=typeof reportError=="function"?reportError:function(C){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof C=="object"&&C!==null&&typeof C.message=="string"?String(C.message):String(C),error:C});if(!window.dispatchEvent(q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",C);return}console.error(C)};function Y(){}return kt.Children={map:V,forEach:function(C,q,J){V(C,function(){q.apply(this,arguments)},J)},count:function(C){var q=0;return V(C,function(){q++}),q},toArray:function(C){return V(C,function(q){return q})||[]},only:function(C){if(!R(C))throw Error("React.Children.only expected to receive a single React element child.");return C}},kt.Component=U,kt.Fragment=n,kt.Profiler=a,kt.PureComponent=j,kt.StrictMode=s,kt.Suspense=g,kt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=at,kt.__COMPILER_RUNTIME={__proto__:null,c:function(C){return at.H.useMemoCache(C)}},kt.cache=function(C){return function(){return C.apply(null,arguments)}},kt.cloneElement=function(C,q,J){if(C==null)throw Error("The argument must be a React element, but you passed "+C+".");var rt=k({},C.props),ht=C.key,yt=void 0;if(q!=null)for(_t in q.ref!==void 0&&(yt=void 0),q.key!==void 0&&(ht=""+q.key),q)!Z.call(q,_t)||_t==="key"||_t==="__self"||_t==="__source"||_t==="ref"&&q.ref===void 0||(rt[_t]=q[_t]);var _t=arguments.length-2;if(_t===1)rt.children=J;else if(1<_t){for(var Nt=Array(_t),At=0;At<_t;At++)Nt[At]=arguments[At+2];rt.children=Nt}return N(C.type,ht,void 0,void 0,yt,rt)},kt.createContext=function(C){return C={$$typeof:c,_currentValue:C,_currentValue2:C,_threadCount:0,Provider:null,Consumer:null},C.Provider=C,C.Consumer={$$typeof:u,_context:C},C},kt.createElement=function(C,q,J){var rt,ht={},yt=null;if(q!=null)for(rt in q.key!==void 0&&(yt=""+q.key),q)Z.call(q,rt)&&rt!=="key"&&rt!=="__self"&&rt!=="__source"&&(ht[rt]=q[rt]);var _t=arguments.length-2;if(_t===1)ht.children=J;else if(1<_t){for(var Nt=Array(_t),At=0;At<_t;At++)Nt[At]=arguments[At+2];ht.children=Nt}if(C&&C.defaultProps)for(rt in _t=C.defaultProps,_t)ht[rt]===void 0&&(ht[rt]=_t[rt]);return N(C,yt,void 0,void 0,null,ht)},kt.createRef=function(){return{current:null}},kt.forwardRef=function(C){return{$$typeof:d,render:C}},kt.isValidElement=R,kt.lazy=function(C){return{$$typeof:y,_payload:{_status:-1,_result:C},_init:G}},kt.memo=function(C,q){return{$$typeof:p,type:C,compare:q===void 0?null:q}},kt.startTransition=function(C){var q=at.T,J={};at.T=J;try{var rt=C(),ht=at.S;ht!==null&&ht(J,rt),typeof rt=="object"&&rt!==null&&typeof rt.then=="function"&&rt.then(Y,tt)}catch(yt){tt(yt)}finally{at.T=q}},kt.unstable_useCacheRefresh=function(){return at.H.useCacheRefresh()},kt.use=function(C){return at.H.use(C)},kt.useActionState=function(C,q,J){return at.H.useActionState(C,q,J)},kt.useCallback=function(C,q){return at.H.useCallback(C,q)},kt.useContext=function(C){return at.H.useContext(C)},kt.useDebugValue=function(){},kt.useDeferredValue=function(C,q){return at.H.useDeferredValue(C,q)},kt.useEffect=function(C,q,J){var rt=at.H;if(typeof J=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return rt.useEffect(C,q)},kt.useId=function(){return at.H.useId()},kt.useImperativeHandle=function(C,q,J){return at.H.useImperativeHandle(C,q,J)},kt.useInsertionEffect=function(C,q){return at.H.useInsertionEffect(C,q)},kt.useLayoutEffect=function(C,q){return at.H.useLayoutEffect(C,q)},kt.useMemo=function(C,q){return at.H.useMemo(C,q)},kt.useOptimistic=function(C,q){return at.H.useOptimistic(C,q)},kt.useReducer=function(C,q,J){return at.H.useReducer(C,q,J)},kt.useRef=function(C){return at.H.useRef(C)},kt.useState=function(C){return at.H.useState(C)},kt.useSyncExternalStore=function(C,q,J){return at.H.useSyncExternalStore(C,q,J)},kt.useTransition=function(){return at.H.useTransition()},kt.version="19.1.1",kt}var Pv;function Qu(){return Pv||(Pv=1,Qm.exports=vR()),Qm.exports}var it=Qu();const ut=hp(it);var Zm={exports:{}},du={},Wm={exports:{}},Jm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lv;function ER(){return Lv||(Lv=1,(function(e){function t(V,G){var tt=V.length;V.push(G);t:for(;0<tt;){var Y=tt-1>>>1,C=V[Y];if(0<a(C,G))V[Y]=G,V[tt]=C,tt=Y;else break t}}function n(V){return V.length===0?null:V[0]}function s(V){if(V.length===0)return null;var G=V[0],tt=V.pop();if(tt!==G){V[0]=tt;t:for(var Y=0,C=V.length,q=C>>>1;Y<q;){var J=2*(Y+1)-1,rt=V[J],ht=J+1,yt=V[ht];if(0>a(rt,tt))ht<C&&0>a(yt,rt)?(V[Y]=yt,V[ht]=tt,Y=ht):(V[Y]=rt,V[J]=tt,Y=J);else if(ht<C&&0>a(yt,tt))V[Y]=yt,V[ht]=tt,Y=ht;else break t}}return G}function a(V,G){var tt=V.sortIndex-G.sortIndex;return tt!==0?tt:V.id-G.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var c=Date,d=c.now();e.unstable_now=function(){return c.now()-d}}var g=[],p=[],y=1,v=null,S=3,b=!1,k=!1,P=!1,U=!1,B=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;function F(V){for(var G=n(p);G!==null;){if(G.callback===null)s(p);else if(G.startTime<=V)s(p),G.sortIndex=G.expirationTime,t(g,G);else break;G=n(p)}}function at(V){if(P=!1,F(V),!k)if(n(g)!==null)k=!0,Z||(Z=!0,L());else{var G=n(p);G!==null&&et(at,G.startTime-V)}}var Z=!1,N=-1,A=5,R=-1;function D(){return U?!0:!(e.unstable_now()-R<A)}function O(){if(U=!1,Z){var V=e.unstable_now();R=V;var G=!0;try{t:{k=!1,P&&(P=!1,j(N),N=-1),b=!0;var tt=S;try{e:{for(F(V),v=n(g);v!==null&&!(v.expirationTime>V&&D());){var Y=v.callback;if(typeof Y=="function"){v.callback=null,S=v.priorityLevel;var C=Y(v.expirationTime<=V);if(V=e.unstable_now(),typeof C=="function"){v.callback=C,F(V),G=!0;break e}v===n(g)&&s(g),F(V)}else s(g);v=n(g)}if(v!==null)G=!0;else{var q=n(p);q!==null&&et(at,q.startTime-V),G=!1}}break t}finally{v=null,S=tt,b=!1}G=void 0}}finally{G?L():Z=!1}}}var L;if(typeof X=="function")L=function(){X(O)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,M=I.port2;I.port1.onmessage=O,L=function(){M.postMessage(null)}}else L=function(){B(O,0)};function et(V,G){N=B(function(){V(e.unstable_now())},G)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(V){V.callback=null},e.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<V?Math.floor(1e3/V):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_next=function(V){switch(S){case 1:case 2:case 3:var G=3;break;default:G=S}var tt=S;S=G;try{return V()}finally{S=tt}},e.unstable_requestPaint=function(){U=!0},e.unstable_runWithPriority=function(V,G){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var tt=S;S=V;try{return G()}finally{S=tt}},e.unstable_scheduleCallback=function(V,G,tt){var Y=e.unstable_now();switch(typeof tt=="object"&&tt!==null?(tt=tt.delay,tt=typeof tt=="number"&&0<tt?Y+tt:Y):tt=Y,V){case 1:var C=-1;break;case 2:C=250;break;case 5:C=1073741823;break;case 4:C=1e4;break;default:C=5e3}return C=tt+C,V={id:y++,callback:G,priorityLevel:V,startTime:tt,expirationTime:C,sortIndex:-1},tt>Y?(V.sortIndex=tt,t(p,V),n(g)===null&&V===n(p)&&(P?(j(N),N=-1):P=!0,et(at,tt-Y))):(V.sortIndex=C,t(g,V),k||b||(k=!0,Z||(Z=!0,L()))),V},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(V){var G=S;return function(){var tt=S;S=G;try{return V.apply(this,arguments)}finally{S=tt}}}})(Jm)),Jm}var Uv;function TR(){return Uv||(Uv=1,Wm.exports=ER()),Wm.exports}var tg={exports:{}},gn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zv;function SR(){if(zv)return gn;zv=1;var e=Qu();function t(g){var p="https://react.dev/errors/"+g;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+g+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},a=Symbol.for("react.portal");function u(g,p,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:g,containerInfo:p,implementation:y}}var c=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(g,p){if(g==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return gn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,gn.createPortal=function(g,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(t(299));return u(g,p,null,y)},gn.flushSync=function(g){var p=c.T,y=s.p;try{if(c.T=null,s.p=2,g)return g()}finally{c.T=p,s.p=y,s.d.f()}},gn.preconnect=function(g,p){typeof g=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(g,p))},gn.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},gn.preinit=function(g,p){if(typeof g=="string"&&p&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin),S=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?s.d.S(g,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:S,fetchPriority:b}):y==="script"&&s.d.X(g,{crossOrigin:v,integrity:S,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},gn.preinitModule=function(g,p){if(typeof g=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=d(p.as,p.crossOrigin);s.d.M(g,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(g)},gn.preload=function(g,p){if(typeof g=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,v=d(y,p.crossOrigin);s.d.L(g,y,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},gn.preloadModule=function(g,p){if(typeof g=="string")if(p){var y=d(p.as,p.crossOrigin);s.d.m(g,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(g)},gn.requestFormReset=function(g){s.d.r(g)},gn.unstable_batchedUpdates=function(g,p){return g(p)},gn.useFormState=function(g,p,y){return c.H.useFormState(g,p,y)},gn.useFormStatus=function(){return c.H.useHostTransitionStatus()},gn.version="19.1.1",gn}var Bv;function a1(){if(Bv)return tg.exports;Bv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),tg.exports=SR(),tg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv;function wR(){if(Hv)return du;Hv=1;var e=TR(),t=Qu(),n=a1();function s(i){var r="https://react.dev/errors/"+i;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function u(i){var r=i,o=i;if(i.alternate)for(;r.return;)r=r.return;else{i=r;do r=i,(r.flags&4098)!==0&&(o=r.return),i=r.return;while(i)}return r.tag===3?o:null}function c(i){if(i.tag===13){var r=i.memoizedState;if(r===null&&(i=i.alternate,i!==null&&(r=i.memoizedState)),r!==null)return r.dehydrated}return null}function d(i){if(u(i)!==i)throw Error(s(188))}function g(i){var r=i.alternate;if(!r){if(r=u(i),r===null)throw Error(s(188));return r!==i?null:i}for(var o=i,l=r;;){var f=o.return;if(f===null)break;var m=f.alternate;if(m===null){if(l=f.return,l!==null){o=l;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===o)return d(f),i;if(m===l)return d(f),r;m=m.sibling}throw Error(s(188))}if(o.return!==l.return)o=f,l=m;else{for(var T=!1,w=f.child;w;){if(w===o){T=!0,o=f,l=m;break}if(w===l){T=!0,l=f,o=m;break}w=w.sibling}if(!T){for(w=m.child;w;){if(w===o){T=!0,o=m,l=f;break}if(w===l){T=!0,l=m,o=f;break}w=w.sibling}if(!T)throw Error(s(189))}}if(o.alternate!==l)throw Error(s(190))}if(o.tag!==3)throw Error(s(188));return o.stateNode.current===o?i:r}function p(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i;for(i=i.child;i!==null;){if(r=p(i),r!==null)return r;i=i.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),j=Symbol.for("react.consumer"),X=Symbol.for("react.context"),F=Symbol.for("react.forward_ref"),at=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),D=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function L(i){return i===null||typeof i!="object"?null:(i=O&&i[O]||i["@@iterator"],typeof i=="function"?i:null)}var I=Symbol.for("react.client.reference");function M(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===I?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case k:return"Fragment";case U:return"Profiler";case P:return"StrictMode";case at:return"Suspense";case Z:return"SuspenseList";case R:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case b:return"Portal";case X:return(i.displayName||"Context")+".Provider";case j:return(i._context.displayName||"Context")+".Consumer";case F:var r=i.render;return i=i.displayName,i||(i=r.displayName||r.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case N:return r=i.displayName||null,r!==null?r:M(i.type)||"Memo";case A:r=i._payload,i=i._init;try{return M(i(r))}catch{}}return null}var et=Array.isArray,V=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt={pending:!1,data:null,method:null,action:null},Y=[],C=-1;function q(i){return{current:i}}function J(i){0>C||(i.current=Y[C],Y[C]=null,C--)}function rt(i,r){C++,Y[C]=i.current,i.current=r}var ht=q(null),yt=q(null),_t=q(null),Nt=q(null);function At(i,r){switch(rt(_t,r),rt(yt,i),rt(ht,null),r.nodeType){case 9:case 11:i=(i=r.documentElement)&&(i=i.namespaceURI)?ov(i):0;break;default:if(i=r.tagName,r=r.namespaceURI)r=ov(r),i=lv(r,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}J(ht),rt(ht,i)}function Zt(){J(ht),J(yt),J(_t)}function $t(i){i.memoizedState!==null&&rt(Nt,i);var r=ht.current,o=lv(r,i.type);r!==o&&(rt(yt,i),rt(ht,o))}function Ae(i){yt.current===i&&(J(ht),J(yt)),Nt.current===i&&(J(Nt),ou._currentValue=tt)}var Ne=Object.prototype.hasOwnProperty,ze=e.unstable_scheduleCallback,De=e.unstable_cancelCallback,fe=e.unstable_shouldYield,Tn=e.unstable_requestPaint,Lt=e.unstable_now,wt=e.unstable_getCurrentPriorityLevel,Be=e.unstable_ImmediatePriority,Nn=e.unstable_UserBlockingPriority,Ln=e.unstable_NormalPriority,Vi=e.unstable_LowPriority,Un=e.unstable_IdlePriority,Sn=e.log,_i=e.unstable_setDisableYieldValue,te=null,Bt=null;function Me(i){if(typeof Sn=="function"&&_i(i),Bt&&typeof Bt.setStrictMode=="function")try{Bt.setStrictMode(te,i)}catch{}}var ge=Math.clz32?Math.clz32:Xe,ki=Math.log,Oe=Math.LN2;function Xe(i){return i>>>=0,i===0?32:31-(ki(i)/Oe|0)|0}var wn=256,bn=4194304;function Ke(i){var r=i&42;if(r!==0)return r;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function sn(i,r,o){var l=i.pendingLanes;if(l===0)return 0;var f=0,m=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var w=l&134217727;return w!==0?(l=w&~m,l!==0?f=Ke(l):(T&=w,T!==0?f=Ke(T):o||(o=w&~i,o!==0&&(f=Ke(o))))):(w=l&~m,w!==0?f=Ke(w):T!==0?f=Ke(T):o||(o=l&~i,o!==0&&(f=Ke(o)))),f===0?0:r!==0&&r!==f&&(r&m)===0&&(m=f&-f,o=r&-r,m>=o||m===32&&(o&4194048)!==0)?r:f}function An(i,r){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&r)===0}function dr(i,r){switch(i){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mr(){var i=wn;return wn<<=1,(wn&4194048)===0&&(wn=256),i}function vi(){var i=bn;return bn<<=1,(bn&62914560)===0&&(bn=4194304),i}function zn(i){for(var r=[],o=0;31>o;o++)r.push(i);return r}function Zn(i,r){i.pendingLanes|=r,r!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Bn(i,r,o,l,f,m){var T=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var w=i.entanglements,z=i.expirationTimes,W=i.hiddenUpdates;for(o=T&~o;0<o;){var lt=31-ge(o),ft=1<<lt;w[lt]=0,z[lt]=-1;var nt=W[lt];if(nt!==null)for(W[lt]=null,lt=0;lt<nt.length;lt++){var st=nt[lt];st!==null&&(st.lane&=-536870913)}o&=~ft}l!==0&&Wn(i,l,0),m!==0&&f===0&&i.tag!==0&&(i.suspendedLanes|=m&~(T&~r))}function Wn(i,r,o){i.pendingLanes|=r,i.suspendedLanes&=~r;var l=31-ge(r);i.entangledLanes|=r,i.entanglements[l]=i.entanglements[l]|1073741824|o&4194090}function Fs(i,r){var o=i.entangledLanes|=r;for(i=i.entanglements;o;){var l=31-ge(o),f=1<<l;f&r|i[l]&r&&(i[l]|=r),o&=~f}}function Pi(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Qr(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Li(){var i=G.p;return i!==0?i:(i=window.event,i===void 0?32:xv(i.type))}function Ba(i,r){var o=G.p;try{return G.p=i,r()}finally{G.p=o}}var ce=Math.random().toString(36).slice(2),Re="__reactFiber$"+ce,Te="__reactProps$"+ce,Dn="__reactContainer$"+ce,Gs="__reactEvents$"+ce,dl="__reactListeners$"+ce,Ui="__reactHandles$"+ce,Ha="__reactResources$"+ce,gr="__reactMarker$"+ce;function zi(i){delete i[Re],delete i[Te],delete i[Gs],delete i[dl],delete i[Ui]}function Jn(i){var r=i[Re];if(r)return r;for(var o=i.parentNode;o;){if(r=o[Dn]||o[Re]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(i=fv(i);i!==null;){if(o=i[Re])return o;i=fv(i)}return r}i=o,o=i.parentNode}return null}function ti(i){if(i=i[Re]||i[Dn]){var r=i.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return i}return null}function ei(i){var r=i.tag;if(r===5||r===26||r===27||r===6)return i.stateNode;throw Error(s(33))}function an(i){var r=i[Ha];return r||(r=i[Ha]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function pe(i){i[gr]=!0}var $s=new Set,Zr={};function Hn(i,r){Ei(i,r),Ei(i+"Capture",r)}function Ei(i,r){for(Zr[i]=r,i=0;i<r.length;i++)$s.add(r[i])}var Ys=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),qa={},pr={};function ja(i){return Ne.call(pr,i)?!0:Ne.call(qa,i)?!1:Ys.test(i)?pr[i]=!0:(qa[i]=!0,!1)}function Bi(i,r,o){if(ja(r))if(o===null)i.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){i.removeAttribute(r);return}}i.setAttribute(r,""+o)}}function ni(i,r,o){if(o===null)i.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(r);return}i.setAttribute(r,""+o)}}function He(i,r,o,l){if(l===null)i.removeAttribute(o);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(r,o,""+l)}}var Hi,Fa;function Ti(i){if(Hi===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);Hi=r&&r[1]||"",Fa=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Hi+i+Fa}var Wr=!1;function qi(i,r){if(!i||Wr)return"";Wr=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var ft=function(){throw Error()};if(Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(st){var nt=st}Reflect.construct(i,[],ft)}else{try{ft.call()}catch(st){nt=st}i.call(ft.prototype)}}else{try{throw Error()}catch(st){nt=st}(ft=i())&&typeof ft.catch=="function"&&ft.catch(function(){})}}catch(st){if(st&&nt&&typeof st.stack=="string")return[st.stack,nt.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=l.DetermineComponentFrameRoot(),T=m[0],w=m[1];if(T&&w){var z=T.split(`
`),W=w.split(`
`);for(f=l=0;l<z.length&&!z[l].includes("DetermineComponentFrameRoot");)l++;for(;f<W.length&&!W[f].includes("DetermineComponentFrameRoot");)f++;if(l===z.length||f===W.length)for(l=z.length-1,f=W.length-1;1<=l&&0<=f&&z[l]!==W[f];)f--;for(;1<=l&&0<=f;l--,f--)if(z[l]!==W[f]){if(l!==1||f!==1)do if(l--,f--,0>f||z[l]!==W[f]){var lt=`
`+z[l].replace(" at new "," at ");return i.displayName&&lt.includes("<anonymous>")&&(lt=lt.replace("<anonymous>",i.displayName)),lt}while(1<=l&&0<=f);break}}}finally{Wr=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?Ti(o):""}function ml(i){switch(i.tag){case 26:case 27:case 5:return Ti(i.type);case 16:return Ti("Lazy");case 13:return Ti("Suspense");case 19:return Ti("SuspenseList");case 0:case 15:return qi(i.type,!1);case 11:return qi(i.type.render,!1);case 1:return qi(i.type,!0);case 31:return Ti("Activity");default:return""}}function Ga(i){try{var r="";do r+=ml(i),i=i.return;while(i);return r}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function Rn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function gl(i){var r=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Jf(i){var r=gl(i)?"checked":"value",o=Object.getOwnPropertyDescriptor(i.constructor.prototype,r),l=""+i[r];if(!i.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,m=o.set;return Object.defineProperty(i,r,{configurable:!0,get:function(){return f.call(this)},set:function(T){l=""+T,m.call(this,T)}}),Object.defineProperty(i,r,{enumerable:o.enumerable}),{getValue:function(){return l},setValue:function(T){l=""+T},stopTracking:function(){i._valueTracker=null,delete i[r]}}}}function $a(i){i._valueTracker||(i._valueTracker=Jf(i))}function pl(i){if(!i)return!1;var r=i._valueTracker;if(!r)return!0;var o=r.getValue(),l="";return i&&(l=gl(i)?i.checked?"true":"false":i.value),i=l,i!==o?(r.setValue(i),!0):!1}function Xs(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var td=/[\n"\\]/g;function Ve(i){return i.replace(td,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function qn(i,r,o,l,f,m,T,w){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),r!=null?T==="number"?(r===0&&i.value===""||i.value!=r)&&(i.value=""+Rn(r)):i.value!==""+Rn(r)&&(i.value=""+Rn(r)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),r!=null?Jr(i,T,Rn(r)):o!=null?Jr(i,T,Rn(o)):l!=null&&i.removeAttribute("value"),f==null&&m!=null&&(i.defaultChecked=!!m),f!=null&&(i.checked=f&&typeof f!="function"&&typeof f!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?i.name=""+Rn(w):i.removeAttribute("name")}function Ks(i,r,o,l,f,m,T,w){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(i.type=m),r!=null||o!=null){if(!(m!=="submit"&&m!=="reset"||r!=null))return;o=o!=null?""+Rn(o):"",r=r!=null?""+Rn(r):o,w||r===i.value||(i.value=r),i.defaultValue=r}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,i.checked=w?i.checked:!!l,i.defaultChecked=!!l,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T)}function Jr(i,r,o){r==="number"&&Xs(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function yr(i,r,o,l){if(i=i.options,r){r={};for(var f=0;f<o.length;f++)r["$"+o[f]]=!0;for(o=0;o<i.length;o++)f=r.hasOwnProperty("$"+i[o].value),i[o].selected!==f&&(i[o].selected=f),f&&l&&(i[o].defaultSelected=!0)}else{for(o=""+Rn(o),r=null,f=0;f<i.length;f++){if(i[f].value===o){i[f].selected=!0,l&&(i[f].defaultSelected=!0);return}r!==null||i[f].disabled||(r=i[f])}r!==null&&(r.selected=!0)}}function se(i,r,o){if(r!=null&&(r=""+Rn(r),r!==i.value&&(i.value=r),o==null)){i.defaultValue!==r&&(i.defaultValue=r);return}i.defaultValue=o!=null?""+Rn(o):""}function Qs(i,r,o,l){if(r==null){if(l!=null){if(o!=null)throw Error(s(92));if(et(l)){if(1<l.length)throw Error(s(93));l=l[0]}o=l}o==null&&(o=""),r=o}o=Rn(r),i.defaultValue=o,l=i.textContent,l===o&&l!==""&&l!==null&&(i.value=l)}function ii(i,r){if(r){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=r;return}}i.textContent=r}var Zs=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cc(i,r,o){var l=r.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?l?i.setProperty(r,""):r==="float"?i.cssFloat="":i[r]="":l?i.setProperty(r,o):typeof o!="number"||o===0||Zs.has(r)?r==="float"?i.cssFloat=o:i[r]=(""+o).trim():i[r]=o+"px"}function yl(i,r,o){if(r!=null&&typeof r!="object")throw Error(s(62));if(i=i.style,o!=null){for(var l in o)!o.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?i.setProperty(l,""):l==="float"?i.cssFloat="":i[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&o[f]!==l&&cc(i,f,l)}else for(var m in r)r.hasOwnProperty(m)&&cc(i,m,r[m])}function _l(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ed=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),nd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ya(i){return nd.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var _r=null;function ri(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var vr=null,Er=null;function vl(i){var r=ti(i);if(r&&(i=r.stateNode)){var o=i[Te]||null;t:switch(i=r.stateNode,r.type){case"input":if(qn(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),r=o.name,o.type==="radio"&&r!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Ve(""+r)+'"][type="radio"]'),r=0;r<o.length;r++){var l=o[r];if(l!==i&&l.form===i.form){var f=l[Te]||null;if(!f)throw Error(s(90));qn(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<o.length;r++)l=o[r],l.form===i.form&&pl(l)}break t;case"textarea":se(i,o.value,o.defaultValue);break t;case"select":r=o.value,r!=null&&yr(i,!!o.multiple,r,!1)}}}var ji=!1;function hc(i,r,o){if(ji)return i(r,o);ji=!0;try{var l=i(r);return l}finally{if(ji=!1,(vr!==null||Er!==null)&&(rh(),vr&&(r=vr,i=Er,Er=vr=null,vl(r),i)))for(r=0;r<i.length;r++)vl(i[r])}}function Ws(i,r){var o=i.stateNode;if(o===null)return null;var l=o[Te]||null;if(l===null)return null;o=l[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(i=i.type,l=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!l;break t;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(s(231,r,typeof o));return o}var Si=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),si=!1;if(Si)try{var Js={};Object.defineProperty(Js,"passive",{get:function(){si=!0}}),window.addEventListener("test",Js,Js),window.removeEventListener("test",Js,Js)}catch{si=!1}var Fi=null,ts=null,Tr=null;function El(){if(Tr)return Tr;var i,r=ts,o=r.length,l,f="value"in Fi?Fi.value:Fi.textContent,m=f.length;for(i=0;i<o&&r[i]===f[i];i++);var T=o-i;for(l=1;l<=T&&r[o-l]===f[m-l];l++);return Tr=f.slice(i,1<l?1-l:void 0)}function Gi(i){var r=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&r===13&&(i=13)):i=r,i===10&&(i=13),32<=i||i===13?i:0}function $i(){return!0}function Tl(){return!1}function Qe(i){function r(o,l,f,m,T){this._reactName=o,this._targetInst=f,this.type=l,this.nativeEvent=m,this.target=T,this.currentTarget=null;for(var w in i)i.hasOwnProperty(w)&&(o=i[w],this[w]=o?o(m):m[w]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?$i:Tl,this.isPropagationStopped=Tl,this}return y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){},isPersistent:$i}),r}var ee={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xa=Qe(ee),ta=y({},ee,{view:0,detail:0}),fc=Qe(ta),Ka,Qa,Yi,ea=y({},ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ra,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Yi&&(Yi&&i.type==="mousemove"?(Ka=i.screenX-Yi.screenX,Qa=i.screenY-Yi.screenY):Qa=Ka=0,Yi=i),Ka)},movementY:function(i){return"movementY"in i?i.movementY:Qa}}),ai=Qe(ea),dc=y({},ea,{dataTransfer:0}),id=Qe(dc),na=y({},ta,{relatedTarget:0}),Za=Qe(na),Sl=y({},ee,{animationName:0,elapsedTime:0,pseudoElement:0}),Wa=Qe(Sl),mc=y({},ee,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Ja=Qe(mc),rd=y({},ee,{data:0}),wl=Qe(rd),ia={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function bl(i){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(i):(i=pc[i])?!!r[i]:!1}function ra(){return bl}var yc=y({},ta,{key:function(i){if(i.key){var r=ia[i.key]||i.key;if(r!=="Unidentified")return r}return i.type==="keypress"?(i=Gi(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?gc[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ra,charCode:function(i){return i.type==="keypress"?Gi(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Gi(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),to=Qe(yc),_c=y({},ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Al=Qe(_c),Sr=y({},ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ra}),vc=Qe(Sr),Ec=y({},ee,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tc=Qe(Ec),Sc=y({},ea,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),eo=Qe(Sc),xn=y({},ee,{newState:0,oldState:0}),wc=Qe(xn),bc=[9,13,27,32],Xi=Si&&"CompositionEvent"in window,h=null;Si&&"documentMode"in document&&(h=document.documentMode);var _=Si&&"TextEvent"in window&&!h,E=Si&&(!Xi||h&&8<h&&11>=h),x=" ",K=!1;function ot(i,r){switch(i){case"keyup":return bc.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pt(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Yt=!1;function qe(i,r){switch(i){case"compositionend":return pt(r);case"keypress":return r.which!==32?null:(K=!0,x);case"textInput":return i=r.data,i===x&&K?null:i;default:return null}}function Xt(i,r){if(Yt)return i==="compositionend"||!Xi&&ot(i,r)?(i=El(),Tr=ts=Fi=null,Yt=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return E&&r.locale!=="ko"?null:r.data;default:return null}}var Ze={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function je(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r==="input"?!!Ze[i.type]:r==="textarea"}function wr(i,r,o,l){vr?Er?Er.push(l):Er=[l]:vr=l,r=ch(r,"onChange"),0<r.length&&(o=new Xa("onChange","change",null,o,l),i.push({event:o,listeners:r}))}var on=null,Ki=null;function Rl(i){nv(i,0)}function Ac(i){var r=ei(i);if(pl(r))return i}function wy(i,r){if(i==="change")return r}var by=!1;if(Si){var sd;if(Si){var ad="oninput"in document;if(!ad){var Ay=document.createElement("div");Ay.setAttribute("oninput","return;"),ad=typeof Ay.oninput=="function"}sd=ad}else sd=!1;by=sd&&(!document.documentMode||9<document.documentMode)}function Ry(){on&&(on.detachEvent("onpropertychange",xy),Ki=on=null)}function xy(i){if(i.propertyName==="value"&&Ac(Ki)){var r=[];wr(r,Ki,i,ri(i)),hc(Rl,r)}}function Yb(i,r,o){i==="focusin"?(Ry(),on=r,Ki=o,on.attachEvent("onpropertychange",xy)):i==="focusout"&&Ry()}function Xb(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ac(Ki)}function Kb(i,r){if(i==="click")return Ac(r)}function Qb(i,r){if(i==="input"||i==="change")return Ac(r)}function Zb(i,r){return i===r&&(i!==0||1/i===1/r)||i!==i&&r!==r}var jn=typeof Object.is=="function"?Object.is:Zb;function xl(i,r){if(jn(i,r))return!0;if(typeof i!="object"||i===null||typeof r!="object"||r===null)return!1;var o=Object.keys(i),l=Object.keys(r);if(o.length!==l.length)return!1;for(l=0;l<o.length;l++){var f=o[l];if(!Ne.call(r,f)||!jn(i[f],r[f]))return!1}return!0}function Iy(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Cy(i,r){var o=Iy(i);i=0;for(var l;o;){if(o.nodeType===3){if(l=i+o.textContent.length,i<=r&&l>=r)return{node:o,offset:r-i};i=l}t:{for(;o;){if(o.nextSibling){o=o.nextSibling;break t}o=o.parentNode}o=void 0}o=Iy(o)}}function Ny(i,r){return i&&r?i===r?!0:i&&i.nodeType===3?!1:r&&r.nodeType===3?Ny(i,r.parentNode):"contains"in i?i.contains(r):i.compareDocumentPosition?!!(i.compareDocumentPosition(r)&16):!1:!1}function Dy(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var r=Xs(i.document);r instanceof i.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)i=r.contentWindow;else break;r=Xs(i.document)}return r}function od(i){var r=i&&i.nodeName&&i.nodeName.toLowerCase();return r&&(r==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||r==="textarea"||i.contentEditable==="true")}var Wb=Si&&"documentMode"in document&&11>=document.documentMode,no=null,ld=null,Il=null,ud=!1;function My(i,r,o){var l=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;ud||no==null||no!==Xs(l)||(l=no,"selectionStart"in l&&od(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Il&&xl(Il,l)||(Il=l,l=ch(ld,"onSelect"),0<l.length&&(r=new Xa("onSelect","select",null,r,o),i.push({event:r,listeners:l}),r.target=no)))}function sa(i,r){var o={};return o[i.toLowerCase()]=r.toLowerCase(),o["Webkit"+i]="webkit"+r,o["Moz"+i]="moz"+r,o}var io={animationend:sa("Animation","AnimationEnd"),animationiteration:sa("Animation","AnimationIteration"),animationstart:sa("Animation","AnimationStart"),transitionrun:sa("Transition","TransitionRun"),transitionstart:sa("Transition","TransitionStart"),transitioncancel:sa("Transition","TransitionCancel"),transitionend:sa("Transition","TransitionEnd")},cd={},Oy={};Si&&(Oy=document.createElement("div").style,"AnimationEvent"in window||(delete io.animationend.animation,delete io.animationiteration.animation,delete io.animationstart.animation),"TransitionEvent"in window||delete io.transitionend.transition);function aa(i){if(cd[i])return cd[i];if(!io[i])return i;var r=io[i],o;for(o in r)if(r.hasOwnProperty(o)&&o in Oy)return cd[i]=r[o];return i}var Vy=aa("animationend"),ky=aa("animationiteration"),Py=aa("animationstart"),Jb=aa("transitionrun"),tA=aa("transitionstart"),eA=aa("transitioncancel"),Ly=aa("transitionend"),Uy=new Map,hd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hd.push("scrollEnd");function wi(i,r){Uy.set(i,r),Hn(r,[i])}var zy=new WeakMap;function oi(i,r){if(typeof i=="object"&&i!==null){var o=zy.get(i);return o!==void 0?o:(r={value:i,source:r,stack:Ga(r)},zy.set(i,r),r)}return{value:i,source:r,stack:Ga(r)}}var li=[],ro=0,fd=0;function Rc(){for(var i=ro,r=fd=ro=0;r<i;){var o=li[r];li[r++]=null;var l=li[r];li[r++]=null;var f=li[r];li[r++]=null;var m=li[r];if(li[r++]=null,l!==null&&f!==null){var T=l.pending;T===null?f.next=f:(f.next=T.next,T.next=f),l.pending=f}m!==0&&By(o,f,m)}}function xc(i,r,o,l){li[ro++]=i,li[ro++]=r,li[ro++]=o,li[ro++]=l,fd|=l,i.lanes|=l,i=i.alternate,i!==null&&(i.lanes|=l)}function dd(i,r,o,l){return xc(i,r,o,l),Ic(i)}function so(i,r){return xc(i,null,null,r),Ic(i)}function By(i,r,o){i.lanes|=o;var l=i.alternate;l!==null&&(l.lanes|=o);for(var f=!1,m=i.return;m!==null;)m.childLanes|=o,l=m.alternate,l!==null&&(l.childLanes|=o),m.tag===22&&(i=m.stateNode,i===null||i._visibility&1||(f=!0)),i=m,m=m.return;return i.tag===3?(m=i.stateNode,f&&r!==null&&(f=31-ge(o),i=m.hiddenUpdates,l=i[f],l===null?i[f]=[r]:l.push(r),r.lane=o|536870912),m):null}function Ic(i){if(50<Jl)throw Jl=0,vm=null,Error(s(185));for(var r=i.return;r!==null;)i=r,r=i.return;return i.tag===3?i.stateNode:null}var ao={};function nA(i,r,o,l){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fn(i,r,o,l){return new nA(i,r,o,l)}function md(i){return i=i.prototype,!(!i||!i.isReactComponent)}function br(i,r){var o=i.alternate;return o===null?(o=Fn(i.tag,r,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=r,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&65011712,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,r=i.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function Hy(i,r){i.flags&=65011714;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=r,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,r=o.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),i}function Cc(i,r,o,l,f,m){var T=0;if(l=i,typeof i=="function")md(i)&&(T=1);else if(typeof i=="string")T=rR(i,o,ht.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case R:return i=Fn(31,o,r,f),i.elementType=R,i.lanes=m,i;case k:return oa(o.children,f,m,r);case P:T=8,f|=24;break;case U:return i=Fn(12,o,r,f|2),i.elementType=U,i.lanes=m,i;case at:return i=Fn(13,o,r,f),i.elementType=at,i.lanes=m,i;case Z:return i=Fn(19,o,r,f),i.elementType=Z,i.lanes=m,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case B:case X:T=10;break t;case j:T=9;break t;case F:T=11;break t;case N:T=14;break t;case A:T=16,l=null;break t}T=29,o=Error(s(130,i===null?"null":typeof i,"")),l=null}return r=Fn(T,o,r,f),r.elementType=i,r.type=l,r.lanes=m,r}function oa(i,r,o,l){return i=Fn(7,i,l,r),i.lanes=o,i}function gd(i,r,o){return i=Fn(6,i,null,r),i.lanes=o,i}function pd(i,r,o){return r=Fn(4,i.children!==null?i.children:[],i.key,r),r.lanes=o,r.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},r}var oo=[],lo=0,Nc=null,Dc=0,ui=[],ci=0,la=null,Ar=1,Rr="";function ua(i,r){oo[lo++]=Dc,oo[lo++]=Nc,Nc=i,Dc=r}function qy(i,r,o){ui[ci++]=Ar,ui[ci++]=Rr,ui[ci++]=la,la=i;var l=Ar;i=Rr;var f=32-ge(l)-1;l&=~(1<<f),o+=1;var m=32-ge(r)+f;if(30<m){var T=f-f%5;m=(l&(1<<T)-1).toString(32),l>>=T,f-=T,Ar=1<<32-ge(r)+f|o<<f|l,Rr=m+i}else Ar=1<<m|o<<f|l,Rr=i}function yd(i){i.return!==null&&(ua(i,1),qy(i,1,0))}function _d(i){for(;i===Nc;)Nc=oo[--lo],oo[lo]=null,Dc=oo[--lo],oo[lo]=null;for(;i===la;)la=ui[--ci],ui[ci]=null,Rr=ui[--ci],ui[ci]=null,Ar=ui[--ci],ui[ci]=null}var In=null,Se=null,Jt=!1,ca=null,Qi=!1,vd=Error(s(519));function ha(i){var r=Error(s(418,""));throw Dl(oi(r,i)),vd}function jy(i){var r=i.stateNode,o=i.type,l=i.memoizedProps;switch(r[Re]=i,r[Te]=l,o){case"dialog":qt("cancel",r),qt("close",r);break;case"iframe":case"object":case"embed":qt("load",r);break;case"video":case"audio":for(o=0;o<eu.length;o++)qt(eu[o],r);break;case"source":qt("error",r);break;case"img":case"image":case"link":qt("error",r),qt("load",r);break;case"details":qt("toggle",r);break;case"input":qt("invalid",r),Ks(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),$a(r);break;case"select":qt("invalid",r);break;case"textarea":qt("invalid",r),Qs(r,l.value,l.defaultValue,l.children),$a(r)}o=l.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||r.textContent===""+o||l.suppressHydrationWarning===!0||av(r.textContent,o)?(l.popover!=null&&(qt("beforetoggle",r),qt("toggle",r)),l.onScroll!=null&&qt("scroll",r),l.onScrollEnd!=null&&qt("scrollend",r),l.onClick!=null&&(r.onclick=hh),r=!0):r=!1,r||ha(i)}function Fy(i){for(In=i.return;In;)switch(In.tag){case 5:case 13:Qi=!1;return;case 27:case 3:Qi=!0;return;default:In=In.return}}function Cl(i){if(i!==In)return!1;if(!Jt)return Fy(i),Jt=!0,!1;var r=i.tag,o;if((o=r!==3&&r!==27)&&((o=r===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||km(i.type,i.memoizedProps)),o=!o),o&&Se&&ha(i),Fy(i),r===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(s(317));t:{for(i=i.nextSibling,r=0;i;){if(i.nodeType===8)if(o=i.data,o==="/$"){if(r===0){Se=Ai(i.nextSibling);break t}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++;i=i.nextSibling}Se=null}}else r===27?(r=Se,ps(i.type)?(i=zm,zm=null,Se=i):Se=r):Se=In?Ai(i.stateNode.nextSibling):null;return!0}function Nl(){Se=In=null,Jt=!1}function Gy(){var i=ca;return i!==null&&(Vn===null?Vn=i:Vn.push.apply(Vn,i),ca=null),i}function Dl(i){ca===null?ca=[i]:ca.push(i)}var Ed=q(null),fa=null,xr=null;function es(i,r,o){rt(Ed,r._currentValue),r._currentValue=o}function Ir(i){i._currentValue=Ed.current,J(Ed)}function Td(i,r,o){for(;i!==null;){var l=i.alternate;if((i.childLanes&r)!==r?(i.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),i===o)break;i=i.return}}function Sd(i,r,o,l){var f=i.child;for(f!==null&&(f.return=i);f!==null;){var m=f.dependencies;if(m!==null){var T=f.child;m=m.firstContext;t:for(;m!==null;){var w=m;m=f;for(var z=0;z<r.length;z++)if(w.context===r[z]){m.lanes|=o,w=m.alternate,w!==null&&(w.lanes|=o),Td(m.return,o,i),l||(T=null);break t}m=w.next}}else if(f.tag===18){if(T=f.return,T===null)throw Error(s(341));T.lanes|=o,m=T.alternate,m!==null&&(m.lanes|=o),Td(T,o,i),T=null}else T=f.child;if(T!==null)T.return=f;else for(T=f;T!==null;){if(T===i){T=null;break}if(f=T.sibling,f!==null){f.return=T.return,T=f;break}T=T.return}f=T}}function Ml(i,r,o,l){i=null;for(var f=r,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var T=f.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var w=f.type;jn(f.pendingProps.value,T.value)||(i!==null?i.push(w):i=[w])}}else if(f===Nt.current){if(T=f.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(i!==null?i.push(ou):i=[ou])}f=f.return}i!==null&&Sd(r,i,o,l),r.flags|=262144}function Mc(i){for(i=i.firstContext;i!==null;){if(!jn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function da(i){fa=i,xr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function mn(i){return $y(fa,i)}function Oc(i,r){return fa===null&&da(i),$y(i,r)}function $y(i,r){var o=r._currentValue;if(r={context:r,memoizedValue:o,next:null},xr===null){if(i===null)throw Error(s(308));xr=r,i.dependencies={lanes:0,firstContext:r},i.flags|=524288}else xr=xr.next=r;return o}var iA=typeof AbortController<"u"?AbortController:function(){var i=[],r=this.signal={aborted:!1,addEventListener:function(o,l){i.push(l)}};this.abort=function(){r.aborted=!0,i.forEach(function(o){return o()})}},rA=e.unstable_scheduleCallback,sA=e.unstable_NormalPriority,Fe={$$typeof:X,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wd(){return{controller:new iA,data:new Map,refCount:0}}function Ol(i){i.refCount--,i.refCount===0&&rA(sA,function(){i.controller.abort()})}var Vl=null,bd=0,uo=0,co=null;function aA(i,r){if(Vl===null){var o=Vl=[];bd=0,uo=Rm(),co={status:"pending",value:void 0,then:function(l){o.push(l)}}}return bd++,r.then(Yy,Yy),r}function Yy(){if(--bd===0&&Vl!==null){co!==null&&(co.status="fulfilled");var i=Vl;Vl=null,uo=0,co=null;for(var r=0;r<i.length;r++)(0,i[r])()}}function oA(i,r){var o=[],l={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return i.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<o.length;f++)(0,o[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),l}var Xy=V.S;V.S=function(i,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&aA(i,r),Xy!==null&&Xy(i,r)};var ma=q(null);function Ad(){var i=ma.current;return i!==null?i:he.pooledCache}function Vc(i,r){r===null?rt(ma,ma.current):rt(ma,r.pool)}function Ky(){var i=Ad();return i===null?null:{parent:Fe._currentValue,pool:i}}var kl=Error(s(460)),Qy=Error(s(474)),kc=Error(s(542)),Rd={then:function(){}};function Zy(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Pc(){}function Wy(i,r,o){switch(o=i[o],o===void 0?i.push(r):o!==r&&(r.then(Pc,Pc),r=o),r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,t_(i),i;default:if(typeof r.status=="string")r.then(Pc,Pc);else{if(i=he,i!==null&&100<i.shellSuspendCounter)throw Error(s(482));i=r,i.status="pending",i.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw i=r.reason,t_(i),i}throw Pl=r,kl}}var Pl=null;function Jy(){if(Pl===null)throw Error(s(459));var i=Pl;return Pl=null,i}function t_(i){if(i===kl||i===kc)throw Error(s(483))}var ns=!1;function xd(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Id(i,r){i=i.updateQueue,r.updateQueue===i&&(r.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function is(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function rs(i,r,o){var l=i.updateQueue;if(l===null)return null;if(l=l.shared,(ie&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=Ic(i),By(i,null,o),r}return xc(i,l,r,o),Ic(i)}function Ll(i,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194048)!==0)){var l=r.lanes;l&=i.pendingLanes,o|=l,r.lanes=o,Fs(i,o)}}function Cd(i,r){var o=i.updateQueue,l=i.alternate;if(l!==null&&(l=l.updateQueue,o===l)){var f=null,m=null;if(o=o.firstBaseUpdate,o!==null){do{var T={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};m===null?f=m=T:m=m.next=T,o=o.next}while(o!==null);m===null?f=m=r:m=m.next=r}else f=m=r;o={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:l.shared,callbacks:l.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=r:i.next=r,o.lastBaseUpdate=r}var Nd=!1;function Ul(){if(Nd){var i=co;if(i!==null)throw i}}function zl(i,r,o,l){Nd=!1;var f=i.updateQueue;ns=!1;var m=f.firstBaseUpdate,T=f.lastBaseUpdate,w=f.shared.pending;if(w!==null){f.shared.pending=null;var z=w,W=z.next;z.next=null,T===null?m=W:T.next=W,T=z;var lt=i.alternate;lt!==null&&(lt=lt.updateQueue,w=lt.lastBaseUpdate,w!==T&&(w===null?lt.firstBaseUpdate=W:w.next=W,lt.lastBaseUpdate=z))}if(m!==null){var ft=f.baseState;T=0,lt=W=z=null,w=m;do{var nt=w.lane&-536870913,st=nt!==w.lane;if(st?(Kt&nt)===nt:(l&nt)===nt){nt!==0&&nt===uo&&(Nd=!0),lt!==null&&(lt=lt.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});t:{var Dt=i,xt=w;nt=r;var le=o;switch(xt.tag){case 1:if(Dt=xt.payload,typeof Dt=="function"){ft=Dt.call(le,ft,nt);break t}ft=Dt;break t;case 3:Dt.flags=Dt.flags&-65537|128;case 0:if(Dt=xt.payload,nt=typeof Dt=="function"?Dt.call(le,ft,nt):Dt,nt==null)break t;ft=y({},ft,nt);break t;case 2:ns=!0}}nt=w.callback,nt!==null&&(i.flags|=64,st&&(i.flags|=8192),st=f.callbacks,st===null?f.callbacks=[nt]:st.push(nt))}else st={lane:nt,tag:w.tag,payload:w.payload,callback:w.callback,next:null},lt===null?(W=lt=st,z=ft):lt=lt.next=st,T|=nt;if(w=w.next,w===null){if(w=f.shared.pending,w===null)break;st=w,w=st.next,st.next=null,f.lastBaseUpdate=st,f.shared.pending=null}}while(!0);lt===null&&(z=ft),f.baseState=z,f.firstBaseUpdate=W,f.lastBaseUpdate=lt,m===null&&(f.shared.lanes=0),fs|=T,i.lanes=T,i.memoizedState=ft}}function e_(i,r){if(typeof i!="function")throw Error(s(191,i));i.call(r)}function n_(i,r){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)e_(o[i],r)}var ho=q(null),Lc=q(0);function i_(i,r){i=kr,rt(Lc,i),rt(ho,r),kr=i|r.baseLanes}function Dd(){rt(Lc,kr),rt(ho,ho.current)}function Md(){kr=Lc.current,J(ho),J(Lc)}var ss=0,Pt=null,ae=null,ke=null,Uc=!1,fo=!1,ga=!1,zc=0,Bl=0,mo=null,lA=0;function xe(){throw Error(s(321))}function Od(i,r){if(r===null)return!1;for(var o=0;o<r.length&&o<i.length;o++)if(!jn(i[o],r[o]))return!1;return!0}function Vd(i,r,o,l,f,m){return ss=m,Pt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,V.H=i===null||i.memoizedState===null?B_:H_,ga=!1,m=o(l,f),ga=!1,fo&&(m=s_(r,o,l,f)),r_(i),m}function r_(i){V.H=Gc;var r=ae!==null&&ae.next!==null;if(ss=0,ke=ae=Pt=null,Uc=!1,Bl=0,mo=null,r)throw Error(s(300));i===null||We||(i=i.dependencies,i!==null&&Mc(i)&&(We=!0))}function s_(i,r,o,l){Pt=i;var f=0;do{if(fo&&(mo=null),Bl=0,fo=!1,25<=f)throw Error(s(301));if(f+=1,ke=ae=null,i.updateQueue!=null){var m=i.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}V.H=gA,m=r(o,l)}while(fo);return m}function uA(){var i=V.H,r=i.useState()[0];return r=typeof r.then=="function"?Hl(r):r,i=i.useState()[0],(ae!==null?ae.memoizedState:null)!==i&&(Pt.flags|=1024),r}function kd(){var i=zc!==0;return zc=0,i}function Pd(i,r,o){r.updateQueue=i.updateQueue,r.flags&=-2053,i.lanes&=~o}function Ld(i){if(Uc){for(i=i.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Uc=!1}ss=0,ke=ae=Pt=null,fo=!1,Bl=zc=0,mo=null}function Mn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?Pt.memoizedState=ke=i:ke=ke.next=i,ke}function Pe(){if(ae===null){var i=Pt.alternate;i=i!==null?i.memoizedState:null}else i=ae.next;var r=ke===null?Pt.memoizedState:ke.next;if(r!==null)ke=r,ae=i;else{if(i===null)throw Pt.alternate===null?Error(s(467)):Error(s(310));ae=i,i={memoizedState:ae.memoizedState,baseState:ae.baseState,baseQueue:ae.baseQueue,queue:ae.queue,next:null},ke===null?Pt.memoizedState=ke=i:ke=ke.next=i}return ke}function Ud(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Hl(i){var r=Bl;return Bl+=1,mo===null&&(mo=[]),i=Wy(mo,i,r),r=Pt,(ke===null?r.memoizedState:ke.next)===null&&(r=r.alternate,V.H=r===null||r.memoizedState===null?B_:H_),i}function Bc(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Hl(i);if(i.$$typeof===X)return mn(i)}throw Error(s(438,String(i)))}function zd(i){var r=null,o=Pt.updateQueue;if(o!==null&&(r=o.memoCache),r==null){var l=Pt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),o===null&&(o=Ud(),Pt.updateQueue=o),o.memoCache=r,o=r.data[r.index],o===void 0)for(o=r.data[r.index]=Array(i),l=0;l<i;l++)o[l]=D;return r.index++,o}function Cr(i,r){return typeof r=="function"?r(i):r}function Hc(i){var r=Pe();return Bd(r,ae,i)}function Bd(i,r,o){var l=i.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=o;var f=i.baseQueue,m=l.pending;if(m!==null){if(f!==null){var T=f.next;f.next=m.next,m.next=T}r.baseQueue=f=m,l.pending=null}if(m=i.baseState,f===null)i.memoizedState=m;else{r=f.next;var w=T=null,z=null,W=r,lt=!1;do{var ft=W.lane&-536870913;if(ft!==W.lane?(Kt&ft)===ft:(ss&ft)===ft){var nt=W.revertLane;if(nt===0)z!==null&&(z=z.next={lane:0,revertLane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),ft===uo&&(lt=!0);else if((ss&nt)===nt){W=W.next,nt===uo&&(lt=!0);continue}else ft={lane:0,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},z===null?(w=z=ft,T=m):z=z.next=ft,Pt.lanes|=nt,fs|=nt;ft=W.action,ga&&o(m,ft),m=W.hasEagerState?W.eagerState:o(m,ft)}else nt={lane:ft,revertLane:W.revertLane,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},z===null?(w=z=nt,T=m):z=z.next=nt,Pt.lanes|=ft,fs|=ft;W=W.next}while(W!==null&&W!==r);if(z===null?T=m:z.next=w,!jn(m,i.memoizedState)&&(We=!0,lt&&(o=co,o!==null)))throw o;i.memoizedState=m,i.baseState=T,i.baseQueue=z,l.lastRenderedState=m}return f===null&&(l.lanes=0),[i.memoizedState,l.dispatch]}function Hd(i){var r=Pe(),o=r.queue;if(o===null)throw Error(s(311));o.lastRenderedReducer=i;var l=o.dispatch,f=o.pending,m=r.memoizedState;if(f!==null){o.pending=null;var T=f=f.next;do m=i(m,T.action),T=T.next;while(T!==f);jn(m,r.memoizedState)||(We=!0),r.memoizedState=m,r.baseQueue===null&&(r.baseState=m),o.lastRenderedState=m}return[m,l]}function a_(i,r,o){var l=Pt,f=Pe(),m=Jt;if(m){if(o===void 0)throw Error(s(407));o=o()}else o=r();var T=!jn((ae||f).memoizedState,o);T&&(f.memoizedState=o,We=!0),f=f.queue;var w=u_.bind(null,l,f,i);if(ql(2048,8,w,[i]),f.getSnapshot!==r||T||ke!==null&&ke.memoizedState.tag&1){if(l.flags|=2048,go(9,qc(),l_.bind(null,l,f,o,r),null),he===null)throw Error(s(349));m||(ss&124)!==0||o_(l,r,o)}return o}function o_(i,r,o){i.flags|=16384,i={getSnapshot:r,value:o},r=Pt.updateQueue,r===null?(r=Ud(),Pt.updateQueue=r,r.stores=[i]):(o=r.stores,o===null?r.stores=[i]:o.push(i))}function l_(i,r,o,l){r.value=o,r.getSnapshot=l,c_(r)&&h_(i)}function u_(i,r,o){return o(function(){c_(r)&&h_(i)})}function c_(i){var r=i.getSnapshot;i=i.value;try{var o=r();return!jn(i,o)}catch{return!0}}function h_(i){var r=so(i,2);r!==null&&Kn(r,i,2)}function qd(i){var r=Mn();if(typeof i=="function"){var o=i;if(i=o(),ga){Me(!0);try{o()}finally{Me(!1)}}}return r.memoizedState=r.baseState=i,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:i},r}function f_(i,r,o,l){return i.baseState=o,Bd(i,ae,typeof l=="function"?l:Cr)}function cA(i,r,o,l,f){if(Fc(i))throw Error(s(485));if(i=r.action,i!==null){var m={payload:f,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){m.listeners.push(T)}};V.T!==null?o(!0):m.isTransition=!1,l(m),o=r.pending,o===null?(m.next=r.pending=m,d_(r,m)):(m.next=o.next,r.pending=o.next=m)}}function d_(i,r){var o=r.action,l=r.payload,f=i.state;if(r.isTransition){var m=V.T,T={};V.T=T;try{var w=o(f,l),z=V.S;z!==null&&z(T,w),m_(i,r,w)}catch(W){jd(i,r,W)}finally{V.T=m}}else try{m=o(f,l),m_(i,r,m)}catch(W){jd(i,r,W)}}function m_(i,r,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(l){g_(i,r,l)},function(l){return jd(i,r,l)}):g_(i,r,o)}function g_(i,r,o){r.status="fulfilled",r.value=o,p_(r),i.state=o,r=i.pending,r!==null&&(o=r.next,o===r?i.pending=null:(o=o.next,r.next=o,d_(i,o)))}function jd(i,r,o){var l=i.pending;if(i.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=o,p_(r),r=r.next;while(r!==l)}i.action=null}function p_(i){i=i.listeners;for(var r=0;r<i.length;r++)(0,i[r])()}function y_(i,r){return r}function __(i,r){if(Jt){var o=he.formState;if(o!==null){t:{var l=Pt;if(Jt){if(Se){e:{for(var f=Se,m=Qi;f.nodeType!==8;){if(!m){f=null;break e}if(f=Ai(f.nextSibling),f===null){f=null;break e}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){Se=Ai(f.nextSibling),l=f.data==="F!";break t}}ha(l)}l=!1}l&&(r=o[0])}}return o=Mn(),o.memoizedState=o.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:y_,lastRenderedState:r},o.queue=l,o=L_.bind(null,Pt,l),l.dispatch=o,l=qd(!1),m=Xd.bind(null,Pt,!1,l.queue),l=Mn(),f={state:r,dispatch:null,action:i,pending:null},l.queue=f,o=cA.bind(null,Pt,f,m,o),f.dispatch=o,l.memoizedState=i,[r,o,!1]}function v_(i){var r=Pe();return E_(r,ae,i)}function E_(i,r,o){if(r=Bd(i,r,y_)[0],i=Hc(Cr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Hl(r)}catch(T){throw T===kl?kc:T}else l=r;r=Pe();var f=r.queue,m=f.dispatch;return o!==r.memoizedState&&(Pt.flags|=2048,go(9,qc(),hA.bind(null,f,o),null)),[l,m,i]}function hA(i,r){i.action=r}function T_(i){var r=Pe(),o=ae;if(o!==null)return E_(r,o,i);Pe(),r=r.memoizedState,o=Pe();var l=o.queue.dispatch;return o.memoizedState=i,[r,l,!1]}function go(i,r,o,l){return i={tag:i,create:o,deps:l,inst:r,next:null},r=Pt.updateQueue,r===null&&(r=Ud(),Pt.updateQueue=r),o=r.lastEffect,o===null?r.lastEffect=i.next=i:(l=o.next,o.next=i,i.next=l,r.lastEffect=i),i}function qc(){return{destroy:void 0,resource:void 0}}function S_(){return Pe().memoizedState}function jc(i,r,o,l){var f=Mn();l=l===void 0?null:l,Pt.flags|=i,f.memoizedState=go(1|r,qc(),o,l)}function ql(i,r,o,l){var f=Pe();l=l===void 0?null:l;var m=f.memoizedState.inst;ae!==null&&l!==null&&Od(l,ae.memoizedState.deps)?f.memoizedState=go(r,m,o,l):(Pt.flags|=i,f.memoizedState=go(1|r,m,o,l))}function w_(i,r){jc(8390656,8,i,r)}function b_(i,r){ql(2048,8,i,r)}function A_(i,r){return ql(4,2,i,r)}function R_(i,r){return ql(4,4,i,r)}function x_(i,r){if(typeof r=="function"){i=i();var o=r(i);return function(){typeof o=="function"?o():r(null)}}if(r!=null)return i=i(),r.current=i,function(){r.current=null}}function I_(i,r,o){o=o!=null?o.concat([i]):null,ql(4,4,x_.bind(null,r,i),o)}function Fd(){}function C_(i,r){var o=Pe();r=r===void 0?null:r;var l=o.memoizedState;return r!==null&&Od(r,l[1])?l[0]:(o.memoizedState=[i,r],i)}function N_(i,r){var o=Pe();r=r===void 0?null:r;var l=o.memoizedState;if(r!==null&&Od(r,l[1]))return l[0];if(l=i(),ga){Me(!0);try{i()}finally{Me(!1)}}return o.memoizedState=[l,r],l}function Gd(i,r,o){return o===void 0||(ss&1073741824)!==0?i.memoizedState=r:(i.memoizedState=o,i=O0(),Pt.lanes|=i,fs|=i,o)}function D_(i,r,o,l){return jn(o,r)?o:ho.current!==null?(i=Gd(i,o,l),jn(i,r)||(We=!0),i):(ss&42)===0?(We=!0,i.memoizedState=o):(i=O0(),Pt.lanes|=i,fs|=i,r)}function M_(i,r,o,l,f){var m=G.p;G.p=m!==0&&8>m?m:8;var T=V.T,w={};V.T=w,Xd(i,!1,r,o);try{var z=f(),W=V.S;if(W!==null&&W(w,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var lt=oA(z,l);jl(i,r,lt,Xn(i))}else jl(i,r,l,Xn(i))}catch(ft){jl(i,r,{then:function(){},status:"rejected",reason:ft},Xn())}finally{G.p=m,V.T=T}}function fA(){}function $d(i,r,o,l){if(i.tag!==5)throw Error(s(476));var f=O_(i).queue;M_(i,f,r,tt,o===null?fA:function(){return V_(i),o(l)})}function O_(i){var r=i.memoizedState;if(r!==null)return r;r={memoizedState:tt,baseState:tt,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:tt},next:null};var o={};return r.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cr,lastRenderedState:o},next:null},i.memoizedState=r,i=i.alternate,i!==null&&(i.memoizedState=r),r}function V_(i){var r=O_(i).next.queue;jl(i,r,{},Xn())}function Yd(){return mn(ou)}function k_(){return Pe().memoizedState}function P_(){return Pe().memoizedState}function dA(i){for(var r=i.return;r!==null;){switch(r.tag){case 24:case 3:var o=Xn();i=is(o);var l=rs(r,i,o);l!==null&&(Kn(l,r,o),Ll(l,r,o)),r={cache:wd()},i.payload=r;return}r=r.return}}function mA(i,r,o){var l=Xn();o={lane:l,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Fc(i)?U_(r,o):(o=dd(i,r,o,l),o!==null&&(Kn(o,i,l),z_(o,r,l)))}function L_(i,r,o){var l=Xn();jl(i,r,o,l)}function jl(i,r,o,l){var f={lane:l,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Fc(i))U_(r,f);else{var m=i.alternate;if(i.lanes===0&&(m===null||m.lanes===0)&&(m=r.lastRenderedReducer,m!==null))try{var T=r.lastRenderedState,w=m(T,o);if(f.hasEagerState=!0,f.eagerState=w,jn(w,T))return xc(i,r,f,0),he===null&&Rc(),!1}catch{}finally{}if(o=dd(i,r,f,l),o!==null)return Kn(o,i,l),z_(o,r,l),!0}return!1}function Xd(i,r,o,l){if(l={lane:2,revertLane:Rm(),action:l,hasEagerState:!1,eagerState:null,next:null},Fc(i)){if(r)throw Error(s(479))}else r=dd(i,o,l,2),r!==null&&Kn(r,i,2)}function Fc(i){var r=i.alternate;return i===Pt||r!==null&&r===Pt}function U_(i,r){fo=Uc=!0;var o=i.pending;o===null?r.next=r:(r.next=o.next,o.next=r),i.pending=r}function z_(i,r,o){if((o&4194048)!==0){var l=r.lanes;l&=i.pendingLanes,o|=l,r.lanes=o,Fs(i,o)}}var Gc={readContext:mn,use:Bc,useCallback:xe,useContext:xe,useEffect:xe,useImperativeHandle:xe,useLayoutEffect:xe,useInsertionEffect:xe,useMemo:xe,useReducer:xe,useRef:xe,useState:xe,useDebugValue:xe,useDeferredValue:xe,useTransition:xe,useSyncExternalStore:xe,useId:xe,useHostTransitionStatus:xe,useFormState:xe,useActionState:xe,useOptimistic:xe,useMemoCache:xe,useCacheRefresh:xe},B_={readContext:mn,use:Bc,useCallback:function(i,r){return Mn().memoizedState=[i,r===void 0?null:r],i},useContext:mn,useEffect:w_,useImperativeHandle:function(i,r,o){o=o!=null?o.concat([i]):null,jc(4194308,4,x_.bind(null,r,i),o)},useLayoutEffect:function(i,r){return jc(4194308,4,i,r)},useInsertionEffect:function(i,r){jc(4,2,i,r)},useMemo:function(i,r){var o=Mn();r=r===void 0?null:r;var l=i();if(ga){Me(!0);try{i()}finally{Me(!1)}}return o.memoizedState=[l,r],l},useReducer:function(i,r,o){var l=Mn();if(o!==void 0){var f=o(r);if(ga){Me(!0);try{o(r)}finally{Me(!1)}}}else f=r;return l.memoizedState=l.baseState=f,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:f},l.queue=i,i=i.dispatch=mA.bind(null,Pt,i),[l.memoizedState,i]},useRef:function(i){var r=Mn();return i={current:i},r.memoizedState=i},useState:function(i){i=qd(i);var r=i.queue,o=L_.bind(null,Pt,r);return r.dispatch=o,[i.memoizedState,o]},useDebugValue:Fd,useDeferredValue:function(i,r){var o=Mn();return Gd(o,i,r)},useTransition:function(){var i=qd(!1);return i=M_.bind(null,Pt,i.queue,!0,!1),Mn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,r,o){var l=Pt,f=Mn();if(Jt){if(o===void 0)throw Error(s(407));o=o()}else{if(o=r(),he===null)throw Error(s(349));(Kt&124)!==0||o_(l,r,o)}f.memoizedState=o;var m={value:o,getSnapshot:r};return f.queue=m,w_(u_.bind(null,l,m,i),[i]),l.flags|=2048,go(9,qc(),l_.bind(null,l,m,o,r),null),o},useId:function(){var i=Mn(),r=he.identifierPrefix;if(Jt){var o=Rr,l=Ar;o=(l&~(1<<32-ge(l)-1)).toString(32)+o,r=""+r+"R"+o,o=zc++,0<o&&(r+="H"+o.toString(32)),r+=""}else o=lA++,r=""+r+"r"+o.toString(32)+"";return i.memoizedState=r},useHostTransitionStatus:Yd,useFormState:__,useActionState:__,useOptimistic:function(i){var r=Mn();r.memoizedState=r.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=o,r=Xd.bind(null,Pt,!0,o),o.dispatch=r,[i,r]},useMemoCache:zd,useCacheRefresh:function(){return Mn().memoizedState=dA.bind(null,Pt)}},H_={readContext:mn,use:Bc,useCallback:C_,useContext:mn,useEffect:b_,useImperativeHandle:I_,useInsertionEffect:A_,useLayoutEffect:R_,useMemo:N_,useReducer:Hc,useRef:S_,useState:function(){return Hc(Cr)},useDebugValue:Fd,useDeferredValue:function(i,r){var o=Pe();return D_(o,ae.memoizedState,i,r)},useTransition:function(){var i=Hc(Cr)[0],r=Pe().memoizedState;return[typeof i=="boolean"?i:Hl(i),r]},useSyncExternalStore:a_,useId:k_,useHostTransitionStatus:Yd,useFormState:v_,useActionState:v_,useOptimistic:function(i,r){var o=Pe();return f_(o,ae,i,r)},useMemoCache:zd,useCacheRefresh:P_},gA={readContext:mn,use:Bc,useCallback:C_,useContext:mn,useEffect:b_,useImperativeHandle:I_,useInsertionEffect:A_,useLayoutEffect:R_,useMemo:N_,useReducer:Hd,useRef:S_,useState:function(){return Hd(Cr)},useDebugValue:Fd,useDeferredValue:function(i,r){var o=Pe();return ae===null?Gd(o,i,r):D_(o,ae.memoizedState,i,r)},useTransition:function(){var i=Hd(Cr)[0],r=Pe().memoizedState;return[typeof i=="boolean"?i:Hl(i),r]},useSyncExternalStore:a_,useId:k_,useHostTransitionStatus:Yd,useFormState:T_,useActionState:T_,useOptimistic:function(i,r){var o=Pe();return ae!==null?f_(o,ae,i,r):(o.baseState=i,[i,o.queue.dispatch])},useMemoCache:zd,useCacheRefresh:P_},po=null,Fl=0;function $c(i){var r=Fl;return Fl+=1,po===null&&(po=[]),Wy(po,i,r)}function Gl(i,r){r=r.props.ref,i.ref=r!==void 0?r:null}function Yc(i,r){throw r.$$typeof===v?Error(s(525)):(i=Object.prototype.toString.call(r),Error(s(31,i==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":i)))}function q_(i){var r=i._init;return r(i._payload)}function j_(i){function r($,H){if(i){var Q=$.deletions;Q===null?($.deletions=[H],$.flags|=16):Q.push(H)}}function o($,H){if(!i)return null;for(;H!==null;)r($,H),H=H.sibling;return null}function l($){for(var H=new Map;$!==null;)$.key!==null?H.set($.key,$):H.set($.index,$),$=$.sibling;return H}function f($,H){return $=br($,H),$.index=0,$.sibling=null,$}function m($,H,Q){return $.index=Q,i?(Q=$.alternate,Q!==null?(Q=Q.index,Q<H?($.flags|=67108866,H):Q):($.flags|=67108866,H)):($.flags|=1048576,H)}function T($){return i&&$.alternate===null&&($.flags|=67108866),$}function w($,H,Q,ct){return H===null||H.tag!==6?(H=gd(Q,$.mode,ct),H.return=$,H):(H=f(H,Q),H.return=$,H)}function z($,H,Q,ct){var Et=Q.type;return Et===k?lt($,H,Q.props.children,ct,Q.key):H!==null&&(H.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===A&&q_(Et)===H.type)?(H=f(H,Q.props),Gl(H,Q),H.return=$,H):(H=Cc(Q.type,Q.key,Q.props,null,$.mode,ct),Gl(H,Q),H.return=$,H)}function W($,H,Q,ct){return H===null||H.tag!==4||H.stateNode.containerInfo!==Q.containerInfo||H.stateNode.implementation!==Q.implementation?(H=pd(Q,$.mode,ct),H.return=$,H):(H=f(H,Q.children||[]),H.return=$,H)}function lt($,H,Q,ct,Et){return H===null||H.tag!==7?(H=oa(Q,$.mode,ct,Et),H.return=$,H):(H=f(H,Q),H.return=$,H)}function ft($,H,Q){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=gd(""+H,$.mode,Q),H.return=$,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case S:return Q=Cc(H.type,H.key,H.props,null,$.mode,Q),Gl(Q,H),Q.return=$,Q;case b:return H=pd(H,$.mode,Q),H.return=$,H;case A:var ct=H._init;return H=ct(H._payload),ft($,H,Q)}if(et(H)||L(H))return H=oa(H,$.mode,Q,null),H.return=$,H;if(typeof H.then=="function")return ft($,$c(H),Q);if(H.$$typeof===X)return ft($,Oc($,H),Q);Yc($,H)}return null}function nt($,H,Q,ct){var Et=H!==null?H.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Et!==null?null:w($,H,""+Q,ct);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case S:return Q.key===Et?z($,H,Q,ct):null;case b:return Q.key===Et?W($,H,Q,ct):null;case A:return Et=Q._init,Q=Et(Q._payload),nt($,H,Q,ct)}if(et(Q)||L(Q))return Et!==null?null:lt($,H,Q,ct,null);if(typeof Q.then=="function")return nt($,H,$c(Q),ct);if(Q.$$typeof===X)return nt($,H,Oc($,Q),ct);Yc($,Q)}return null}function st($,H,Q,ct,Et){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return $=$.get(Q)||null,w(H,$,""+ct,Et);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case S:return $=$.get(ct.key===null?Q:ct.key)||null,z(H,$,ct,Et);case b:return $=$.get(ct.key===null?Q:ct.key)||null,W(H,$,ct,Et);case A:var Ut=ct._init;return ct=Ut(ct._payload),st($,H,Q,ct,Et)}if(et(ct)||L(ct))return $=$.get(Q)||null,lt(H,$,ct,Et,null);if(typeof ct.then=="function")return st($,H,Q,$c(ct),Et);if(ct.$$typeof===X)return st($,H,Q,Oc(H,ct),Et);Yc(H,ct)}return null}function Dt($,H,Q,ct){for(var Et=null,Ut=null,Tt=H,It=H=0,tn=null;Tt!==null&&It<Q.length;It++){Tt.index>It?(tn=Tt,Tt=null):tn=Tt.sibling;var Wt=nt($,Tt,Q[It],ct);if(Wt===null){Tt===null&&(Tt=tn);break}i&&Tt&&Wt.alternate===null&&r($,Tt),H=m(Wt,H,It),Ut===null?Et=Wt:Ut.sibling=Wt,Ut=Wt,Tt=tn}if(It===Q.length)return o($,Tt),Jt&&ua($,It),Et;if(Tt===null){for(;It<Q.length;It++)Tt=ft($,Q[It],ct),Tt!==null&&(H=m(Tt,H,It),Ut===null?Et=Tt:Ut.sibling=Tt,Ut=Tt);return Jt&&ua($,It),Et}for(Tt=l(Tt);It<Q.length;It++)tn=st(Tt,$,It,Q[It],ct),tn!==null&&(i&&tn.alternate!==null&&Tt.delete(tn.key===null?It:tn.key),H=m(tn,H,It),Ut===null?Et=tn:Ut.sibling=tn,Ut=tn);return i&&Tt.forEach(function(Ts){return r($,Ts)}),Jt&&ua($,It),Et}function xt($,H,Q,ct){if(Q==null)throw Error(s(151));for(var Et=null,Ut=null,Tt=H,It=H=0,tn=null,Wt=Q.next();Tt!==null&&!Wt.done;It++,Wt=Q.next()){Tt.index>It?(tn=Tt,Tt=null):tn=Tt.sibling;var Ts=nt($,Tt,Wt.value,ct);if(Ts===null){Tt===null&&(Tt=tn);break}i&&Tt&&Ts.alternate===null&&r($,Tt),H=m(Ts,H,It),Ut===null?Et=Ts:Ut.sibling=Ts,Ut=Ts,Tt=tn}if(Wt.done)return o($,Tt),Jt&&ua($,It),Et;if(Tt===null){for(;!Wt.done;It++,Wt=Q.next())Wt=ft($,Wt.value,ct),Wt!==null&&(H=m(Wt,H,It),Ut===null?Et=Wt:Ut.sibling=Wt,Ut=Wt);return Jt&&ua($,It),Et}for(Tt=l(Tt);!Wt.done;It++,Wt=Q.next())Wt=st(Tt,$,It,Wt.value,ct),Wt!==null&&(i&&Wt.alternate!==null&&Tt.delete(Wt.key===null?It:Wt.key),H=m(Wt,H,It),Ut===null?Et=Wt:Ut.sibling=Wt,Ut=Wt);return i&&Tt.forEach(function(pR){return r($,pR)}),Jt&&ua($,It),Et}function le($,H,Q,ct){if(typeof Q=="object"&&Q!==null&&Q.type===k&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case S:t:{for(var Et=Q.key;H!==null;){if(H.key===Et){if(Et=Q.type,Et===k){if(H.tag===7){o($,H.sibling),ct=f(H,Q.props.children),ct.return=$,$=ct;break t}}else if(H.elementType===Et||typeof Et=="object"&&Et!==null&&Et.$$typeof===A&&q_(Et)===H.type){o($,H.sibling),ct=f(H,Q.props),Gl(ct,Q),ct.return=$,$=ct;break t}o($,H);break}else r($,H);H=H.sibling}Q.type===k?(ct=oa(Q.props.children,$.mode,ct,Q.key),ct.return=$,$=ct):(ct=Cc(Q.type,Q.key,Q.props,null,$.mode,ct),Gl(ct,Q),ct.return=$,$=ct)}return T($);case b:t:{for(Et=Q.key;H!==null;){if(H.key===Et)if(H.tag===4&&H.stateNode.containerInfo===Q.containerInfo&&H.stateNode.implementation===Q.implementation){o($,H.sibling),ct=f(H,Q.children||[]),ct.return=$,$=ct;break t}else{o($,H);break}else r($,H);H=H.sibling}ct=pd(Q,$.mode,ct),ct.return=$,$=ct}return T($);case A:return Et=Q._init,Q=Et(Q._payload),le($,H,Q,ct)}if(et(Q))return Dt($,H,Q,ct);if(L(Q)){if(Et=L(Q),typeof Et!="function")throw Error(s(150));return Q=Et.call(Q),xt($,H,Q,ct)}if(typeof Q.then=="function")return le($,H,$c(Q),ct);if(Q.$$typeof===X)return le($,H,Oc($,Q),ct);Yc($,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,H!==null&&H.tag===6?(o($,H.sibling),ct=f(H,Q),ct.return=$,$=ct):(o($,H),ct=gd(Q,$.mode,ct),ct.return=$,$=ct),T($)):o($,H)}return function($,H,Q,ct){try{Fl=0;var Et=le($,H,Q,ct);return po=null,Et}catch(Tt){if(Tt===kl||Tt===kc)throw Tt;var Ut=Fn(29,Tt,null,$.mode);return Ut.lanes=ct,Ut.return=$,Ut}finally{}}}var yo=j_(!0),F_=j_(!1),hi=q(null),Zi=null;function as(i){var r=i.alternate;rt(Ge,Ge.current&1),rt(hi,i),Zi===null&&(r===null||ho.current!==null||r.memoizedState!==null)&&(Zi=i)}function G_(i){if(i.tag===22){if(rt(Ge,Ge.current),rt(hi,i),Zi===null){var r=i.alternate;r!==null&&r.memoizedState!==null&&(Zi=i)}}else os()}function os(){rt(Ge,Ge.current),rt(hi,hi.current)}function Nr(i){J(hi),Zi===i&&(Zi=null),J(Ge)}var Ge=q(0);function Xc(i){for(var r=i;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||Um(o)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Kd(i,r,o,l){r=i.memoizedState,o=o(l,r),o=o==null?r:y({},r,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var Qd={enqueueSetState:function(i,r,o){i=i._reactInternals;var l=Xn(),f=is(l);f.payload=r,o!=null&&(f.callback=o),r=rs(i,f,l),r!==null&&(Kn(r,i,l),Ll(r,i,l))},enqueueReplaceState:function(i,r,o){i=i._reactInternals;var l=Xn(),f=is(l);f.tag=1,f.payload=r,o!=null&&(f.callback=o),r=rs(i,f,l),r!==null&&(Kn(r,i,l),Ll(r,i,l))},enqueueForceUpdate:function(i,r){i=i._reactInternals;var o=Xn(),l=is(o);l.tag=2,r!=null&&(l.callback=r),r=rs(i,l,o),r!==null&&(Kn(r,i,o),Ll(r,i,o))}};function $_(i,r,o,l,f,m,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(l,m,T):r.prototype&&r.prototype.isPureReactComponent?!xl(o,l)||!xl(f,m):!0}function Y_(i,r,o,l){i=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,l),r.state!==i&&Qd.enqueueReplaceState(r,r.state,null)}function pa(i,r){var o=r;if("ref"in r){o={};for(var l in r)l!=="ref"&&(o[l]=r[l])}if(i=i.defaultProps){o===r&&(o=y({},o));for(var f in i)o[f]===void 0&&(o[f]=i[f])}return o}var Kc=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function X_(i){Kc(i)}function K_(i){console.error(i)}function Q_(i){Kc(i)}function Qc(i,r){try{var o=i.onUncaughtError;o(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Z_(i,r,o){try{var l=i.onCaughtError;l(o.value,{componentStack:o.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Zd(i,r,o){return o=is(o),o.tag=3,o.payload={element:null},o.callback=function(){Qc(i,r)},o}function W_(i){return i=is(i),i.tag=3,i}function J_(i,r,o,l){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var m=l.value;i.payload=function(){return f(m)},i.callback=function(){Z_(r,o,l)}}var T=o.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){Z_(r,o,l),typeof f!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var w=l.stack;this.componentDidCatch(l.value,{componentStack:w!==null?w:""})})}function pA(i,r,o,l,f){if(o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=o.alternate,r!==null&&Ml(r,o,f,!0),o=hi.current,o!==null){switch(o.tag){case 13:return Zi===null?Tm():o.alternate===null&&we===0&&(we=3),o.flags&=-257,o.flags|=65536,o.lanes=f,l===Rd?o.flags|=16384:(r=o.updateQueue,r===null?o.updateQueue=new Set([l]):r.add(l),wm(i,l,f)),!1;case 22:return o.flags|=65536,l===Rd?o.flags|=16384:(r=o.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},o.updateQueue=r):(o=r.retryQueue,o===null?r.retryQueue=new Set([l]):o.add(l)),wm(i,l,f)),!1}throw Error(s(435,o.tag))}return wm(i,l,f),Tm(),!1}if(Jt)return r=hi.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==vd&&(i=Error(s(422),{cause:l}),Dl(oi(i,o)))):(l!==vd&&(r=Error(s(423),{cause:l}),Dl(oi(r,o))),i=i.current.alternate,i.flags|=65536,f&=-f,i.lanes|=f,l=oi(l,o),f=Zd(i.stateNode,l,f),Cd(i,f),we!==4&&(we=2)),!1;var m=Error(s(520),{cause:l});if(m=oi(m,o),Wl===null?Wl=[m]:Wl.push(m),we!==4&&(we=2),r===null)return!0;l=oi(l,o),o=r;do{switch(o.tag){case 3:return o.flags|=65536,i=f&-f,o.lanes|=i,i=Zd(o.stateNode,l,i),Cd(o,i),!1;case 1:if(r=o.type,m=o.stateNode,(o.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(ds===null||!ds.has(m))))return o.flags|=65536,f&=-f,o.lanes|=f,f=W_(f),J_(f,i,o,l),Cd(o,f),!1}o=o.return}while(o!==null);return!1}var t0=Error(s(461)),We=!1;function ln(i,r,o,l){r.child=i===null?F_(r,null,o,l):yo(r,i.child,o,l)}function e0(i,r,o,l,f){o=o.render;var m=r.ref;if("ref"in l){var T={};for(var w in l)w!=="ref"&&(T[w]=l[w])}else T=l;return da(r),l=Vd(i,r,o,T,m,f),w=kd(),i!==null&&!We?(Pd(i,r,f),Dr(i,r,f)):(Jt&&w&&yd(r),r.flags|=1,ln(i,r,l,f),r.child)}function n0(i,r,o,l,f){if(i===null){var m=o.type;return typeof m=="function"&&!md(m)&&m.defaultProps===void 0&&o.compare===null?(r.tag=15,r.type=m,i0(i,r,m,l,f)):(i=Cc(o.type,null,l,r,r.mode,f),i.ref=r.ref,i.return=r,r.child=i)}if(m=i.child,!sm(i,f)){var T=m.memoizedProps;if(o=o.compare,o=o!==null?o:xl,o(T,l)&&i.ref===r.ref)return Dr(i,r,f)}return r.flags|=1,i=br(m,l),i.ref=r.ref,i.return=r,r.child=i}function i0(i,r,o,l,f){if(i!==null){var m=i.memoizedProps;if(xl(m,l)&&i.ref===r.ref)if(We=!1,r.pendingProps=l=m,sm(i,f))(i.flags&131072)!==0&&(We=!0);else return r.lanes=i.lanes,Dr(i,r,f)}return Wd(i,r,o,l,f)}function r0(i,r,o){var l=r.pendingProps,f=l.children,m=i!==null?i.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=m!==null?m.baseLanes|o:o,i!==null){for(f=r.child=i.child,m=0;f!==null;)m=m|f.lanes|f.childLanes,f=f.sibling;r.childLanes=m&~l}else r.childLanes=0,r.child=null;return s0(i,r,l,o)}if((o&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},i!==null&&Vc(r,m!==null?m.cachePool:null),m!==null?i_(r,m):Dd(),G_(r);else return r.lanes=r.childLanes=536870912,s0(i,r,m!==null?m.baseLanes|o:o,o)}else m!==null?(Vc(r,m.cachePool),i_(r,m),os(),r.memoizedState=null):(i!==null&&Vc(r,null),Dd(),os());return ln(i,r,f,o),r.child}function s0(i,r,o,l){var f=Ad();return f=f===null?null:{parent:Fe._currentValue,pool:f},r.memoizedState={baseLanes:o,cachePool:f},i!==null&&Vc(r,null),Dd(),G_(r),i!==null&&Ml(i,r,l,!0),null}function Zc(i,r){var o=r.ref;if(o===null)i!==null&&i.ref!==null&&(r.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(s(284));(i===null||i.ref!==o)&&(r.flags|=4194816)}}function Wd(i,r,o,l,f){return da(r),o=Vd(i,r,o,l,void 0,f),l=kd(),i!==null&&!We?(Pd(i,r,f),Dr(i,r,f)):(Jt&&l&&yd(r),r.flags|=1,ln(i,r,o,f),r.child)}function a0(i,r,o,l,f,m){return da(r),r.updateQueue=null,o=s_(r,l,o,f),r_(i),l=kd(),i!==null&&!We?(Pd(i,r,m),Dr(i,r,m)):(Jt&&l&&yd(r),r.flags|=1,ln(i,r,o,m),r.child)}function o0(i,r,o,l,f){if(da(r),r.stateNode===null){var m=ao,T=o.contextType;typeof T=="object"&&T!==null&&(m=mn(T)),m=new o(l,m),r.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Qd,r.stateNode=m,m._reactInternals=r,m=r.stateNode,m.props=l,m.state=r.memoizedState,m.refs={},xd(r),T=o.contextType,m.context=typeof T=="object"&&T!==null?mn(T):ao,m.state=r.memoizedState,T=o.getDerivedStateFromProps,typeof T=="function"&&(Kd(r,o,T,l),m.state=r.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(T=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),T!==m.state&&Qd.enqueueReplaceState(m,m.state,null),zl(r,l,m,f),Ul(),m.state=r.memoizedState),typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(i===null){m=r.stateNode;var w=r.memoizedProps,z=pa(o,w);m.props=z;var W=m.context,lt=o.contextType;T=ao,typeof lt=="object"&&lt!==null&&(T=mn(lt));var ft=o.getDerivedStateFromProps;lt=typeof ft=="function"||typeof m.getSnapshotBeforeUpdate=="function",w=r.pendingProps!==w,lt||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(w||W!==T)&&Y_(r,m,l,T),ns=!1;var nt=r.memoizedState;m.state=nt,zl(r,l,m,f),Ul(),W=r.memoizedState,w||nt!==W||ns?(typeof ft=="function"&&(Kd(r,o,ft,l),W=r.memoizedState),(z=ns||$_(r,o,z,l,nt,W,T))?(lt||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=W),m.props=l,m.state=W,m.context=T,l=z):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{m=r.stateNode,Id(i,r),T=r.memoizedProps,lt=pa(o,T),m.props=lt,ft=r.pendingProps,nt=m.context,W=o.contextType,z=ao,typeof W=="object"&&W!==null&&(z=mn(W)),w=o.getDerivedStateFromProps,(W=typeof w=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(T!==ft||nt!==z)&&Y_(r,m,l,z),ns=!1,nt=r.memoizedState,m.state=nt,zl(r,l,m,f),Ul();var st=r.memoizedState;T!==ft||nt!==st||ns||i!==null&&i.dependencies!==null&&Mc(i.dependencies)?(typeof w=="function"&&(Kd(r,o,w,l),st=r.memoizedState),(lt=ns||$_(r,o,lt,l,nt,st,z)||i!==null&&i.dependencies!==null&&Mc(i.dependencies))?(W||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(l,st,z),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(l,st,z)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||T===i.memoizedProps&&nt===i.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&nt===i.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=st),m.props=l,m.state=st,m.context=z,l=lt):(typeof m.componentDidUpdate!="function"||T===i.memoizedProps&&nt===i.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&nt===i.memoizedState||(r.flags|=1024),l=!1)}return m=l,Zc(i,r),l=(r.flags&128)!==0,m||l?(m=r.stateNode,o=l&&typeof o.getDerivedStateFromError!="function"?null:m.render(),r.flags|=1,i!==null&&l?(r.child=yo(r,i.child,null,f),r.child=yo(r,null,o,f)):ln(i,r,o,f),r.memoizedState=m.state,i=r.child):i=Dr(i,r,f),i}function l0(i,r,o,l){return Nl(),r.flags|=256,ln(i,r,o,l),r.child}var Jd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function tm(i){return{baseLanes:i,cachePool:Ky()}}function em(i,r,o){return i=i!==null?i.childLanes&~o:0,r&&(i|=fi),i}function u0(i,r,o){var l=r.pendingProps,f=!1,m=(r.flags&128)!==0,T;if((T=m)||(T=i!==null&&i.memoizedState===null?!1:(Ge.current&2)!==0),T&&(f=!0,r.flags&=-129),T=(r.flags&32)!==0,r.flags&=-33,i===null){if(Jt){if(f?as(r):os(),Jt){var w=Se,z;if(z=w){t:{for(z=w,w=Qi;z.nodeType!==8;){if(!w){w=null;break t}if(z=Ai(z.nextSibling),z===null){w=null;break t}}w=z}w!==null?(r.memoizedState={dehydrated:w,treeContext:la!==null?{id:Ar,overflow:Rr}:null,retryLane:536870912,hydrationErrors:null},z=Fn(18,null,null,0),z.stateNode=w,z.return=r,r.child=z,In=r,Se=null,z=!0):z=!1}z||ha(r)}if(w=r.memoizedState,w!==null&&(w=w.dehydrated,w!==null))return Um(w)?r.lanes=32:r.lanes=536870912,null;Nr(r)}return w=l.children,l=l.fallback,f?(os(),f=r.mode,w=Wc({mode:"hidden",children:w},f),l=oa(l,f,o,null),w.return=r,l.return=r,w.sibling=l,r.child=w,f=r.child,f.memoizedState=tm(o),f.childLanes=em(i,T,o),r.memoizedState=Jd,l):(as(r),nm(r,w))}if(z=i.memoizedState,z!==null&&(w=z.dehydrated,w!==null)){if(m)r.flags&256?(as(r),r.flags&=-257,r=im(i,r,o)):r.memoizedState!==null?(os(),r.child=i.child,r.flags|=128,r=null):(os(),f=l.fallback,w=r.mode,l=Wc({mode:"visible",children:l.children},w),f=oa(f,w,o,null),f.flags|=2,l.return=r,f.return=r,l.sibling=f,r.child=l,yo(r,i.child,null,o),l=r.child,l.memoizedState=tm(o),l.childLanes=em(i,T,o),r.memoizedState=Jd,r=f);else if(as(r),Um(w)){if(T=w.nextSibling&&w.nextSibling.dataset,T)var W=T.dgst;T=W,l=Error(s(419)),l.stack="",l.digest=T,Dl({value:l,source:null,stack:null}),r=im(i,r,o)}else if(We||Ml(i,r,o,!1),T=(o&i.childLanes)!==0,We||T){if(T=he,T!==null&&(l=o&-o,l=(l&42)!==0?1:Pi(l),l=(l&(T.suspendedLanes|o))!==0?0:l,l!==0&&l!==z.retryLane))throw z.retryLane=l,so(i,l),Kn(T,i,l),t0;w.data==="$?"||Tm(),r=im(i,r,o)}else w.data==="$?"?(r.flags|=192,r.child=i.child,r=null):(i=z.treeContext,Se=Ai(w.nextSibling),In=r,Jt=!0,ca=null,Qi=!1,i!==null&&(ui[ci++]=Ar,ui[ci++]=Rr,ui[ci++]=la,Ar=i.id,Rr=i.overflow,la=r),r=nm(r,l.children),r.flags|=4096);return r}return f?(os(),f=l.fallback,w=r.mode,z=i.child,W=z.sibling,l=br(z,{mode:"hidden",children:l.children}),l.subtreeFlags=z.subtreeFlags&65011712,W!==null?f=br(W,f):(f=oa(f,w,o,null),f.flags|=2),f.return=r,l.return=r,l.sibling=f,r.child=l,l=f,f=r.child,w=i.child.memoizedState,w===null?w=tm(o):(z=w.cachePool,z!==null?(W=Fe._currentValue,z=z.parent!==W?{parent:W,pool:W}:z):z=Ky(),w={baseLanes:w.baseLanes|o,cachePool:z}),f.memoizedState=w,f.childLanes=em(i,T,o),r.memoizedState=Jd,l):(as(r),o=i.child,i=o.sibling,o=br(o,{mode:"visible",children:l.children}),o.return=r,o.sibling=null,i!==null&&(T=r.deletions,T===null?(r.deletions=[i],r.flags|=16):T.push(i)),r.child=o,r.memoizedState=null,o)}function nm(i,r){return r=Wc({mode:"visible",children:r},i.mode),r.return=i,i.child=r}function Wc(i,r){return i=Fn(22,i,null,r),i.lanes=0,i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},i}function im(i,r,o){return yo(r,i.child,null,o),i=nm(r,r.pendingProps.children),i.flags|=2,r.memoizedState=null,i}function c0(i,r,o){i.lanes|=r;var l=i.alternate;l!==null&&(l.lanes|=r),Td(i.return,r,o)}function rm(i,r,o,l,f){var m=i.memoizedState;m===null?i.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:o,tailMode:f}:(m.isBackwards=r,m.rendering=null,m.renderingStartTime=0,m.last=l,m.tail=o,m.tailMode=f)}function h0(i,r,o){var l=r.pendingProps,f=l.revealOrder,m=l.tail;if(ln(i,r,l.children,o),l=Ge.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(i!==null&&(i.flags&128)!==0)t:for(i=r.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&c0(i,o,r);else if(i.tag===19)c0(i,o,r);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break t;for(;i.sibling===null;){if(i.return===null||i.return===r)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}l&=1}switch(rt(Ge,l),f){case"forwards":for(o=r.child,f=null;o!==null;)i=o.alternate,i!==null&&Xc(i)===null&&(f=o),o=o.sibling;o=f,o===null?(f=r.child,r.child=null):(f=o.sibling,o.sibling=null),rm(r,!1,f,o,m);break;case"backwards":for(o=null,f=r.child,r.child=null;f!==null;){if(i=f.alternate,i!==null&&Xc(i)===null){r.child=f;break}i=f.sibling,f.sibling=o,o=f,f=i}rm(r,!0,o,null,m);break;case"together":rm(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Dr(i,r,o){if(i!==null&&(r.dependencies=i.dependencies),fs|=r.lanes,(o&r.childLanes)===0)if(i!==null){if(Ml(i,r,o,!1),(o&r.childLanes)===0)return null}else return null;if(i!==null&&r.child!==i.child)throw Error(s(153));if(r.child!==null){for(i=r.child,o=br(i,i.pendingProps),r.child=o,o.return=r;i.sibling!==null;)i=i.sibling,o=o.sibling=br(i,i.pendingProps),o.return=r;o.sibling=null}return r.child}function sm(i,r){return(i.lanes&r)!==0?!0:(i=i.dependencies,!!(i!==null&&Mc(i)))}function yA(i,r,o){switch(r.tag){case 3:At(r,r.stateNode.containerInfo),es(r,Fe,i.memoizedState.cache),Nl();break;case 27:case 5:$t(r);break;case 4:At(r,r.stateNode.containerInfo);break;case 10:es(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(as(r),r.flags|=128,null):(o&r.child.childLanes)!==0?u0(i,r,o):(as(r),i=Dr(i,r,o),i!==null?i.sibling:null);as(r);break;case 19:var f=(i.flags&128)!==0;if(l=(o&r.childLanes)!==0,l||(Ml(i,r,o,!1),l=(o&r.childLanes)!==0),f){if(l)return h0(i,r,o);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),rt(Ge,Ge.current),l)break;return null;case 22:case 23:return r.lanes=0,r0(i,r,o);case 24:es(r,Fe,i.memoizedState.cache)}return Dr(i,r,o)}function f0(i,r,o){if(i!==null)if(i.memoizedProps!==r.pendingProps)We=!0;else{if(!sm(i,o)&&(r.flags&128)===0)return We=!1,yA(i,r,o);We=(i.flags&131072)!==0}else We=!1,Jt&&(r.flags&1048576)!==0&&qy(r,Dc,r.index);switch(r.lanes=0,r.tag){case 16:t:{i=r.pendingProps;var l=r.elementType,f=l._init;if(l=f(l._payload),r.type=l,typeof l=="function")md(l)?(i=pa(l,i),r.tag=1,r=o0(null,r,l,i,o)):(r.tag=0,r=Wd(null,r,l,i,o));else{if(l!=null){if(f=l.$$typeof,f===F){r.tag=11,r=e0(null,r,l,i,o);break t}else if(f===N){r.tag=14,r=n0(null,r,l,i,o);break t}}throw r=M(l)||l,Error(s(306,r,""))}}return r;case 0:return Wd(i,r,r.type,r.pendingProps,o);case 1:return l=r.type,f=pa(l,r.pendingProps),o0(i,r,l,f,o);case 3:t:{if(At(r,r.stateNode.containerInfo),i===null)throw Error(s(387));l=r.pendingProps;var m=r.memoizedState;f=m.element,Id(i,r),zl(r,l,null,o);var T=r.memoizedState;if(l=T.cache,es(r,Fe,l),l!==m.cache&&Sd(r,[Fe],o,!0),Ul(),l=T.element,m.isDehydrated)if(m={element:l,isDehydrated:!1,cache:T.cache},r.updateQueue.baseState=m,r.memoizedState=m,r.flags&256){r=l0(i,r,l,o);break t}else if(l!==f){f=oi(Error(s(424)),r),Dl(f),r=l0(i,r,l,o);break t}else{switch(i=r.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Se=Ai(i.firstChild),In=r,Jt=!0,ca=null,Qi=!0,o=F_(r,null,l,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Nl(),l===f){r=Dr(i,r,o);break t}ln(i,r,l,o)}r=r.child}return r;case 26:return Zc(i,r),i===null?(o=pv(r.type,null,r.pendingProps,null))?r.memoizedState=o:Jt||(o=r.type,i=r.pendingProps,l=fh(_t.current).createElement(o),l[Re]=r,l[Te]=i,cn(l,o,i),pe(l),r.stateNode=l):r.memoizedState=pv(r.type,i.memoizedProps,r.pendingProps,i.memoizedState),null;case 27:return $t(r),i===null&&Jt&&(l=r.stateNode=dv(r.type,r.pendingProps,_t.current),In=r,Qi=!0,f=Se,ps(r.type)?(zm=f,Se=Ai(l.firstChild)):Se=f),ln(i,r,r.pendingProps.children,o),Zc(i,r),i===null&&(r.flags|=4194304),r.child;case 5:return i===null&&Jt&&((f=l=Se)&&(l=GA(l,r.type,r.pendingProps,Qi),l!==null?(r.stateNode=l,In=r,Se=Ai(l.firstChild),Qi=!1,f=!0):f=!1),f||ha(r)),$t(r),f=r.type,m=r.pendingProps,T=i!==null?i.memoizedProps:null,l=m.children,km(f,m)?l=null:T!==null&&km(f,T)&&(r.flags|=32),r.memoizedState!==null&&(f=Vd(i,r,uA,null,null,o),ou._currentValue=f),Zc(i,r),ln(i,r,l,o),r.child;case 6:return i===null&&Jt&&((i=o=Se)&&(o=$A(o,r.pendingProps,Qi),o!==null?(r.stateNode=o,In=r,Se=null,i=!0):i=!1),i||ha(r)),null;case 13:return u0(i,r,o);case 4:return At(r,r.stateNode.containerInfo),l=r.pendingProps,i===null?r.child=yo(r,null,l,o):ln(i,r,l,o),r.child;case 11:return e0(i,r,r.type,r.pendingProps,o);case 7:return ln(i,r,r.pendingProps,o),r.child;case 8:return ln(i,r,r.pendingProps.children,o),r.child;case 12:return ln(i,r,r.pendingProps.children,o),r.child;case 10:return l=r.pendingProps,es(r,r.type,l.value),ln(i,r,l.children,o),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,da(r),f=mn(f),l=l(f),r.flags|=1,ln(i,r,l,o),r.child;case 14:return n0(i,r,r.type,r.pendingProps,o);case 15:return i0(i,r,r.type,r.pendingProps,o);case 19:return h0(i,r,o);case 31:return l=r.pendingProps,o=r.mode,l={mode:l.mode,children:l.children},i===null?(o=Wc(l,o),o.ref=r.ref,r.child=o,o.return=r,r=o):(o=br(i.child,l),o.ref=r.ref,r.child=o,o.return=r,r=o),r;case 22:return r0(i,r,o);case 24:return da(r),l=mn(Fe),i===null?(f=Ad(),f===null&&(f=he,m=wd(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=o),f=m),r.memoizedState={parent:l,cache:f},xd(r),es(r,Fe,f)):((i.lanes&o)!==0&&(Id(i,r),zl(r,null,null,o),Ul()),f=i.memoizedState,m=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),es(r,Fe,l)):(l=m.cache,es(r,Fe,l),l!==f.cache&&Sd(r,[Fe],o,!0))),ln(i,r,r.pendingProps.children,o),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Mr(i){i.flags|=4}function d0(i,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!Tv(r)){if(r=hi.current,r!==null&&((Kt&4194048)===Kt?Zi!==null:(Kt&62914560)!==Kt&&(Kt&536870912)===0||r!==Zi))throw Pl=Rd,Qy;i.flags|=8192}}function Jc(i,r){r!==null&&(i.flags|=4),i.flags&16384&&(r=i.tag!==22?vi():536870912,i.lanes|=r,To|=r)}function $l(i,r){if(!Jt)switch(i.tailMode){case"hidden":r=i.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var l=null;o!==null;)o.alternate!==null&&(l=o),o=o.sibling;l===null?r||i.tail===null?i.tail=null:i.tail.sibling=null:l.sibling=null}}function ye(i){var r=i.alternate!==null&&i.alternate.child===i.child,o=0,l=0;if(r)for(var f=i.child;f!==null;)o|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=i,f=f.sibling;else for(f=i.child;f!==null;)o|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=i,f=f.sibling;return i.subtreeFlags|=l,i.childLanes=o,r}function _A(i,r,o){var l=r.pendingProps;switch(_d(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ye(r),null;case 1:return ye(r),null;case 3:return o=r.stateNode,l=null,i!==null&&(l=i.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Ir(Fe),Zt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(Cl(r)?Mr(r):i===null||i.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Gy())),ye(r),null;case 26:return o=r.memoizedState,i===null?(Mr(r),o!==null?(ye(r),d0(r,o)):(ye(r),r.flags&=-16777217)):o?o!==i.memoizedState?(Mr(r),ye(r),d0(r,o)):(ye(r),r.flags&=-16777217):(i.memoizedProps!==l&&Mr(r),ye(r),r.flags&=-16777217),null;case 27:Ae(r),o=_t.current;var f=r.type;if(i!==null&&r.stateNode!=null)i.memoizedProps!==l&&Mr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ye(r),null}i=ht.current,Cl(r)?jy(r):(i=dv(f,l,o),r.stateNode=i,Mr(r))}return ye(r),null;case 5:if(Ae(r),o=r.type,i!==null&&r.stateNode!=null)i.memoizedProps!==l&&Mr(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ye(r),null}if(i=ht.current,Cl(r))jy(r);else{switch(f=fh(_t.current),i){case 1:i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=f.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof l.is=="string"?f.createElement("select",{is:l.is}):f.createElement("select"),l.multiple?i.multiple=!0:l.size&&(i.size=l.size);break;default:i=typeof l.is=="string"?f.createElement(o,{is:l.is}):f.createElement(o)}}i[Re]=r,i[Te]=l;t:for(f=r.child;f!==null;){if(f.tag===5||f.tag===6)i.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===r)break t;for(;f.sibling===null;){if(f.return===null||f.return===r)break t;f=f.return}f.sibling.return=f.return,f=f.sibling}r.stateNode=i;t:switch(cn(i,o,l),o){case"button":case"input":case"select":case"textarea":i=!!l.autoFocus;break t;case"img":i=!0;break t;default:i=!1}i&&Mr(r)}}return ye(r),r.flags&=-16777217,null;case 6:if(i&&r.stateNode!=null)i.memoizedProps!==l&&Mr(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(i=_t.current,Cl(r)){if(i=r.stateNode,o=r.memoizedProps,l=null,f=In,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}i[Re]=r,i=!!(i.nodeValue===o||l!==null&&l.suppressHydrationWarning===!0||av(i.nodeValue,o)),i||ha(r)}else i=fh(i).createTextNode(l),i[Re]=r,r.stateNode=i}return ye(r),null;case 13:if(l=r.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(f=Cl(r),l!==null&&l.dehydrated!==null){if(i===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Re]=r}else Nl(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ye(r),f=!1}else f=Gy(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Nr(r),r):(Nr(r),null)}if(Nr(r),(r.flags&128)!==0)return r.lanes=o,r;if(o=l!==null,i=i!==null&&i.memoizedState!==null,o){l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool);var m=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(m=l.memoizedState.cachePool.pool),m!==f&&(l.flags|=2048)}return o!==i&&o&&(r.child.flags|=8192),Jc(r,r.updateQueue),ye(r),null;case 4:return Zt(),i===null&&Nm(r.stateNode.containerInfo),ye(r),null;case 10:return Ir(r.type),ye(r),null;case 19:if(J(Ge),f=r.memoizedState,f===null)return ye(r),null;if(l=(r.flags&128)!==0,m=f.rendering,m===null)if(l)$l(f,!1);else{if(we!==0||i!==null&&(i.flags&128)!==0)for(i=r.child;i!==null;){if(m=Xc(i),m!==null){for(r.flags|=128,$l(f,!1),i=m.updateQueue,r.updateQueue=i,Jc(r,i),r.subtreeFlags=0,i=o,o=r.child;o!==null;)Hy(o,i),o=o.sibling;return rt(Ge,Ge.current&1|2),r.child}i=i.sibling}f.tail!==null&&Lt()>nh&&(r.flags|=128,l=!0,$l(f,!1),r.lanes=4194304)}else{if(!l)if(i=Xc(m),i!==null){if(r.flags|=128,l=!0,i=i.updateQueue,r.updateQueue=i,Jc(r,i),$l(f,!0),f.tail===null&&f.tailMode==="hidden"&&!m.alternate&&!Jt)return ye(r),null}else 2*Lt()-f.renderingStartTime>nh&&o!==536870912&&(r.flags|=128,l=!0,$l(f,!1),r.lanes=4194304);f.isBackwards?(m.sibling=r.child,r.child=m):(i=f.last,i!==null?i.sibling=m:r.child=m,f.last=m)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=Lt(),r.sibling=null,i=Ge.current,rt(Ge,l?i&1|2:i&1),r):(ye(r),null);case 22:case 23:return Nr(r),Md(),l=r.memoizedState!==null,i!==null?i.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(o&536870912)!==0&&(r.flags&128)===0&&(ye(r),r.subtreeFlags&6&&(r.flags|=8192)):ye(r),o=r.updateQueue,o!==null&&Jc(r,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==o&&(r.flags|=2048),i!==null&&J(ma),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),r.memoizedState.cache!==o&&(r.flags|=2048),Ir(Fe),ye(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function vA(i,r){switch(_d(r),r.tag){case 1:return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 3:return Ir(Fe),Zt(),i=r.flags,(i&65536)!==0&&(i&128)===0?(r.flags=i&-65537|128,r):null;case 26:case 27:case 5:return Ae(r),null;case 13:if(Nr(r),i=r.memoizedState,i!==null&&i.dehydrated!==null){if(r.alternate===null)throw Error(s(340));Nl()}return i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 19:return J(Ge),null;case 4:return Zt(),null;case 10:return Ir(r.type),null;case 22:case 23:return Nr(r),Md(),i!==null&&J(ma),i=r.flags,i&65536?(r.flags=i&-65537|128,r):null;case 24:return Ir(Fe),null;case 25:return null;default:return null}}function m0(i,r){switch(_d(r),r.tag){case 3:Ir(Fe),Zt();break;case 26:case 27:case 5:Ae(r);break;case 4:Zt();break;case 13:Nr(r);break;case 19:J(Ge);break;case 10:Ir(r.type);break;case 22:case 23:Nr(r),Md(),i!==null&&J(ma);break;case 24:Ir(Fe)}}function Yl(i,r){try{var o=r.updateQueue,l=o!==null?o.lastEffect:null;if(l!==null){var f=l.next;o=f;do{if((o.tag&i)===i){l=void 0;var m=o.create,T=o.inst;l=m(),T.destroy=l}o=o.next}while(o!==f)}}catch(w){ue(r,r.return,w)}}function ls(i,r,o){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var m=f.next;l=m;do{if((l.tag&i)===i){var T=l.inst,w=T.destroy;if(w!==void 0){T.destroy=void 0,f=r;var z=o,W=w;try{W()}catch(lt){ue(f,z,lt)}}}l=l.next}while(l!==m)}}catch(lt){ue(r,r.return,lt)}}function g0(i){var r=i.updateQueue;if(r!==null){var o=i.stateNode;try{n_(r,o)}catch(l){ue(i,i.return,l)}}}function p0(i,r,o){o.props=pa(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(l){ue(i,r,l)}}function Xl(i,r){try{var o=i.ref;if(o!==null){switch(i.tag){case 26:case 27:case 5:var l=i.stateNode;break;case 30:l=i.stateNode;break;default:l=i.stateNode}typeof o=="function"?i.refCleanup=o(l):o.current=l}}catch(f){ue(i,r,f)}}function Wi(i,r){var o=i.ref,l=i.refCleanup;if(o!==null)if(typeof l=="function")try{l()}catch(f){ue(i,r,f)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){ue(i,r,f)}else o.current=null}function y0(i){var r=i.type,o=i.memoizedProps,l=i.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":o.autoFocus&&l.focus();break t;case"img":o.src?l.src=o.src:o.srcSet&&(l.srcset=o.srcSet)}}catch(f){ue(i,i.return,f)}}function am(i,r,o){try{var l=i.stateNode;BA(l,i.type,o,r),l[Te]=r}catch(f){ue(i,i.return,f)}}function _0(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&ps(i.type)||i.tag===4}function om(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||_0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&ps(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function lm(i,r,o){var l=i.tag;if(l===5||l===6)i=i.stateNode,r?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(i,r):(r=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,r.appendChild(i),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=hh));else if(l!==4&&(l===27&&ps(i.type)&&(o=i.stateNode,r=null),i=i.child,i!==null))for(lm(i,r,o),i=i.sibling;i!==null;)lm(i,r,o),i=i.sibling}function th(i,r,o){var l=i.tag;if(l===5||l===6)i=i.stateNode,r?o.insertBefore(i,r):o.appendChild(i);else if(l!==4&&(l===27&&ps(i.type)&&(o=i.stateNode),i=i.child,i!==null))for(th(i,r,o),i=i.sibling;i!==null;)th(i,r,o),i=i.sibling}function v0(i){var r=i.stateNode,o=i.memoizedProps;try{for(var l=i.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);cn(r,l,o),r[Re]=i,r[Te]=o}catch(m){ue(i,i.return,m)}}var Or=!1,Ie=!1,um=!1,E0=typeof WeakSet=="function"?WeakSet:Set,Je=null;function EA(i,r){if(i=i.containerInfo,Om=_h,i=Dy(i),od(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else t:{o=(o=i.ownerDocument)&&o.defaultView||window;var l=o.getSelection&&o.getSelection();if(l&&l.rangeCount!==0){o=l.anchorNode;var f=l.anchorOffset,m=l.focusNode;l=l.focusOffset;try{o.nodeType,m.nodeType}catch{o=null;break t}var T=0,w=-1,z=-1,W=0,lt=0,ft=i,nt=null;e:for(;;){for(var st;ft!==o||f!==0&&ft.nodeType!==3||(w=T+f),ft!==m||l!==0&&ft.nodeType!==3||(z=T+l),ft.nodeType===3&&(T+=ft.nodeValue.length),(st=ft.firstChild)!==null;)nt=ft,ft=st;for(;;){if(ft===i)break e;if(nt===o&&++W===f&&(w=T),nt===m&&++lt===l&&(z=T),(st=ft.nextSibling)!==null)break;ft=nt,nt=ft.parentNode}ft=st}o=w===-1||z===-1?null:{start:w,end:z}}else o=null}o=o||{start:0,end:0}}else o=null;for(Vm={focusedElem:i,selectionRange:o},_h=!1,Je=r;Je!==null;)if(r=Je,i=r.child,(r.subtreeFlags&1024)!==0&&i!==null)i.return=r,Je=i;else for(;Je!==null;){switch(r=Je,m=r.alternate,i=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&m!==null){i=void 0,o=r,f=m.memoizedProps,m=m.memoizedState,l=o.stateNode;try{var Dt=pa(o.type,f,o.elementType===o.type);i=l.getSnapshotBeforeUpdate(Dt,m),l.__reactInternalSnapshotBeforeUpdate=i}catch(xt){ue(o,o.return,xt)}}break;case 3:if((i&1024)!==0){if(i=r.stateNode.containerInfo,o=i.nodeType,o===9)Lm(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Lm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(s(163))}if(i=r.sibling,i!==null){i.return=r.return,Je=i;break}Je=r.return}}function T0(i,r,o){var l=o.flags;switch(o.tag){case 0:case 11:case 15:us(i,o),l&4&&Yl(5,o);break;case 1:if(us(i,o),l&4)if(i=o.stateNode,r===null)try{i.componentDidMount()}catch(T){ue(o,o.return,T)}else{var f=pa(o.type,r.memoizedProps);r=r.memoizedState;try{i.componentDidUpdate(f,r,i.__reactInternalSnapshotBeforeUpdate)}catch(T){ue(o,o.return,T)}}l&64&&g0(o),l&512&&Xl(o,o.return);break;case 3:if(us(i,o),l&64&&(i=o.updateQueue,i!==null)){if(r=null,o.child!==null)switch(o.child.tag){case 27:case 5:r=o.child.stateNode;break;case 1:r=o.child.stateNode}try{n_(i,r)}catch(T){ue(o,o.return,T)}}break;case 27:r===null&&l&4&&v0(o);case 26:case 5:us(i,o),r===null&&l&4&&y0(o),l&512&&Xl(o,o.return);break;case 12:us(i,o);break;case 13:us(i,o),l&4&&b0(i,o),l&64&&(i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(o=CA.bind(null,o),YA(i,o))));break;case 22:if(l=o.memoizedState!==null||Or,!l){r=r!==null&&r.memoizedState!==null||Ie,f=Or;var m=Ie;Or=l,(Ie=r)&&!m?cs(i,o,(o.subtreeFlags&8772)!==0):us(i,o),Or=f,Ie=m}break;case 30:break;default:us(i,o)}}function S0(i){var r=i.alternate;r!==null&&(i.alternate=null,S0(r)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(r=i.stateNode,r!==null&&zi(r)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var me=null,On=!1;function Vr(i,r,o){for(o=o.child;o!==null;)w0(i,r,o),o=o.sibling}function w0(i,r,o){if(Bt&&typeof Bt.onCommitFiberUnmount=="function")try{Bt.onCommitFiberUnmount(te,o)}catch{}switch(o.tag){case 26:Ie||Wi(o,r),Vr(i,r,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ie||Wi(o,r);var l=me,f=On;ps(o.type)&&(me=o.stateNode,On=!1),Vr(i,r,o),iu(o.stateNode),me=l,On=f;break;case 5:Ie||Wi(o,r);case 6:if(l=me,f=On,me=null,Vr(i,r,o),me=l,On=f,me!==null)if(On)try{(me.nodeType===9?me.body:me.nodeName==="HTML"?me.ownerDocument.body:me).removeChild(o.stateNode)}catch(m){ue(o,r,m)}else try{me.removeChild(o.stateNode)}catch(m){ue(o,r,m)}break;case 18:me!==null&&(On?(i=me,hv(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,o.stateNode),hu(i)):hv(me,o.stateNode));break;case 4:l=me,f=On,me=o.stateNode.containerInfo,On=!0,Vr(i,r,o),me=l,On=f;break;case 0:case 11:case 14:case 15:Ie||ls(2,o,r),Ie||ls(4,o,r),Vr(i,r,o);break;case 1:Ie||(Wi(o,r),l=o.stateNode,typeof l.componentWillUnmount=="function"&&p0(o,r,l)),Vr(i,r,o);break;case 21:Vr(i,r,o);break;case 22:Ie=(l=Ie)||o.memoizedState!==null,Vr(i,r,o),Ie=l;break;default:Vr(i,r,o)}}function b0(i,r){if(r.memoizedState===null&&(i=r.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{hu(i)}catch(o){ue(r,r.return,o)}}function TA(i){switch(i.tag){case 13:case 19:var r=i.stateNode;return r===null&&(r=i.stateNode=new E0),r;case 22:return i=i.stateNode,r=i._retryCache,r===null&&(r=i._retryCache=new E0),r;default:throw Error(s(435,i.tag))}}function cm(i,r){var o=TA(i);r.forEach(function(l){var f=NA.bind(null,i,l);o.has(l)||(o.add(l),l.then(f,f))})}function Gn(i,r){var o=r.deletions;if(o!==null)for(var l=0;l<o.length;l++){var f=o[l],m=i,T=r,w=T;t:for(;w!==null;){switch(w.tag){case 27:if(ps(w.type)){me=w.stateNode,On=!1;break t}break;case 5:me=w.stateNode,On=!1;break t;case 3:case 4:me=w.stateNode.containerInfo,On=!0;break t}w=w.return}if(me===null)throw Error(s(160));w0(m,T,f),me=null,On=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)A0(r,i),r=r.sibling}var bi=null;function A0(i,r){var o=i.alternate,l=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Gn(r,i),$n(i),l&4&&(ls(3,i,i.return),Yl(3,i),ls(5,i,i.return));break;case 1:Gn(r,i),$n(i),l&512&&(Ie||o===null||Wi(o,o.return)),l&64&&Or&&(i=i.updateQueue,i!==null&&(l=i.callbacks,l!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?l:o.concat(l))));break;case 26:var f=bi;if(Gn(r,i),$n(i),l&512&&(Ie||o===null||Wi(o,o.return)),l&4){var m=o!==null?o.memoizedState:null;if(l=i.memoizedState,o===null)if(l===null)if(i.stateNode===null){t:{l=i.type,o=i.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":m=f.getElementsByTagName("title")[0],(!m||m[gr]||m[Re]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(l),f.head.insertBefore(m,f.querySelector("head > title"))),cn(m,l,o),m[Re]=i,pe(m),l=m;break t;case"link":var T=vv("link","href",f).get(l+(o.href||""));if(T){for(var w=0;w<T.length;w++)if(m=T[w],m.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&m.getAttribute("rel")===(o.rel==null?null:o.rel)&&m.getAttribute("title")===(o.title==null?null:o.title)&&m.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){T.splice(w,1);break e}}m=f.createElement(l),cn(m,l,o),f.head.appendChild(m);break;case"meta":if(T=vv("meta","content",f).get(l+(o.content||""))){for(w=0;w<T.length;w++)if(m=T[w],m.getAttribute("content")===(o.content==null?null:""+o.content)&&m.getAttribute("name")===(o.name==null?null:o.name)&&m.getAttribute("property")===(o.property==null?null:o.property)&&m.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&m.getAttribute("charset")===(o.charSet==null?null:o.charSet)){T.splice(w,1);break e}}m=f.createElement(l),cn(m,l,o),f.head.appendChild(m);break;default:throw Error(s(468,l))}m[Re]=i,pe(m),l=m}i.stateNode=l}else Ev(f,i.type,i.stateNode);else i.stateNode=_v(f,l,i.memoizedProps);else m!==l?(m===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):m.count--,l===null?Ev(f,i.type,i.stateNode):_v(f,l,i.memoizedProps)):l===null&&i.stateNode!==null&&am(i,i.memoizedProps,o.memoizedProps)}break;case 27:Gn(r,i),$n(i),l&512&&(Ie||o===null||Wi(o,o.return)),o!==null&&l&4&&am(i,i.memoizedProps,o.memoizedProps);break;case 5:if(Gn(r,i),$n(i),l&512&&(Ie||o===null||Wi(o,o.return)),i.flags&32){f=i.stateNode;try{ii(f,"")}catch(st){ue(i,i.return,st)}}l&4&&i.stateNode!=null&&(f=i.memoizedProps,am(i,f,o!==null?o.memoizedProps:f)),l&1024&&(um=!0);break;case 6:if(Gn(r,i),$n(i),l&4){if(i.stateNode===null)throw Error(s(162));l=i.memoizedProps,o=i.stateNode;try{o.nodeValue=l}catch(st){ue(i,i.return,st)}}break;case 3:if(gh=null,f=bi,bi=dh(r.containerInfo),Gn(r,i),bi=f,$n(i),l&4&&o!==null&&o.memoizedState.isDehydrated)try{hu(r.containerInfo)}catch(st){ue(i,i.return,st)}um&&(um=!1,R0(i));break;case 4:l=bi,bi=dh(i.stateNode.containerInfo),Gn(r,i),$n(i),bi=l;break;case 12:Gn(r,i),$n(i);break;case 13:Gn(r,i),$n(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(pm=Lt()),l&4&&(l=i.updateQueue,l!==null&&(i.updateQueue=null,cm(i,l)));break;case 22:f=i.memoizedState!==null;var z=o!==null&&o.memoizedState!==null,W=Or,lt=Ie;if(Or=W||f,Ie=lt||z,Gn(r,i),Ie=lt,Or=W,$n(i),l&8192)t:for(r=i.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(o===null||z||Or||Ie||ya(i)),o=null,r=i;;){if(r.tag===5||r.tag===26){if(o===null){z=o=r;try{if(m=z.stateNode,f)T=m.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{w=z.stateNode;var ft=z.memoizedProps.style,nt=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;w.style.display=nt==null||typeof nt=="boolean"?"":(""+nt).trim()}}catch(st){ue(z,z.return,st)}}}else if(r.tag===6){if(o===null){z=r;try{z.stateNode.nodeValue=f?"":z.memoizedProps}catch(st){ue(z,z.return,st)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===i)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break t;for(;r.sibling===null;){if(r.return===null||r.return===i)break t;o===r&&(o=null),r=r.return}o===r&&(o=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=i.updateQueue,l!==null&&(o=l.retryQueue,o!==null&&(l.retryQueue=null,cm(i,o))));break;case 19:Gn(r,i),$n(i),l&4&&(l=i.updateQueue,l!==null&&(i.updateQueue=null,cm(i,l)));break;case 30:break;case 21:break;default:Gn(r,i),$n(i)}}function $n(i){var r=i.flags;if(r&2){try{for(var o,l=i.return;l!==null;){if(_0(l)){o=l;break}l=l.return}if(o==null)throw Error(s(160));switch(o.tag){case 27:var f=o.stateNode,m=om(i);th(i,m,f);break;case 5:var T=o.stateNode;o.flags&32&&(ii(T,""),o.flags&=-33);var w=om(i);th(i,w,T);break;case 3:case 4:var z=o.stateNode.containerInfo,W=om(i);lm(i,W,z);break;default:throw Error(s(161))}}catch(lt){ue(i,i.return,lt)}i.flags&=-3}r&4096&&(i.flags&=-4097)}function R0(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var r=i;R0(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),i=i.sibling}}function us(i,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)T0(i,r.alternate,r),r=r.sibling}function ya(i){for(i=i.child;i!==null;){var r=i;switch(r.tag){case 0:case 11:case 14:case 15:ls(4,r,r.return),ya(r);break;case 1:Wi(r,r.return);var o=r.stateNode;typeof o.componentWillUnmount=="function"&&p0(r,r.return,o),ya(r);break;case 27:iu(r.stateNode);case 26:case 5:Wi(r,r.return),ya(r);break;case 22:r.memoizedState===null&&ya(r);break;case 30:ya(r);break;default:ya(r)}i=i.sibling}}function cs(i,r,o){for(o=o&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=i,m=r,T=m.flags;switch(m.tag){case 0:case 11:case 15:cs(f,m,o),Yl(4,m);break;case 1:if(cs(f,m,o),l=m,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(W){ue(l,l.return,W)}if(l=m,f=l.updateQueue,f!==null){var w=l.stateNode;try{var z=f.shared.hiddenCallbacks;if(z!==null)for(f.shared.hiddenCallbacks=null,f=0;f<z.length;f++)e_(z[f],w)}catch(W){ue(l,l.return,W)}}o&&T&64&&g0(m),Xl(m,m.return);break;case 27:v0(m);case 26:case 5:cs(f,m,o),o&&l===null&&T&4&&y0(m),Xl(m,m.return);break;case 12:cs(f,m,o);break;case 13:cs(f,m,o),o&&T&4&&b0(f,m);break;case 22:m.memoizedState===null&&cs(f,m,o),Xl(m,m.return);break;case 30:break;default:cs(f,m,o)}r=r.sibling}}function hm(i,r){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(i=r.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&Ol(o))}function fm(i,r){i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Ol(i))}function Ji(i,r,o,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)x0(i,r,o,l),r=r.sibling}function x0(i,r,o,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Ji(i,r,o,l),f&2048&&Yl(9,r);break;case 1:Ji(i,r,o,l);break;case 3:Ji(i,r,o,l),f&2048&&(i=null,r.alternate!==null&&(i=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==i&&(r.refCount++,i!=null&&Ol(i)));break;case 12:if(f&2048){Ji(i,r,o,l),i=r.stateNode;try{var m=r.memoizedProps,T=m.id,w=m.onPostCommit;typeof w=="function"&&w(T,r.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(z){ue(r,r.return,z)}}else Ji(i,r,o,l);break;case 13:Ji(i,r,o,l);break;case 23:break;case 22:m=r.stateNode,T=r.alternate,r.memoizedState!==null?m._visibility&2?Ji(i,r,o,l):Kl(i,r):m._visibility&2?Ji(i,r,o,l):(m._visibility|=2,_o(i,r,o,l,(r.subtreeFlags&10256)!==0)),f&2048&&hm(T,r);break;case 24:Ji(i,r,o,l),f&2048&&fm(r.alternate,r);break;default:Ji(i,r,o,l)}}function _o(i,r,o,l,f){for(f=f&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var m=i,T=r,w=o,z=l,W=T.flags;switch(T.tag){case 0:case 11:case 15:_o(m,T,w,z,f),Yl(8,T);break;case 23:break;case 22:var lt=T.stateNode;T.memoizedState!==null?lt._visibility&2?_o(m,T,w,z,f):Kl(m,T):(lt._visibility|=2,_o(m,T,w,z,f)),f&&W&2048&&hm(T.alternate,T);break;case 24:_o(m,T,w,z,f),f&&W&2048&&fm(T.alternate,T);break;default:_o(m,T,w,z,f)}r=r.sibling}}function Kl(i,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var o=i,l=r,f=l.flags;switch(l.tag){case 22:Kl(o,l),f&2048&&hm(l.alternate,l);break;case 24:Kl(o,l),f&2048&&fm(l.alternate,l);break;default:Kl(o,l)}r=r.sibling}}var Ql=8192;function vo(i){if(i.subtreeFlags&Ql)for(i=i.child;i!==null;)I0(i),i=i.sibling}function I0(i){switch(i.tag){case 26:vo(i),i.flags&Ql&&i.memoizedState!==null&&aR(bi,i.memoizedState,i.memoizedProps);break;case 5:vo(i);break;case 3:case 4:var r=bi;bi=dh(i.stateNode.containerInfo),vo(i),bi=r;break;case 22:i.memoizedState===null&&(r=i.alternate,r!==null&&r.memoizedState!==null?(r=Ql,Ql=16777216,vo(i),Ql=r):vo(i));break;default:vo(i)}}function C0(i){var r=i.alternate;if(r!==null&&(i=r.child,i!==null)){r.child=null;do r=i.sibling,i.sibling=null,i=r;while(i!==null)}}function Zl(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var l=r[o];Je=l,D0(l,i)}C0(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)N0(i),i=i.sibling}function N0(i){switch(i.tag){case 0:case 11:case 15:Zl(i),i.flags&2048&&ls(9,i,i.return);break;case 3:Zl(i);break;case 12:Zl(i);break;case 22:var r=i.stateNode;i.memoizedState!==null&&r._visibility&2&&(i.return===null||i.return.tag!==13)?(r._visibility&=-3,eh(i)):Zl(i);break;default:Zl(i)}}function eh(i){var r=i.deletions;if((i.flags&16)!==0){if(r!==null)for(var o=0;o<r.length;o++){var l=r[o];Je=l,D0(l,i)}C0(i)}for(i=i.child;i!==null;){switch(r=i,r.tag){case 0:case 11:case 15:ls(8,r,r.return),eh(r);break;case 22:o=r.stateNode,o._visibility&2&&(o._visibility&=-3,eh(r));break;default:eh(r)}i=i.sibling}}function D0(i,r){for(;Je!==null;){var o=Je;switch(o.tag){case 0:case 11:case 15:ls(8,o,r);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var l=o.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Ol(o.memoizedState.cache)}if(l=o.child,l!==null)l.return=o,Je=l;else t:for(o=i;Je!==null;){l=Je;var f=l.sibling,m=l.return;if(S0(l),l===o){Je=null;break t}if(f!==null){f.return=m,Je=f;break t}Je=m}}}var SA={getCacheForType:function(i){var r=mn(Fe),o=r.data.get(i);return o===void 0&&(o=i(),r.data.set(i,o)),o}},wA=typeof WeakMap=="function"?WeakMap:Map,ie=0,he=null,Ht=null,Kt=0,re=0,Yn=null,hs=!1,Eo=!1,dm=!1,kr=0,we=0,fs=0,_a=0,mm=0,fi=0,To=0,Wl=null,Vn=null,gm=!1,pm=0,nh=1/0,ih=null,ds=null,un=0,ms=null,So=null,wo=0,ym=0,_m=null,M0=null,Jl=0,vm=null;function Xn(){if((ie&2)!==0&&Kt!==0)return Kt&-Kt;if(V.T!==null){var i=uo;return i!==0?i:Rm()}return Li()}function O0(){fi===0&&(fi=(Kt&536870912)===0||Jt?mr():536870912);var i=hi.current;return i!==null&&(i.flags|=32),fi}function Kn(i,r,o){(i===he&&(re===2||re===9)||i.cancelPendingCommit!==null)&&(bo(i,0),gs(i,Kt,fi,!1)),Zn(i,o),((ie&2)===0||i!==he)&&(i===he&&((ie&2)===0&&(_a|=o),we===4&&gs(i,Kt,fi,!1)),tr(i))}function V0(i,r,o){if((ie&6)!==0)throw Error(s(327));var l=!o&&(r&124)===0&&(r&i.expiredLanes)===0||An(i,r),f=l?RA(i,r):Sm(i,r,!0),m=l;do{if(f===0){Eo&&!l&&gs(i,r,0,!1);break}else{if(o=i.current.alternate,m&&!bA(o)){f=Sm(i,r,!1),m=!1;continue}if(f===2){if(m=r,i.errorRecoveryDisabledLanes&m)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){r=T;t:{var w=i;f=Wl;var z=w.current.memoizedState.isDehydrated;if(z&&(bo(w,T).flags|=256),T=Sm(w,T,!1),T!==2){if(dm&&!z){w.errorRecoveryDisabledLanes|=m,_a|=m,f=4;break t}m=Vn,Vn=f,m!==null&&(Vn===null?Vn=m:Vn.push.apply(Vn,m))}f=T}if(m=!1,f!==2)continue}}if(f===1){bo(i,0),gs(i,r,0,!0);break}t:{switch(l=i,m=f,m){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:gs(l,r,fi,!hs);break t;case 2:Vn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(f=pm+300-Lt(),10<f)){if(gs(l,r,fi,!hs),sn(l,0,!0)!==0)break t;l.timeoutHandle=uv(k0.bind(null,l,o,Vn,ih,gm,r,fi,_a,To,hs,m,2,-0,0),f);break t}k0(l,o,Vn,ih,gm,r,fi,_a,To,hs,m,0,-0,0)}}break}while(!0);tr(i)}function k0(i,r,o,l,f,m,T,w,z,W,lt,ft,nt,st){if(i.timeoutHandle=-1,ft=r.subtreeFlags,(ft&8192||(ft&16785408)===16785408)&&(au={stylesheets:null,count:0,unsuspend:sR},I0(r),ft=oR(),ft!==null)){i.cancelPendingCommit=ft(q0.bind(null,i,r,m,o,l,f,T,w,z,lt,1,nt,st)),gs(i,m,T,!W);return}q0(i,r,m,o,l,f,T,w,z)}function bA(i){for(var r=i;;){var o=r.tag;if((o===0||o===11||o===15)&&r.flags&16384&&(o=r.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var l=0;l<o.length;l++){var f=o[l],m=f.getSnapshot;f=f.value;try{if(!jn(m(),f))return!1}catch{return!1}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===i)break;for(;r.sibling===null;){if(r.return===null||r.return===i)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function gs(i,r,o,l){r&=~mm,r&=~_a,i.suspendedLanes|=r,i.pingedLanes&=~r,l&&(i.warmLanes|=r),l=i.expirationTimes;for(var f=r;0<f;){var m=31-ge(f),T=1<<m;l[m]=-1,f&=~T}o!==0&&Wn(i,o,r)}function rh(){return(ie&6)===0?(tu(0),!1):!0}function Em(){if(Ht!==null){if(re===0)var i=Ht.return;else i=Ht,xr=fa=null,Ld(i),po=null,Fl=0,i=Ht;for(;i!==null;)m0(i.alternate,i),i=i.return;Ht=null}}function bo(i,r){var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,qA(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),Em(),he=i,Ht=o=br(i.current,null),Kt=r,re=0,Yn=null,hs=!1,Eo=An(i,r),dm=!1,To=fi=mm=_a=fs=we=0,Vn=Wl=null,gm=!1,(r&8)!==0&&(r|=r&32);var l=i.entangledLanes;if(l!==0)for(i=i.entanglements,l&=r;0<l;){var f=31-ge(l),m=1<<f;r|=i[f],l&=~m}return kr=r,Rc(),o}function P0(i,r){Pt=null,V.H=Gc,r===kl||r===kc?(r=Jy(),re=3):r===Qy?(r=Jy(),re=4):re=r===t0?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Yn=r,Ht===null&&(we=1,Qc(i,oi(r,i.current)))}function L0(){var i=V.H;return V.H=Gc,i===null?Gc:i}function U0(){var i=V.A;return V.A=SA,i}function Tm(){we=4,hs||(Kt&4194048)!==Kt&&hi.current!==null||(Eo=!0),(fs&134217727)===0&&(_a&134217727)===0||he===null||gs(he,Kt,fi,!1)}function Sm(i,r,o){var l=ie;ie|=2;var f=L0(),m=U0();(he!==i||Kt!==r)&&(ih=null,bo(i,r)),r=!1;var T=we;t:do try{if(re!==0&&Ht!==null){var w=Ht,z=Yn;switch(re){case 8:Em(),T=6;break t;case 3:case 2:case 9:case 6:hi.current===null&&(r=!0);var W=re;if(re=0,Yn=null,Ao(i,w,z,W),o&&Eo){T=0;break t}break;default:W=re,re=0,Yn=null,Ao(i,w,z,W)}}AA(),T=we;break}catch(lt){P0(i,lt)}while(!0);return r&&i.shellSuspendCounter++,xr=fa=null,ie=l,V.H=f,V.A=m,Ht===null&&(he=null,Kt=0,Rc()),T}function AA(){for(;Ht!==null;)z0(Ht)}function RA(i,r){var o=ie;ie|=2;var l=L0(),f=U0();he!==i||Kt!==r?(ih=null,nh=Lt()+500,bo(i,r)):Eo=An(i,r);t:do try{if(re!==0&&Ht!==null){r=Ht;var m=Yn;e:switch(re){case 1:re=0,Yn=null,Ao(i,r,m,1);break;case 2:case 9:if(Zy(m)){re=0,Yn=null,B0(r);break}r=function(){re!==2&&re!==9||he!==i||(re=7),tr(i)},m.then(r,r);break t;case 3:re=7;break t;case 4:re=5;break t;case 7:Zy(m)?(re=0,Yn=null,B0(r)):(re=0,Yn=null,Ao(i,r,m,7));break;case 5:var T=null;switch(Ht.tag){case 26:T=Ht.memoizedState;case 5:case 27:var w=Ht;if(!T||Tv(T)){re=0,Yn=null;var z=w.sibling;if(z!==null)Ht=z;else{var W=w.return;W!==null?(Ht=W,sh(W)):Ht=null}break e}}re=0,Yn=null,Ao(i,r,m,5);break;case 6:re=0,Yn=null,Ao(i,r,m,6);break;case 8:Em(),we=6;break t;default:throw Error(s(462))}}xA();break}catch(lt){P0(i,lt)}while(!0);return xr=fa=null,V.H=l,V.A=f,ie=o,Ht!==null?0:(he=null,Kt=0,Rc(),we)}function xA(){for(;Ht!==null&&!fe();)z0(Ht)}function z0(i){var r=f0(i.alternate,i,kr);i.memoizedProps=i.pendingProps,r===null?sh(i):Ht=r}function B0(i){var r=i,o=r.alternate;switch(r.tag){case 15:case 0:r=a0(o,r,r.pendingProps,r.type,void 0,Kt);break;case 11:r=a0(o,r,r.pendingProps,r.type.render,r.ref,Kt);break;case 5:Ld(r);default:m0(o,r),r=Ht=Hy(r,kr),r=f0(o,r,kr)}i.memoizedProps=i.pendingProps,r===null?sh(i):Ht=r}function Ao(i,r,o,l){xr=fa=null,Ld(r),po=null,Fl=0;var f=r.return;try{if(pA(i,f,r,o,Kt)){we=1,Qc(i,oi(o,i.current)),Ht=null;return}}catch(m){if(f!==null)throw Ht=f,m;we=1,Qc(i,oi(o,i.current)),Ht=null;return}r.flags&32768?(Jt||l===1?i=!0:Eo||(Kt&536870912)!==0?i=!1:(hs=i=!0,(l===2||l===9||l===3||l===6)&&(l=hi.current,l!==null&&l.tag===13&&(l.flags|=16384))),H0(r,i)):sh(r)}function sh(i){var r=i;do{if((r.flags&32768)!==0){H0(r,hs);return}i=r.return;var o=_A(r.alternate,r,kr);if(o!==null){Ht=o;return}if(r=r.sibling,r!==null){Ht=r;return}Ht=r=i}while(r!==null);we===0&&(we=5)}function H0(i,r){do{var o=vA(i.alternate,i);if(o!==null){o.flags&=32767,Ht=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!r&&(i=i.sibling,i!==null)){Ht=i;return}Ht=i=o}while(i!==null);we=6,Ht=null}function q0(i,r,o,l,f,m,T,w,z){i.cancelPendingCommit=null;do ah();while(un!==0);if((ie&6)!==0)throw Error(s(327));if(r!==null){if(r===i.current)throw Error(s(177));if(m=r.lanes|r.childLanes,m|=fd,Bn(i,o,m,T,w,z),i===he&&(Ht=he=null,Kt=0),So=r,ms=i,wo=o,ym=m,_m=f,M0=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,DA(Ln,function(){return Y0(),null})):(i.callbackNode=null,i.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=V.T,V.T=null,f=G.p,G.p=2,T=ie,ie|=4;try{EA(i,r,o)}finally{ie=T,G.p=f,V.T=l}}un=1,j0(),F0(),G0()}}function j0(){if(un===1){un=0;var i=ms,r=So,o=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||o){o=V.T,V.T=null;var l=G.p;G.p=2;var f=ie;ie|=4;try{A0(r,i);var m=Vm,T=Dy(i.containerInfo),w=m.focusedElem,z=m.selectionRange;if(T!==w&&w&&w.ownerDocument&&Ny(w.ownerDocument.documentElement,w)){if(z!==null&&od(w)){var W=z.start,lt=z.end;if(lt===void 0&&(lt=W),"selectionStart"in w)w.selectionStart=W,w.selectionEnd=Math.min(lt,w.value.length);else{var ft=w.ownerDocument||document,nt=ft&&ft.defaultView||window;if(nt.getSelection){var st=nt.getSelection(),Dt=w.textContent.length,xt=Math.min(z.start,Dt),le=z.end===void 0?xt:Math.min(z.end,Dt);!st.extend&&xt>le&&(T=le,le=xt,xt=T);var $=Cy(w,xt),H=Cy(w,le);if($&&H&&(st.rangeCount!==1||st.anchorNode!==$.node||st.anchorOffset!==$.offset||st.focusNode!==H.node||st.focusOffset!==H.offset)){var Q=ft.createRange();Q.setStart($.node,$.offset),st.removeAllRanges(),xt>le?(st.addRange(Q),st.extend(H.node,H.offset)):(Q.setEnd(H.node,H.offset),st.addRange(Q))}}}}for(ft=[],st=w;st=st.parentNode;)st.nodeType===1&&ft.push({element:st,left:st.scrollLeft,top:st.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<ft.length;w++){var ct=ft[w];ct.element.scrollLeft=ct.left,ct.element.scrollTop=ct.top}}_h=!!Om,Vm=Om=null}finally{ie=f,G.p=l,V.T=o}}i.current=r,un=2}}function F0(){if(un===2){un=0;var i=ms,r=So,o=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||o){o=V.T,V.T=null;var l=G.p;G.p=2;var f=ie;ie|=4;try{T0(i,r.alternate,r)}finally{ie=f,G.p=l,V.T=o}}un=3}}function G0(){if(un===4||un===3){un=0,Tn();var i=ms,r=So,o=wo,l=M0;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?un=5:(un=0,So=ms=null,$0(i,i.pendingLanes));var f=i.pendingLanes;if(f===0&&(ds=null),Qr(o),r=r.stateNode,Bt&&typeof Bt.onCommitFiberRoot=="function")try{Bt.onCommitFiberRoot(te,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=V.T,f=G.p,G.p=2,V.T=null;try{for(var m=i.onRecoverableError,T=0;T<l.length;T++){var w=l[T];m(w.value,{componentStack:w.stack})}}finally{V.T=r,G.p=f}}(wo&3)!==0&&ah(),tr(i),f=i.pendingLanes,(o&4194090)!==0&&(f&42)!==0?i===vm?Jl++:(Jl=0,vm=i):Jl=0,tu(0)}}function $0(i,r){(i.pooledCacheLanes&=r)===0&&(r=i.pooledCache,r!=null&&(i.pooledCache=null,Ol(r)))}function ah(i){return j0(),F0(),G0(),Y0()}function Y0(){if(un!==5)return!1;var i=ms,r=ym;ym=0;var o=Qr(wo),l=V.T,f=G.p;try{G.p=32>o?32:o,V.T=null,o=_m,_m=null;var m=ms,T=wo;if(un=0,So=ms=null,wo=0,(ie&6)!==0)throw Error(s(331));var w=ie;if(ie|=4,N0(m.current),x0(m,m.current,T,o),ie=w,tu(0,!1),Bt&&typeof Bt.onPostCommitFiberRoot=="function")try{Bt.onPostCommitFiberRoot(te,m)}catch{}return!0}finally{G.p=f,V.T=l,$0(i,r)}}function X0(i,r,o){r=oi(o,r),r=Zd(i.stateNode,r,2),i=rs(i,r,2),i!==null&&(Zn(i,2),tr(i))}function ue(i,r,o){if(i.tag===3)X0(i,i,o);else for(;r!==null;){if(r.tag===3){X0(r,i,o);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ds===null||!ds.has(l))){i=oi(o,i),o=W_(2),l=rs(r,o,2),l!==null&&(J_(o,l,r,i),Zn(l,2),tr(l));break}}r=r.return}}function wm(i,r,o){var l=i.pingCache;if(l===null){l=i.pingCache=new wA;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(o)||(dm=!0,f.add(o),i=IA.bind(null,i,r,o),r.then(i,i))}function IA(i,r,o){var l=i.pingCache;l!==null&&l.delete(r),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,he===i&&(Kt&o)===o&&(we===4||we===3&&(Kt&62914560)===Kt&&300>Lt()-pm?(ie&2)===0&&bo(i,0):mm|=o,To===Kt&&(To=0)),tr(i)}function K0(i,r){r===0&&(r=vi()),i=so(i,r),i!==null&&(Zn(i,r),tr(i))}function CA(i){var r=i.memoizedState,o=0;r!==null&&(o=r.retryLane),K0(i,o)}function NA(i,r){var o=0;switch(i.tag){case 13:var l=i.stateNode,f=i.memoizedState;f!==null&&(o=f.retryLane);break;case 19:l=i.stateNode;break;case 22:l=i.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),K0(i,o)}function DA(i,r){return ze(i,r)}var oh=null,Ro=null,bm=!1,lh=!1,Am=!1,va=0;function tr(i){i!==Ro&&i.next===null&&(Ro===null?oh=Ro=i:Ro=Ro.next=i),lh=!0,bm||(bm=!0,OA())}function tu(i,r){if(!Am&&lh){Am=!0;do for(var o=!1,l=oh;l!==null;){if(i!==0){var f=l.pendingLanes;if(f===0)var m=0;else{var T=l.suspendedLanes,w=l.pingedLanes;m=(1<<31-ge(42|i)+1)-1,m&=f&~(T&~w),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(o=!0,J0(l,m))}else m=Kt,m=sn(l,l===he?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(m&3)===0||An(l,m)||(o=!0,J0(l,m));l=l.next}while(o);Am=!1}}function MA(){Q0()}function Q0(){lh=bm=!1;var i=0;va!==0&&(HA()&&(i=va),va=0);for(var r=Lt(),o=null,l=oh;l!==null;){var f=l.next,m=Z0(l,r);m===0?(l.next=null,o===null?oh=f:o.next=f,f===null&&(Ro=o)):(o=l,(i!==0||(m&3)!==0)&&(lh=!0)),l=f}tu(i)}function Z0(i,r){for(var o=i.suspendedLanes,l=i.pingedLanes,f=i.expirationTimes,m=i.pendingLanes&-62914561;0<m;){var T=31-ge(m),w=1<<T,z=f[T];z===-1?((w&o)===0||(w&l)!==0)&&(f[T]=dr(w,r)):z<=r&&(i.expiredLanes|=w),m&=~w}if(r=he,o=Kt,o=sn(i,i===r?o:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),l=i.callbackNode,o===0||i===r&&(re===2||re===9)||i.cancelPendingCommit!==null)return l!==null&&l!==null&&De(l),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||An(i,o)){if(r=o&-o,r===i.callbackPriority)return r;switch(l!==null&&De(l),Qr(o)){case 2:case 8:o=Nn;break;case 32:o=Ln;break;case 268435456:o=Un;break;default:o=Ln}return l=W0.bind(null,i),o=ze(o,l),i.callbackPriority=r,i.callbackNode=o,r}return l!==null&&l!==null&&De(l),i.callbackPriority=2,i.callbackNode=null,2}function W0(i,r){if(un!==0&&un!==5)return i.callbackNode=null,i.callbackPriority=0,null;var o=i.callbackNode;if(ah()&&i.callbackNode!==o)return null;var l=Kt;return l=sn(i,i===he?l:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),l===0?null:(V0(i,l,r),Z0(i,Lt()),i.callbackNode!=null&&i.callbackNode===o?W0.bind(null,i):null)}function J0(i,r){if(ah())return null;V0(i,r,!0)}function OA(){jA(function(){(ie&6)!==0?ze(Be,MA):Q0()})}function Rm(){return va===0&&(va=mr()),va}function tv(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Ya(""+i)}function ev(i,r){var o=r.ownerDocument.createElement("input");return o.name=r.name,o.value=r.value,i.id&&o.setAttribute("form",i.id),r.parentNode.insertBefore(o,r),i=new FormData(i),o.parentNode.removeChild(o),i}function VA(i,r,o,l,f){if(r==="submit"&&o&&o.stateNode===f){var m=tv((f[Te]||null).action),T=l.submitter;T&&(r=(r=T[Te]||null)?tv(r.formAction):T.getAttribute("formAction"),r!==null&&(m=r,T=null));var w=new Xa("action","action",null,l,f);i.push({event:w,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(va!==0){var z=T?ev(f,T):new FormData(f);$d(o,{pending:!0,data:z,method:f.method,action:m},null,z)}}else typeof m=="function"&&(w.preventDefault(),z=T?ev(f,T):new FormData(f),$d(o,{pending:!0,data:z,method:f.method,action:m},m,z))},currentTarget:f}]})}}for(var xm=0;xm<hd.length;xm++){var Im=hd[xm],kA=Im.toLowerCase(),PA=Im[0].toUpperCase()+Im.slice(1);wi(kA,"on"+PA)}wi(Vy,"onAnimationEnd"),wi(ky,"onAnimationIteration"),wi(Py,"onAnimationStart"),wi("dblclick","onDoubleClick"),wi("focusin","onFocus"),wi("focusout","onBlur"),wi(Jb,"onTransitionRun"),wi(tA,"onTransitionStart"),wi(eA,"onTransitionCancel"),wi(Ly,"onTransitionEnd"),Ei("onMouseEnter",["mouseout","mouseover"]),Ei("onMouseLeave",["mouseout","mouseover"]),Ei("onPointerEnter",["pointerout","pointerover"]),Ei("onPointerLeave",["pointerout","pointerover"]),Hn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Hn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Hn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Hn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Hn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),LA=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(eu));function nv(i,r){r=(r&4)!==0;for(var o=0;o<i.length;o++){var l=i[o],f=l.event;l=l.listeners;t:{var m=void 0;if(r)for(var T=l.length-1;0<=T;T--){var w=l[T],z=w.instance,W=w.currentTarget;if(w=w.listener,z!==m&&f.isPropagationStopped())break t;m=w,f.currentTarget=W;try{m(f)}catch(lt){Kc(lt)}f.currentTarget=null,m=z}else for(T=0;T<l.length;T++){if(w=l[T],z=w.instance,W=w.currentTarget,w=w.listener,z!==m&&f.isPropagationStopped())break t;m=w,f.currentTarget=W;try{m(f)}catch(lt){Kc(lt)}f.currentTarget=null,m=z}}}}function qt(i,r){var o=r[Gs];o===void 0&&(o=r[Gs]=new Set);var l=i+"__bubble";o.has(l)||(iv(r,i,2,!1),o.add(l))}function Cm(i,r,o){var l=0;r&&(l|=4),iv(o,i,l,r)}var uh="_reactListening"+Math.random().toString(36).slice(2);function Nm(i){if(!i[uh]){i[uh]=!0,$s.forEach(function(o){o!=="selectionchange"&&(LA.has(o)||Cm(o,!1,i),Cm(o,!0,i))});var r=i.nodeType===9?i:i.ownerDocument;r===null||r[uh]||(r[uh]=!0,Cm("selectionchange",!1,r))}}function iv(i,r,o,l){switch(xv(r)){case 2:var f=cR;break;case 8:f=hR;break;default:f=Fm}o=f.bind(null,r,o,i),f=void 0,!si||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?i.addEventListener(r,o,{capture:!0,passive:f}):i.addEventListener(r,o,!0):f!==void 0?i.addEventListener(r,o,{passive:f}):i.addEventListener(r,o,!1)}function Dm(i,r,o,l,f){var m=l;if((r&1)===0&&(r&2)===0&&l!==null)t:for(;;){if(l===null)return;var T=l.tag;if(T===3||T===4){var w=l.stateNode.containerInfo;if(w===f)break;if(T===4)for(T=l.return;T!==null;){var z=T.tag;if((z===3||z===4)&&T.stateNode.containerInfo===f)return;T=T.return}for(;w!==null;){if(T=Jn(w),T===null)return;if(z=T.tag,z===5||z===6||z===26||z===27){l=m=T;continue t}w=w.parentNode}}l=l.return}hc(function(){var W=m,lt=ri(o),ft=[];t:{var nt=Uy.get(i);if(nt!==void 0){var st=Xa,Dt=i;switch(i){case"keypress":if(Gi(o)===0)break t;case"keydown":case"keyup":st=to;break;case"focusin":Dt="focus",st=Za;break;case"focusout":Dt="blur",st=Za;break;case"beforeblur":case"afterblur":st=Za;break;case"click":if(o.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":st=ai;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":st=id;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":st=vc;break;case Vy:case ky:case Py:st=Wa;break;case Ly:st=Tc;break;case"scroll":case"scrollend":st=fc;break;case"wheel":st=eo;break;case"copy":case"cut":case"paste":st=Ja;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":st=Al;break;case"toggle":case"beforetoggle":st=wc}var xt=(r&4)!==0,le=!xt&&(i==="scroll"||i==="scrollend"),$=xt?nt!==null?nt+"Capture":null:nt;xt=[];for(var H=W,Q;H!==null;){var ct=H;if(Q=ct.stateNode,ct=ct.tag,ct!==5&&ct!==26&&ct!==27||Q===null||$===null||(ct=Ws(H,$),ct!=null&&xt.push(nu(H,ct,Q))),le)break;H=H.return}0<xt.length&&(nt=new st(nt,Dt,null,o,lt),ft.push({event:nt,listeners:xt}))}}if((r&7)===0){t:{if(nt=i==="mouseover"||i==="pointerover",st=i==="mouseout"||i==="pointerout",nt&&o!==_r&&(Dt=o.relatedTarget||o.fromElement)&&(Jn(Dt)||Dt[Dn]))break t;if((st||nt)&&(nt=lt.window===lt?lt:(nt=lt.ownerDocument)?nt.defaultView||nt.parentWindow:window,st?(Dt=o.relatedTarget||o.toElement,st=W,Dt=Dt?Jn(Dt):null,Dt!==null&&(le=u(Dt),xt=Dt.tag,Dt!==le||xt!==5&&xt!==27&&xt!==6)&&(Dt=null)):(st=null,Dt=W),st!==Dt)){if(xt=ai,ct="onMouseLeave",$="onMouseEnter",H="mouse",(i==="pointerout"||i==="pointerover")&&(xt=Al,ct="onPointerLeave",$="onPointerEnter",H="pointer"),le=st==null?nt:ei(st),Q=Dt==null?nt:ei(Dt),nt=new xt(ct,H+"leave",st,o,lt),nt.target=le,nt.relatedTarget=Q,ct=null,Jn(lt)===W&&(xt=new xt($,H+"enter",Dt,o,lt),xt.target=Q,xt.relatedTarget=le,ct=xt),le=ct,st&&Dt)e:{for(xt=st,$=Dt,H=0,Q=xt;Q;Q=xo(Q))H++;for(Q=0,ct=$;ct;ct=xo(ct))Q++;for(;0<H-Q;)xt=xo(xt),H--;for(;0<Q-H;)$=xo($),Q--;for(;H--;){if(xt===$||$!==null&&xt===$.alternate)break e;xt=xo(xt),$=xo($)}xt=null}else xt=null;st!==null&&rv(ft,nt,st,xt,!1),Dt!==null&&le!==null&&rv(ft,le,Dt,xt,!0)}}t:{if(nt=W?ei(W):window,st=nt.nodeName&&nt.nodeName.toLowerCase(),st==="select"||st==="input"&&nt.type==="file")var Et=wy;else if(je(nt))if(by)Et=Qb;else{Et=Xb;var Ut=Yb}else st=nt.nodeName,!st||st.toLowerCase()!=="input"||nt.type!=="checkbox"&&nt.type!=="radio"?W&&_l(W.elementType)&&(Et=wy):Et=Kb;if(Et&&(Et=Et(i,W))){wr(ft,Et,o,lt);break t}Ut&&Ut(i,nt,W),i==="focusout"&&W&&nt.type==="number"&&W.memoizedProps.value!=null&&Jr(nt,"number",nt.value)}switch(Ut=W?ei(W):window,i){case"focusin":(je(Ut)||Ut.contentEditable==="true")&&(no=Ut,ld=W,Il=null);break;case"focusout":Il=ld=no=null;break;case"mousedown":ud=!0;break;case"contextmenu":case"mouseup":case"dragend":ud=!1,My(ft,o,lt);break;case"selectionchange":if(Wb)break;case"keydown":case"keyup":My(ft,o,lt)}var Tt;if(Xi)t:{switch(i){case"compositionstart":var It="onCompositionStart";break t;case"compositionend":It="onCompositionEnd";break t;case"compositionupdate":It="onCompositionUpdate";break t}It=void 0}else Yt?ot(i,o)&&(It="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(It="onCompositionStart");It&&(E&&o.locale!=="ko"&&(Yt||It!=="onCompositionStart"?It==="onCompositionEnd"&&Yt&&(Tt=El()):(Fi=lt,ts="value"in Fi?Fi.value:Fi.textContent,Yt=!0)),Ut=ch(W,It),0<Ut.length&&(It=new wl(It,i,null,o,lt),ft.push({event:It,listeners:Ut}),Tt?It.data=Tt:(Tt=pt(o),Tt!==null&&(It.data=Tt)))),(Tt=_?qe(i,o):Xt(i,o))&&(It=ch(W,"onBeforeInput"),0<It.length&&(Ut=new wl("onBeforeInput","beforeinput",null,o,lt),ft.push({event:Ut,listeners:It}),Ut.data=Tt)),VA(ft,i,W,o,lt)}nv(ft,r)})}function nu(i,r,o){return{instance:i,listener:r,currentTarget:o}}function ch(i,r){for(var o=r+"Capture",l=[];i!==null;){var f=i,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=Ws(i,o),f!=null&&l.unshift(nu(i,f,m)),f=Ws(i,r),f!=null&&l.push(nu(i,f,m))),i.tag===3)return l;i=i.return}return[]}function xo(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function rv(i,r,o,l,f){for(var m=r._reactName,T=[];o!==null&&o!==l;){var w=o,z=w.alternate,W=w.stateNode;if(w=w.tag,z!==null&&z===l)break;w!==5&&w!==26&&w!==27||W===null||(z=W,f?(W=Ws(o,m),W!=null&&T.unshift(nu(o,W,z))):f||(W=Ws(o,m),W!=null&&T.push(nu(o,W,z)))),o=o.return}T.length!==0&&i.push({event:r,listeners:T})}var UA=/\r\n?/g,zA=/\u0000|\uFFFD/g;function sv(i){return(typeof i=="string"?i:""+i).replace(UA,`
`).replace(zA,"")}function av(i,r){return r=sv(r),sv(i)===r}function hh(){}function oe(i,r,o,l,f,m){switch(o){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||ii(i,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&ii(i,""+l);break;case"className":ni(i,"class",l);break;case"tabIndex":ni(i,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":ni(i,o,l);break;case"style":yl(i,l,m);break;case"data":if(r!=="object"){ni(i,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||o!=="href")){i.removeAttribute(o);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){i.removeAttribute(o);break}l=Ya(""+l),i.setAttribute(o,l);break;case"action":case"formAction":if(typeof l=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(o==="formAction"?(r!=="input"&&oe(i,r,"name",f.name,f,null),oe(i,r,"formEncType",f.formEncType,f,null),oe(i,r,"formMethod",f.formMethod,f,null),oe(i,r,"formTarget",f.formTarget,f,null)):(oe(i,r,"encType",f.encType,f,null),oe(i,r,"method",f.method,f,null),oe(i,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){i.removeAttribute(o);break}l=Ya(""+l),i.setAttribute(o,l);break;case"onClick":l!=null&&(i.onclick=hh);break;case"onScroll":l!=null&&qt("scroll",i);break;case"onScrollEnd":l!=null&&qt("scrollend",i);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(o=l.__html,o!=null){if(f.children!=null)throw Error(s(60));i.innerHTML=o}}break;case"multiple":i.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":i.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){i.removeAttribute("xlink:href");break}o=Ya(""+l),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?i.setAttribute(o,""+l):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":l===!0?i.setAttribute(o,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?i.setAttribute(o,l):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?i.setAttribute(o,l):i.removeAttribute(o);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?i.removeAttribute(o):i.setAttribute(o,l);break;case"popover":qt("beforetoggle",i),qt("toggle",i),Bi(i,"popover",l);break;case"xlinkActuate":He(i,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":He(i,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":He(i,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":He(i,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":He(i,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":He(i,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":He(i,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":He(i,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":He(i,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Bi(i,"is",l);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=ed.get(o)||o,Bi(i,o,l))}}function Mm(i,r,o,l,f,m){switch(o){case"style":yl(i,l,m);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(o=l.__html,o!=null){if(f.children!=null)throw Error(s(60));i.innerHTML=o}}break;case"children":typeof l=="string"?ii(i,l):(typeof l=="number"||typeof l=="bigint")&&ii(i,""+l);break;case"onScroll":l!=null&&qt("scroll",i);break;case"onScrollEnd":l!=null&&qt("scrollend",i);break;case"onClick":l!=null&&(i.onclick=hh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zr.hasOwnProperty(o))t:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),r=o.slice(2,f?o.length-7:void 0),m=i[Te]||null,m=m!=null?m[o]:null,typeof m=="function"&&i.removeEventListener(r,m,f),typeof l=="function")){typeof m!="function"&&m!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(r,l,f);break t}o in i?i[o]=l:l===!0?i.setAttribute(o,""):Bi(i,o,l)}}}function cn(i,r,o){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":qt("error",i),qt("load",i);var l=!1,f=!1,m;for(m in o)if(o.hasOwnProperty(m)){var T=o[m];if(T!=null)switch(m){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:oe(i,r,m,T,o,null)}}f&&oe(i,r,"srcSet",o.srcSet,o,null),l&&oe(i,r,"src",o.src,o,null);return;case"input":qt("invalid",i);var w=m=T=f=null,z=null,W=null;for(l in o)if(o.hasOwnProperty(l)){var lt=o[l];if(lt!=null)switch(l){case"name":f=lt;break;case"type":T=lt;break;case"checked":z=lt;break;case"defaultChecked":W=lt;break;case"value":m=lt;break;case"defaultValue":w=lt;break;case"children":case"dangerouslySetInnerHTML":if(lt!=null)throw Error(s(137,r));break;default:oe(i,r,l,lt,o,null)}}Ks(i,m,w,z,W,T,f,!1),$a(i);return;case"select":qt("invalid",i),l=T=m=null;for(f in o)if(o.hasOwnProperty(f)&&(w=o[f],w!=null))switch(f){case"value":m=w;break;case"defaultValue":T=w;break;case"multiple":l=w;default:oe(i,r,f,w,o,null)}r=m,o=T,i.multiple=!!l,r!=null?yr(i,!!l,r,!1):o!=null&&yr(i,!!l,o,!0);return;case"textarea":qt("invalid",i),m=f=l=null;for(T in o)if(o.hasOwnProperty(T)&&(w=o[T],w!=null))switch(T){case"value":l=w;break;case"defaultValue":f=w;break;case"children":m=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(s(91));break;default:oe(i,r,T,w,o,null)}Qs(i,l,f,m),$a(i);return;case"option":for(z in o)if(o.hasOwnProperty(z)&&(l=o[z],l!=null))switch(z){case"selected":i.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:oe(i,r,z,l,o,null)}return;case"dialog":qt("beforetoggle",i),qt("toggle",i),qt("cancel",i),qt("close",i);break;case"iframe":case"object":qt("load",i);break;case"video":case"audio":for(l=0;l<eu.length;l++)qt(eu[l],i);break;case"image":qt("error",i),qt("load",i);break;case"details":qt("toggle",i);break;case"embed":case"source":case"link":qt("error",i),qt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in o)if(o.hasOwnProperty(W)&&(l=o[W],l!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:oe(i,r,W,l,o,null)}return;default:if(_l(r)){for(lt in o)o.hasOwnProperty(lt)&&(l=o[lt],l!==void 0&&Mm(i,r,lt,l,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(l=o[w],l!=null&&oe(i,r,w,l,o,null))}function BA(i,r,o,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,T=null,w=null,z=null,W=null,lt=null;for(st in o){var ft=o[st];if(o.hasOwnProperty(st)&&ft!=null)switch(st){case"checked":break;case"value":break;case"defaultValue":z=ft;default:l.hasOwnProperty(st)||oe(i,r,st,null,l,ft)}}for(var nt in l){var st=l[nt];if(ft=o[nt],l.hasOwnProperty(nt)&&(st!=null||ft!=null))switch(nt){case"type":m=st;break;case"name":f=st;break;case"checked":W=st;break;case"defaultChecked":lt=st;break;case"value":T=st;break;case"defaultValue":w=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(s(137,r));break;default:st!==ft&&oe(i,r,nt,st,l,ft)}}qn(i,T,w,z,W,lt,m,f);return;case"select":st=T=w=nt=null;for(m in o)if(z=o[m],o.hasOwnProperty(m)&&z!=null)switch(m){case"value":break;case"multiple":st=z;default:l.hasOwnProperty(m)||oe(i,r,m,null,l,z)}for(f in l)if(m=l[f],z=o[f],l.hasOwnProperty(f)&&(m!=null||z!=null))switch(f){case"value":nt=m;break;case"defaultValue":w=m;break;case"multiple":T=m;default:m!==z&&oe(i,r,f,m,l,z)}r=w,o=T,l=st,nt!=null?yr(i,!!o,nt,!1):!!l!=!!o&&(r!=null?yr(i,!!o,r,!0):yr(i,!!o,o?[]:"",!1));return;case"textarea":st=nt=null;for(w in o)if(f=o[w],o.hasOwnProperty(w)&&f!=null&&!l.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:oe(i,r,w,null,l,f)}for(T in l)if(f=l[T],m=o[T],l.hasOwnProperty(T)&&(f!=null||m!=null))switch(T){case"value":nt=f;break;case"defaultValue":st=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==m&&oe(i,r,T,f,l,m)}se(i,nt,st);return;case"option":for(var Dt in o)if(nt=o[Dt],o.hasOwnProperty(Dt)&&nt!=null&&!l.hasOwnProperty(Dt))switch(Dt){case"selected":i.selected=!1;break;default:oe(i,r,Dt,null,l,nt)}for(z in l)if(nt=l[z],st=o[z],l.hasOwnProperty(z)&&nt!==st&&(nt!=null||st!=null))switch(z){case"selected":i.selected=nt&&typeof nt!="function"&&typeof nt!="symbol";break;default:oe(i,r,z,nt,l,st)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xt in o)nt=o[xt],o.hasOwnProperty(xt)&&nt!=null&&!l.hasOwnProperty(xt)&&oe(i,r,xt,null,l,nt);for(W in l)if(nt=l[W],st=o[W],l.hasOwnProperty(W)&&nt!==st&&(nt!=null||st!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if(nt!=null)throw Error(s(137,r));break;default:oe(i,r,W,nt,l,st)}return;default:if(_l(r)){for(var le in o)nt=o[le],o.hasOwnProperty(le)&&nt!==void 0&&!l.hasOwnProperty(le)&&Mm(i,r,le,void 0,l,nt);for(lt in l)nt=l[lt],st=o[lt],!l.hasOwnProperty(lt)||nt===st||nt===void 0&&st===void 0||Mm(i,r,lt,nt,l,st);return}}for(var $ in o)nt=o[$],o.hasOwnProperty($)&&nt!=null&&!l.hasOwnProperty($)&&oe(i,r,$,null,l,nt);for(ft in l)nt=l[ft],st=o[ft],!l.hasOwnProperty(ft)||nt===st||nt==null&&st==null||oe(i,r,ft,nt,l,st)}var Om=null,Vm=null;function fh(i){return i.nodeType===9?i:i.ownerDocument}function ov(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lv(i,r){if(i===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&r==="foreignObject"?0:i}function km(i,r){return i==="textarea"||i==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Pm=null;function HA(){var i=window.event;return i&&i.type==="popstate"?i===Pm?!1:(Pm=i,!0):(Pm=null,!1)}var uv=typeof setTimeout=="function"?setTimeout:void 0,qA=typeof clearTimeout=="function"?clearTimeout:void 0,cv=typeof Promise=="function"?Promise:void 0,jA=typeof queueMicrotask=="function"?queueMicrotask:typeof cv<"u"?function(i){return cv.resolve(null).then(i).catch(FA)}:uv;function FA(i){setTimeout(function(){throw i})}function ps(i){return i==="head"}function hv(i,r){var o=r,l=0,f=0;do{var m=o.nextSibling;if(i.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"){if(0<l&&8>l){o=l;var T=i.ownerDocument;if(o&1&&iu(T.documentElement),o&2&&iu(T.body),o&4)for(o=T.head,iu(o),T=o.firstChild;T;){var w=T.nextSibling,z=T.nodeName;T[gr]||z==="SCRIPT"||z==="STYLE"||z==="LINK"&&T.rel.toLowerCase()==="stylesheet"||o.removeChild(T),T=w}}if(f===0){i.removeChild(m),hu(r);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:l=o.charCodeAt(0)-48;else l=0;o=m}while(o);hu(r)}function Lm(i){var r=i.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var o=r;switch(r=r.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Lm(o),zi(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function GA(i,r,o,l){for(;i.nodeType===1;){var f=o;if(i.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(l){if(!i[gr])switch(r){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(m=i.getAttribute("rel"),m==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(m!==f.rel||i.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||i.getAttribute("title")!==(f.title==null?null:f.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(m=i.getAttribute("src"),(m!==(f.src==null?null:f.src)||i.getAttribute("type")!==(f.type==null?null:f.type)||i.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(r==="input"&&i.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&i.getAttribute("name")===m)return i}else return i;if(i=Ai(i.nextSibling),i===null)break}return null}function $A(i,r,o){if(r==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=Ai(i.nextSibling),i===null))return null;return i}function Um(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState==="complete"}function YA(i,r){var o=i.ownerDocument;if(i.data!=="$?"||o.readyState==="complete")r();else{var l=function(){r(),o.removeEventListener("DOMContentLoaded",l)};o.addEventListener("DOMContentLoaded",l),i._reactRetry=l}}function Ai(i){for(;i!=null;i=i.nextSibling){var r=i.nodeType;if(r===1||r===3)break;if(r===8){if(r=i.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return i}var zm=null;function fv(i){i=i.previousSibling;for(var r=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return i;r--}else o==="/$"&&r++}i=i.previousSibling}return null}function dv(i,r,o){switch(r=fh(o),i){case"html":if(i=r.documentElement,!i)throw Error(s(452));return i;case"head":if(i=r.head,!i)throw Error(s(453));return i;case"body":if(i=r.body,!i)throw Error(s(454));return i;default:throw Error(s(451))}}function iu(i){for(var r=i.attributes;r.length;)i.removeAttributeNode(r[0]);zi(i)}var di=new Map,mv=new Set;function dh(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Pr=G.d;G.d={f:XA,r:KA,D:QA,C:ZA,L:WA,m:JA,X:eR,S:tR,M:nR};function XA(){var i=Pr.f(),r=rh();return i||r}function KA(i){var r=ti(i);r!==null&&r.tag===5&&r.type==="form"?V_(r):Pr.r(i)}var Io=typeof document>"u"?null:document;function gv(i,r,o){var l=Io;if(l&&typeof r=="string"&&r){var f=Ve(r);f='link[rel="'+i+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),mv.has(f)||(mv.add(f),i={rel:i,crossOrigin:o,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),cn(r,"link",i),pe(r),l.head.appendChild(r)))}}function QA(i){Pr.D(i),gv("dns-prefetch",i,null)}function ZA(i,r){Pr.C(i,r),gv("preconnect",i,r)}function WA(i,r,o){Pr.L(i,r,o);var l=Io;if(l&&i&&r){var f='link[rel="preload"][as="'+Ve(r)+'"]';r==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Ve(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Ve(o.imageSizes)+'"]')):f+='[href="'+Ve(i)+'"]';var m=f;switch(r){case"style":m=Co(i);break;case"script":m=No(i)}di.has(m)||(i=y({rel:"preload",href:r==="image"&&o&&o.imageSrcSet?void 0:i,as:r},o),di.set(m,i),l.querySelector(f)!==null||r==="style"&&l.querySelector(ru(m))||r==="script"&&l.querySelector(su(m))||(r=l.createElement("link"),cn(r,"link",i),pe(r),l.head.appendChild(r)))}}function JA(i,r){Pr.m(i,r);var o=Io;if(o&&i){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Ve(l)+'"][href="'+Ve(i)+'"]',m=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=No(i)}if(!di.has(m)&&(i=y({rel:"modulepreload",href:i},r),di.set(m,i),o.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(su(m)))return}l=o.createElement("link"),cn(l,"link",i),pe(l),o.head.appendChild(l)}}}function tR(i,r,o){Pr.S(i,r,o);var l=Io;if(l&&i){var f=an(l).hoistableStyles,m=Co(i);r=r||"default";var T=f.get(m);if(!T){var w={loading:0,preload:null};if(T=l.querySelector(ru(m)))w.loading=5;else{i=y({rel:"stylesheet",href:i,"data-precedence":r},o),(o=di.get(m))&&Bm(i,o);var z=T=l.createElement("link");pe(z),cn(z,"link",i),z._p=new Promise(function(W,lt){z.onload=W,z.onerror=lt}),z.addEventListener("load",function(){w.loading|=1}),z.addEventListener("error",function(){w.loading|=2}),w.loading|=4,mh(T,r,l)}T={type:"stylesheet",instance:T,count:1,state:w},f.set(m,T)}}}function eR(i,r){Pr.X(i,r);var o=Io;if(o&&i){var l=an(o).hoistableScripts,f=No(i),m=l.get(f);m||(m=o.querySelector(su(f)),m||(i=y({src:i,async:!0},r),(r=di.get(f))&&Hm(i,r),m=o.createElement("script"),pe(m),cn(m,"link",i),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function nR(i,r){Pr.M(i,r);var o=Io;if(o&&i){var l=an(o).hoistableScripts,f=No(i),m=l.get(f);m||(m=o.querySelector(su(f)),m||(i=y({src:i,async:!0,type:"module"},r),(r=di.get(f))&&Hm(i,r),m=o.createElement("script"),pe(m),cn(m,"link",i),o.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},l.set(f,m))}}function pv(i,r,o,l){var f=(f=_t.current)?dh(f):null;if(!f)throw Error(s(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(r=Co(o.href),o=an(f).hoistableStyles,l=o.get(r),l||(l={type:"style",instance:null,count:0,state:null},o.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=Co(o.href);var m=an(f).hoistableStyles,T=m.get(i);if(T||(f=f.ownerDocument||f,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(i,T),(m=f.querySelector(ru(i)))&&!m._p&&(T.instance=m,T.state.loading=5),di.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},di.set(i,o),m||iR(f,i,o,T.state))),r&&l===null)throw Error(s(528,""));return T}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=o.async,o=o.src,typeof o=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=No(o),o=an(f).hoistableScripts,l=o.get(r),l||(l={type:"script",instance:null,count:0,state:null},o.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,i))}}function Co(i){return'href="'+Ve(i)+'"'}function ru(i){return'link[rel="stylesheet"]['+i+"]"}function yv(i){return y({},i,{"data-precedence":i.precedence,precedence:null})}function iR(i,r,o,l){i.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=i.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),cn(r,"link",o),pe(r),i.head.appendChild(r))}function No(i){return'[src="'+Ve(i)+'"]'}function su(i){return"script[async]"+i}function _v(i,r,o){if(r.count++,r.instance===null)switch(r.type){case"style":var l=i.querySelector('style[data-href~="'+Ve(o.href)+'"]');if(l)return r.instance=l,pe(l),l;var f=y({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return l=(i.ownerDocument||i).createElement("style"),pe(l),cn(l,"style",f),mh(l,o.precedence,i),r.instance=l;case"stylesheet":f=Co(o.href);var m=i.querySelector(ru(f));if(m)return r.state.loading|=4,r.instance=m,pe(m),m;l=yv(o),(f=di.get(f))&&Bm(l,f),m=(i.ownerDocument||i).createElement("link"),pe(m);var T=m;return T._p=new Promise(function(w,z){T.onload=w,T.onerror=z}),cn(m,"link",l),r.state.loading|=4,mh(m,o.precedence,i),r.instance=m;case"script":return m=No(o.src),(f=i.querySelector(su(m)))?(r.instance=f,pe(f),f):(l=o,(f=di.get(m))&&(l=y({},o),Hm(l,f)),i=i.ownerDocument||i,f=i.createElement("script"),pe(f),cn(f,"link",l),i.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,mh(l,o.precedence,i));return r.instance}function mh(i,r,o){for(var l=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,m=f,T=0;T<l.length;T++){var w=l[T];if(w.dataset.precedence===r)m=w;else if(m!==f)break}m?m.parentNode.insertBefore(i,m.nextSibling):(r=o.nodeType===9?o.head:o,r.insertBefore(i,r.firstChild))}function Bm(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.title==null&&(i.title=r.title)}function Hm(i,r){i.crossOrigin==null&&(i.crossOrigin=r.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=r.referrerPolicy),i.integrity==null&&(i.integrity=r.integrity)}var gh=null;function vv(i,r,o){if(gh===null){var l=new Map,f=gh=new Map;f.set(o,l)}else f=gh,l=f.get(o),l||(l=new Map,f.set(o,l));if(l.has(i))return l;for(l.set(i,null),o=o.getElementsByTagName(i),f=0;f<o.length;f++){var m=o[f];if(!(m[gr]||m[Re]||i==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var T=m.getAttribute(r)||"";T=i+T;var w=l.get(T);w?w.push(m):l.set(T,[m])}}return l}function Ev(i,r,o){i=i.ownerDocument||i,i.head.insertBefore(o,r==="title"?i.querySelector("head > title"):null)}function rR(i,r,o){if(o===1||r.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return i=r.disabled,typeof r.precedence=="string"&&i==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Tv(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var au=null;function sR(){}function aR(i,r,o){if(au===null)throw Error(s(475));var l=au;if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=Co(o.href),m=i.querySelector(ru(f));if(m){i=m._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(l.count++,l=ph.bind(l),i.then(l,l)),r.state.loading|=4,r.instance=m,pe(m);return}m=i.ownerDocument||i,o=yv(o),(f=di.get(f))&&Bm(o,f),m=m.createElement("link"),pe(m);var T=m;T._p=new Promise(function(w,z){T.onload=w,T.onerror=z}),cn(m,"link",o),r.instance=m}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,i),(i=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=ph.bind(l),i.addEventListener("load",r),i.addEventListener("error",r))}}function oR(){if(au===null)throw Error(s(475));var i=au;return i.stylesheets&&i.count===0&&qm(i,i.stylesheets),0<i.count?function(r){var o=setTimeout(function(){if(i.stylesheets&&qm(i,i.stylesheets),i.unsuspend){var l=i.unsuspend;i.unsuspend=null,l()}},6e4);return i.unsuspend=r,function(){i.unsuspend=null,clearTimeout(o)}}:null}function ph(){if(this.count--,this.count===0){if(this.stylesheets)qm(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var yh=null;function qm(i,r){i.stylesheets=null,i.unsuspend!==null&&(i.count++,yh=new Map,r.forEach(lR,i),yh=null,ph.call(i))}function lR(i,r){if(!(r.state.loading&4)){var o=yh.get(i);if(o)var l=o.get(null);else{o=new Map,yh.set(i,o);for(var f=i.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var T=f[m];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(o.set(T.dataset.precedence,T),l=T)}l&&o.set(null,l)}f=r.instance,T=f.getAttribute("data-precedence"),m=o.get(T)||l,m===l&&o.set(null,f),o.set(T,f),this.count++,l=ph.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),m?m.parentNode.insertBefore(f,m.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(f,i.firstChild)),r.state.loading|=4}}var ou={$$typeof:X,Provider:null,Consumer:null,_currentValue:tt,_currentValue2:tt,_threadCount:0};function uR(i,r,o,l,f,m,T,w){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=zn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zn(0),this.hiddenUpdates=zn(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=w,this.incompleteTransitions=new Map}function Sv(i,r,o,l,f,m,T,w,z,W,lt,ft){return i=new uR(i,r,o,T,w,z,W,ft),r=1,m===!0&&(r|=24),m=Fn(3,null,null,r),i.current=m,m.stateNode=i,r=wd(),r.refCount++,i.pooledCache=r,r.refCount++,m.memoizedState={element:l,isDehydrated:o,cache:r},xd(m),i}function wv(i){return i?(i=ao,i):ao}function bv(i,r,o,l,f,m){f=wv(f),l.context===null?l.context=f:l.pendingContext=f,l=is(r),l.payload={element:o},m=m===void 0?null:m,m!==null&&(l.callback=m),o=rs(i,l,r),o!==null&&(Kn(o,i,r),Ll(o,i,r))}function Av(i,r){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<r?o:r}}function jm(i,r){Av(i,r),(i=i.alternate)&&Av(i,r)}function Rv(i){if(i.tag===13){var r=so(i,67108864);r!==null&&Kn(r,i,67108864),jm(i,67108864)}}var _h=!0;function cR(i,r,o,l){var f=V.T;V.T=null;var m=G.p;try{G.p=2,Fm(i,r,o,l)}finally{G.p=m,V.T=f}}function hR(i,r,o,l){var f=V.T;V.T=null;var m=G.p;try{G.p=8,Fm(i,r,o,l)}finally{G.p=m,V.T=f}}function Fm(i,r,o,l){if(_h){var f=Gm(l);if(f===null)Dm(i,r,l,vh,o),Iv(i,l);else if(dR(f,i,r,o,l))l.stopPropagation();else if(Iv(i,l),r&4&&-1<fR.indexOf(i)){for(;f!==null;){var m=ti(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var T=Ke(m.pendingLanes);if(T!==0){var w=m;for(w.pendingLanes|=2,w.entangledLanes|=2;T;){var z=1<<31-ge(T);w.entanglements[1]|=z,T&=~z}tr(m),(ie&6)===0&&(nh=Lt()+500,tu(0))}}break;case 13:w=so(m,2),w!==null&&Kn(w,m,2),rh(),jm(m,2)}if(m=Gm(l),m===null&&Dm(i,r,l,vh,o),m===f)break;f=m}f!==null&&l.stopPropagation()}else Dm(i,r,l,null,o)}}function Gm(i){return i=ri(i),$m(i)}var vh=null;function $m(i){if(vh=null,i=Jn(i),i!==null){var r=u(i);if(r===null)i=null;else{var o=r.tag;if(o===13){if(i=c(r),i!==null)return i;i=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;i=null}else r!==i&&(i=null)}}return vh=i,null}function xv(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wt()){case Be:return 2;case Nn:return 8;case Ln:case Vi:return 32;case Un:return 268435456;default:return 32}default:return 32}}var Ym=!1,ys=null,_s=null,vs=null,lu=new Map,uu=new Map,Es=[],fR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Iv(i,r){switch(i){case"focusin":case"focusout":ys=null;break;case"dragenter":case"dragleave":_s=null;break;case"mouseover":case"mouseout":vs=null;break;case"pointerover":case"pointerout":lu.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":uu.delete(r.pointerId)}}function cu(i,r,o,l,f,m){return i===null||i.nativeEvent!==m?(i={blockedOn:r,domEventName:o,eventSystemFlags:l,nativeEvent:m,targetContainers:[f]},r!==null&&(r=ti(r),r!==null&&Rv(r)),i):(i.eventSystemFlags|=l,r=i.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),i)}function dR(i,r,o,l,f){switch(r){case"focusin":return ys=cu(ys,i,r,o,l,f),!0;case"dragenter":return _s=cu(_s,i,r,o,l,f),!0;case"mouseover":return vs=cu(vs,i,r,o,l,f),!0;case"pointerover":var m=f.pointerId;return lu.set(m,cu(lu.get(m)||null,i,r,o,l,f)),!0;case"gotpointercapture":return m=f.pointerId,uu.set(m,cu(uu.get(m)||null,i,r,o,l,f)),!0}return!1}function Cv(i){var r=Jn(i.target);if(r!==null){var o=u(r);if(o!==null){if(r=o.tag,r===13){if(r=c(o),r!==null){i.blockedOn=r,Ba(i.priority,function(){if(o.tag===13){var l=Xn();l=Pi(l);var f=so(o,l);f!==null&&Kn(f,o,l),jm(o,l)}});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Eh(i){if(i.blockedOn!==null)return!1;for(var r=i.targetContainers;0<r.length;){var o=Gm(i.nativeEvent);if(o===null){o=i.nativeEvent;var l=new o.constructor(o.type,o);_r=l,o.target.dispatchEvent(l),_r=null}else return r=ti(o),r!==null&&Rv(r),i.blockedOn=o,!1;r.shift()}return!0}function Nv(i,r,o){Eh(i)&&o.delete(r)}function mR(){Ym=!1,ys!==null&&Eh(ys)&&(ys=null),_s!==null&&Eh(_s)&&(_s=null),vs!==null&&Eh(vs)&&(vs=null),lu.forEach(Nv),uu.forEach(Nv)}function Th(i,r){i.blockedOn===r&&(i.blockedOn=null,Ym||(Ym=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,mR)))}var Sh=null;function Dv(i){Sh!==i&&(Sh=i,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Sh===i&&(Sh=null);for(var r=0;r<i.length;r+=3){var o=i[r],l=i[r+1],f=i[r+2];if(typeof l!="function"){if($m(l||o)===null)continue;break}var m=ti(o);m!==null&&(i.splice(r,3),r-=3,$d(m,{pending:!0,data:f,method:o.method,action:l},l,f))}}))}function hu(i){function r(z){return Th(z,i)}ys!==null&&Th(ys,i),_s!==null&&Th(_s,i),vs!==null&&Th(vs,i),lu.forEach(r),uu.forEach(r);for(var o=0;o<Es.length;o++){var l=Es[o];l.blockedOn===i&&(l.blockedOn=null)}for(;0<Es.length&&(o=Es[0],o.blockedOn===null);)Cv(o),o.blockedOn===null&&Es.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(l=0;l<o.length;l+=3){var f=o[l],m=o[l+1],T=f[Te]||null;if(typeof m=="function")T||Dv(o);else if(T){var w=null;if(m&&m.hasAttribute("formAction")){if(f=m,T=m[Te]||null)w=T.formAction;else if($m(f)!==null)continue}else w=T.action;typeof w=="function"?o[l+1]=w:(o.splice(l,3),l-=3),Dv(o)}}}function Xm(i){this._internalRoot=i}wh.prototype.render=Xm.prototype.render=function(i){var r=this._internalRoot;if(r===null)throw Error(s(409));var o=r.current,l=Xn();bv(o,l,i,r,null,null)},wh.prototype.unmount=Xm.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var r=i.containerInfo;bv(i.current,2,null,i,null,null),rh(),r[Dn]=null}};function wh(i){this._internalRoot=i}wh.prototype.unstable_scheduleHydration=function(i){if(i){var r=Li();i={blockedOn:null,target:i,priority:r};for(var o=0;o<Es.length&&r!==0&&r<Es[o].priority;o++);Es.splice(o,0,i),o===0&&Cv(i)}};var Mv=t.version;if(Mv!=="19.1.1")throw Error(s(527,Mv,"19.1.1"));G.findDOMNode=function(i){var r=i._reactInternals;if(r===void 0)throw typeof i.render=="function"?Error(s(188)):(i=Object.keys(i).join(","),Error(s(268,i)));return i=g(r),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var gR={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bh.isDisabled&&bh.supportsFiber)try{te=bh.inject(gR),Bt=bh}catch{}}return du.createRoot=function(i,r){if(!a(i))throw Error(s(299));var o=!1,l="",f=X_,m=K_,T=Q_,w=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(m=r.onCaughtError),r.onRecoverableError!==void 0&&(T=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(w=r.unstable_transitionCallbacks)),r=Sv(i,1,!1,null,null,o,l,f,m,T,w,null),i[Dn]=r.current,Nm(i),new Xm(r)},du.hydrateRoot=function(i,r,o){if(!a(i))throw Error(s(299));var l=!1,f="",m=X_,T=K_,w=Q_,z=null,W=null;return o!=null&&(o.unstable_strictMode===!0&&(l=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(m=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(z=o.unstable_transitionCallbacks),o.formState!==void 0&&(W=o.formState)),r=Sv(i,1,!0,r,o??null,l,f,m,T,w,z,W),r.context=wv(null),o=r.current,l=Xn(),l=Pi(l),f=is(l),f.callback=null,rs(o,f,l),o=l,r.current.lanes=o,Zn(r,o),tr(r),i[Dn]=r.current,Nm(i),new wh(r)},du.version="19.1.1",du}var qv;function bR(){if(qv)return Zm.exports;qv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Zm.exports=wR(),Zm.exports}var AR=bR();const RR=hp(AR),xR=()=>{};var jv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1=function(e){const t=[];let n=0;for(let s=0;s<e.length;s++){let a=e.charCodeAt(s);a<128?t[n++]=a:a<2048?(t[n++]=a>>6|192,t[n++]=a&63|128):(a&64512)===55296&&s+1<e.length&&(e.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(e.charCodeAt(++s)&1023),t[n++]=a>>18|240,t[n++]=a>>12&63|128,t[n++]=a>>6&63|128,t[n++]=a&63|128):(t[n++]=a>>12|224,t[n++]=a>>6&63|128,t[n++]=a&63|128)}return t},IR=function(e){const t=[];let n=0,s=0;for(;n<e.length;){const a=e[n++];if(a<128)t[s++]=String.fromCharCode(a);else if(a>191&&a<224){const u=e[n++];t[s++]=String.fromCharCode((a&31)<<6|u&63)}else if(a>239&&a<365){const u=e[n++],c=e[n++],d=e[n++],g=((a&7)<<18|(u&63)<<12|(c&63)<<6|d&63)-65536;t[s++]=String.fromCharCode(55296+(g>>10)),t[s++]=String.fromCharCode(56320+(g&1023))}else{const u=e[n++],c=e[n++];t[s++]=String.fromCharCode((a&15)<<12|(u&63)<<6|c&63)}}return t.join("")},l1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<e.length;a+=3){const u=e[a],c=a+1<e.length,d=c?e[a+1]:0,g=a+2<e.length,p=g?e[a+2]:0,y=u>>2,v=(u&3)<<4|d>>4;let S=(d&15)<<2|p>>6,b=p&63;g||(b=64,c||(S=64)),s.push(n[y],n[v],n[S],n[b])}return s.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(o1(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):IR(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<e.length;){const u=n[e.charAt(a++)],d=a<e.length?n[e.charAt(a)]:0;++a;const p=a<e.length?n[e.charAt(a)]:64;++a;const v=a<e.length?n[e.charAt(a)]:64;if(++a,u==null||d==null||p==null||v==null)throw new CR;const S=u<<2|d>>4;if(s.push(S),p!==64){const b=d<<4&240|p>>2;if(s.push(b),v!==64){const k=p<<6&192|v;s.push(k)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class CR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NR=function(e){const t=o1(e);return l1.encodeByteArray(t,!0)},tf=function(e){return NR(e).replace(/\./g,"")},u1=function(e){try{return l1.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MR=()=>DR().__FIREBASE_DEFAULTS__,OR=()=>{if(typeof process>"u"||typeof jv>"u")return;const e=jv.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},VR=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&u1(e[1]);return t&&JSON.parse(t)},Df=()=>{try{return xR()||MR()||OR()||VR()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},c1=e=>Df()?.emulatorHosts?.[e],kR=e=>{const t=c1(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),s]:[t.substring(0,n),s]},h1=()=>Df()?.config,f1=e=>Df()?.[`_${e}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function d1(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=t||"demo-project",a=e.iat||0,u=e.sub||e.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...e};return[tf(JSON.stringify(n)),tf(JSON.stringify(c)),""].join(".")}const Ru={};function UR(){const e={prod:[],emulator:[]};for(const t of Object.keys(Ru))Ru[t]?e.emulator.push(t):e.prod.push(t);return e}function zR(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let Fv=!1;function m1(e,t){if(typeof window>"u"||typeof document>"u"||!al(window.location.host)||Ru[e]===t||Ru[e]||Fv)return;Ru[e]=t;function n(S){return`__firebase__banner__${S}`}const s="__firebase__banner",u=UR().prod.length>0;function c(){const S=document.getElementById(s);S&&S.remove()}function d(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,b){S.setAttribute("width","24"),S.setAttribute("id",b),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function p(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Fv=!0,c()},S}function y(S,b){S.setAttribute("id",b),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function v(){const S=zR(s),b=n("text"),k=document.getElementById(b)||document.createElement("span"),P=n("learnmore"),U=document.getElementById(P)||document.createElement("a"),B=n("preprendIcon"),j=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const X=S.element;d(X),y(U,P);const F=p();g(j,B),X.append(j,k,U,F),document.body.appendChild(X)}u?(k.innerText="Preview backend disconnected.",j.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(j.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,k.innerText="Preview backend running in this workspace."),k.setAttribute("id",b)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function BR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vn())}function HR(){const e=Df()?.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function qR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jR(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function FR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function GR(){const e=vn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function $R(){return!HR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function YR(){try{return typeof indexedDB=="object"}catch{return!1}}function XR(){return new Promise((e,t)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),e(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{t(a.error?.message||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR="FirebaseError";class Kr extends Error{constructor(t,n,s){super(n),this.code=t,this.customData=s,this.name=KR,Object.setPrototypeOf(this,Kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zu.prototype.create)}}class Zu{constructor(t,n,s){this.service=t,this.serviceName=n,this.errors=s}create(t,...n){const s=n[0]||{},a=`${this.service}/${t}`,u=this.errors[t],c=u?QR(u,s):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new Kr(a,d,s)}}function QR(e,t){return e.replace(ZR,(n,s)=>{const a=t[s];return a!=null?String(a):`<${s}?>`})}const ZR=/\{\$([^}]+)}/g;function WR(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ca(e,t){if(e===t)return!0;const n=Object.keys(e),s=Object.keys(t);for(const a of n){if(!s.includes(a))return!1;const u=e[a],c=t[a];if(Gv(u)&&Gv(c)){if(!Ca(u,c))return!1}else if(u!==c)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function Gv(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wu(e){const t=[];for(const[n,s]of Object.entries(e))Array.isArray(s)?s.forEach(a=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return t.length?"&"+t.join("&"):""}function JR(e,t){const n=new t2(e,t);return n.subscribe.bind(n)}class t2{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(s=>{this.error(s)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,s){let a;if(t===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");e2(t,["next","error","complete"])?a=t:a={next:t,error:n,complete:s},a.next===void 0&&(a.next=eg),a.error===void 0&&(a.error=eg),a.complete===void 0&&(a.complete=eg);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),u}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function e2(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function eg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(e){return e&&e._delegate?e._delegate:e}class Na{constructor(t,n,s){this.name=t,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n2=class{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const s=new PR;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),s=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(r2(t))try{this.getOrInitializeService({instanceIdentifier:Ea})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:a});s.resolve(u)}catch{}}}}clearInstance(t=Ea){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ea){return this.instances.has(t)}getOptions(t=Ea){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(u);s===d&&c.resolve(a)}return a}onInit(t,n){const s=this.normalizeInstanceIdentifier(n),a=this.onInitCallbacks.get(s)??new Set;a.add(t),this.onInitCallbacks.set(s,a);const u=this.instances.get(s);return u&&t(u,s),()=>{a.delete(t)}}invokeOnInitCallbacks(t,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:i2(t),options:n}),this.instances.set(t,s),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Ea){return this.component?this.component.multipleInstances?t:Ea:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function i2(e){return e===Ea?void 0:e}function r2(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s2{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new n2(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(jt||(jt={}));const a2={debug:jt.DEBUG,verbose:jt.VERBOSE,info:jt.INFO,warn:jt.WARN,error:jt.ERROR,silent:jt.SILENT},o2=jt.INFO,l2={[jt.DEBUG]:"log",[jt.VERBOSE]:"log",[jt.INFO]:"info",[jt.WARN]:"warn",[jt.ERROR]:"error"},u2=(e,t,...n)=>{if(t<e.logLevel)return;const s=new Date().toISOString(),a=l2[t];if(a)console[a](`[${s}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class fp{constructor(t){this.name=t,this._logLevel=o2,this._logHandler=u2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in jt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?a2[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,jt.DEBUG,...t),this._logHandler(this,jt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,jt.VERBOSE,...t),this._logHandler(this,jt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,jt.INFO,...t),this._logHandler(this,jt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,jt.WARN,...t),this._logHandler(this,jt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,jt.ERROR,...t),this._logHandler(this,jt.ERROR,...t)}}const c2=(e,t)=>t.some(n=>e instanceof n);let $v,Yv;function h2(){return $v||($v=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function f2(){return Yv||(Yv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const g1=new WeakMap,Rg=new WeakMap,p1=new WeakMap,ng=new WeakMap,dp=new WeakMap;function d2(e){const t=new Promise((n,s)=>{const a=()=>{e.removeEventListener("success",u),e.removeEventListener("error",c)},u=()=>{n(Ds(e.result)),a()},c=()=>{s(e.error),a()};e.addEventListener("success",u),e.addEventListener("error",c)});return t.then(n=>{n instanceof IDBCursor&&g1.set(n,e)}).catch(()=>{}),dp.set(t,e),t}function m2(e){if(Rg.has(e))return;const t=new Promise((n,s)=>{const a=()=>{e.removeEventListener("complete",u),e.removeEventListener("error",c),e.removeEventListener("abort",c)},u=()=>{n(),a()},c=()=>{s(e.error||new DOMException("AbortError","AbortError")),a()};e.addEventListener("complete",u),e.addEventListener("error",c),e.addEventListener("abort",c)});Rg.set(e,t)}let xg={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Rg.get(e);if(t==="objectStoreNames")return e.objectStoreNames||p1.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ds(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function g2(e){xg=e(xg)}function p2(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const s=e.call(ig(this),t,...n);return p1.set(s,t.sort?t.sort():[t]),Ds(s)}:f2().includes(e)?function(...t){return e.apply(ig(this),t),Ds(g1.get(this))}:function(...t){return Ds(e.apply(ig(this),t))}}function y2(e){return typeof e=="function"?p2(e):(e instanceof IDBTransaction&&m2(e),c2(e,h2())?new Proxy(e,xg):e)}function Ds(e){if(e instanceof IDBRequest)return d2(e);if(ng.has(e))return ng.get(e);const t=y2(e);return t!==e&&(ng.set(e,t),dp.set(t,e)),t}const ig=e=>dp.get(e);function _2(e,t,{blocked:n,upgrade:s,blocking:a,terminated:u}={}){const c=indexedDB.open(e,t),d=Ds(c);return s&&c.addEventListener("upgradeneeded",g=>{s(Ds(c.result),g.oldVersion,g.newVersion,Ds(c.transaction),g)}),n&&c.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),d.then(g=>{u&&g.addEventListener("close",()=>u()),a&&g.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const v2=["get","getKey","getAll","getAllKeys","count"],E2=["put","add","delete","clear"],rg=new Map;function Xv(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(rg.get(t))return rg.get(t);const n=t.replace(/FromIndex$/,""),s=t!==n,a=E2.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||v2.includes(n)))return;const u=async function(c,...d){const g=this.transaction(c,a?"readwrite":"readonly");let p=g.store;return s&&(p=p.index(d.shift())),(await Promise.all([p[n](...d),a&&g.done]))[0]};return rg.set(t,u),u}g2(e=>({...e,get:(t,n,s)=>Xv(t,n)||e.get(t,n,s),has:(t,n)=>!!Xv(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(S2(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function S2(e){return e.getComponent()?.type==="VERSION"}const Ig="@firebase/app",Kv="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jr=new fp("@firebase/app"),w2="@firebase/app-compat",b2="@firebase/analytics-compat",A2="@firebase/analytics",R2="@firebase/app-check-compat",x2="@firebase/app-check",I2="@firebase/auth",C2="@firebase/auth-compat",N2="@firebase/database",D2="@firebase/data-connect",M2="@firebase/database-compat",O2="@firebase/functions",V2="@firebase/functions-compat",k2="@firebase/installations",P2="@firebase/installations-compat",L2="@firebase/messaging",U2="@firebase/messaging-compat",z2="@firebase/performance",B2="@firebase/performance-compat",H2="@firebase/remote-config",q2="@firebase/remote-config-compat",j2="@firebase/storage",F2="@firebase/storage-compat",G2="@firebase/firestore",$2="@firebase/ai",Y2="@firebase/firestore-compat",X2="firebase",K2="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cg="[DEFAULT]",Q2={[Ig]:"fire-core",[w2]:"fire-core-compat",[A2]:"fire-analytics",[b2]:"fire-analytics-compat",[x2]:"fire-app-check",[R2]:"fire-app-check-compat",[I2]:"fire-auth",[C2]:"fire-auth-compat",[N2]:"fire-rtdb",[D2]:"fire-data-connect",[M2]:"fire-rtdb-compat",[O2]:"fire-fn",[V2]:"fire-fn-compat",[k2]:"fire-iid",[P2]:"fire-iid-compat",[L2]:"fire-fcm",[U2]:"fire-fcm-compat",[z2]:"fire-perf",[B2]:"fire-perf-compat",[H2]:"fire-rc",[q2]:"fire-rc-compat",[j2]:"fire-gcs",[F2]:"fire-gcs-compat",[G2]:"fire-fst",[Y2]:"fire-fst-compat",[$2]:"fire-vertex","fire-js":"fire-js",[X2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef=new Map,Z2=new Map,Ng=new Map;function Qv(e,t){try{e.container.addComponent(t)}catch(n){jr.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Xo(e){const t=e.name;if(Ng.has(t))return jr.debug(`There were multiple attempts to register component ${t}.`),!1;Ng.set(t,e);for(const n of ef.values())Qv(n,e);for(const n of Z2.values())Qv(n,e);return!0}function mp(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ri(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ms=new Zu("app","Firebase",W2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(t,n,s){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Na("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol=K2;function y1(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const s={name:Cg,automaticDataCollectionEnabled:!0,...t},a=s.name;if(typeof a!="string"||!a)throw Ms.create("bad-app-name",{appName:String(a)});if(n||(n=h1()),!n)throw Ms.create("no-options");const u=ef.get(a);if(u){if(Ca(n,u.options)&&Ca(s,u.config))return u;throw Ms.create("duplicate-app",{appName:a})}const c=new s2(a);for(const g of Ng.values())c.addComponent(g);const d=new J2(n,s,c);return ef.set(a,d),d}function _1(e=Cg){const t=ef.get(e);if(!t&&e===Cg&&h1())return y1();if(!t)throw Ms.create("no-app",{appName:e});return t}function Os(e,t,n){let s=Q2[e]??e;n&&(s+=`-${n}`);const a=s.match(/\s|\//),u=t.match(/\s|\//);if(a||u){const c=[`Unable to register library "${s}" with version "${t}":`];a&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&u&&c.push("and"),u&&c.push(`version name "${t}" contains illegal characters (whitespace or "/")`),jr.warn(c.join(" "));return}Xo(new Na(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="firebase-heartbeat-database",ex=1,Ou="firebase-heartbeat-store";let sg=null;function v1(){return sg||(sg=_2(tx,ex,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Ou)}catch(n){console.warn(n)}}}}).catch(e=>{throw Ms.create("idb-open",{originalErrorMessage:e.message})})),sg}async function nx(e){try{const n=(await v1()).transaction(Ou),s=await n.objectStore(Ou).get(E1(e));return await n.done,s}catch(t){if(t instanceof Kr)jr.warn(t.message);else{const n=Ms.create("idb-get",{originalErrorMessage:t?.message});jr.warn(n.message)}}}async function Zv(e,t){try{const s=(await v1()).transaction(Ou,"readwrite");await s.objectStore(Ou).put(t,E1(e)),await s.done}catch(n){if(n instanceof Kr)jr.warn(n.message);else{const s=Ms.create("idb-set",{originalErrorMessage:n?.message});jr.warn(s.message)}}}function E1(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=1024,rx=30;class sx{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ox(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Wv();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>rx){const a=lx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){jr.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Wv(),{heartbeatsToSend:n,unsentEntries:s}=ax(this._heartbeatsCache.heartbeats),a=tf(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return jr.warn(t),""}}}function Wv(){return new Date().toISOString().substring(0,10)}function ax(e,t=ix){const n=[];let s=e.slice();for(const a of e){const u=n.find(c=>c.agent===a.agent);if(u){if(u.dates.push(a.date),Jv(n)>t){u.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),Jv(n)>t){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class ox{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return YR()?XR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await nx(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Zv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const s=await this.read();return Zv(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function Jv(e){return tf(JSON.stringify({version:2,heartbeats:e})).length}function lx(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let s=1;s<e.length;s++)e[s].date<n&&(n=e[s].date,t=s);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(e){Xo(new Na("platform-logger",t=>new T2(t),"PRIVATE")),Xo(new Na("heartbeat",t=>new sx(t),"PRIVATE")),Os(Ig,Kv,e),Os(Ig,Kv,"esm2020"),Os("fire-js","")}ux("");function T1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cx=T1,S1=new Zu("auth","Firebase",T1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nf=new fp("@firebase/auth");function hx(e,...t){nf.logLevel<=jt.WARN&&nf.warn(`Auth (${ol}): ${e}`,...t)}function Bh(e,...t){nf.logLevel<=jt.ERROR&&nf.error(`Auth (${ol}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ur(e,...t){throw pp(e,...t)}function Di(e,...t){return pp(e,...t)}function gp(e,t,n){const s={...cx(),[t]:n};return new Zu("auth","Firebase",s).create(t,{appName:e.name})}function Ra(e){return gp(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fx(e,t,n){const s=n;if(!(t instanceof s))throw s.name!==t.constructor.name&&ur(e,"argument-error"),gp(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function pp(e,...t){if(typeof e!="string"){const n=t[0],s=[...t.slice(1)];return s[0]&&(s[0].appName=e.name),e._errorFactory.create(n,...s)}return S1.create(e,...t)}function Mt(e,t,...n){if(!e)throw pp(t,...n)}function zr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Bh(t),new Error(t)}function Fr(e,t){e||zr(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(){return typeof self<"u"&&self.location?.href||""}function dx(){return tE()==="http:"||tE()==="https:"}function tE(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dx()||jR()||"connection"in navigator)?navigator.onLine:!0}function gx(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(t,n){this.shortDelay=t,this.longDelay=n,Fr(n>t,"Short delay should be less than long delay!"),this.isMobile=BR()||FR()}get(){return mx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(e,t){Fr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{static initialize(t,n,s){this.fetchImpl=t,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;zr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;zr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;zr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],_x=new Ju(3e4,6e4);function _p(e,t){return e.tenantId&&!t.tenantId?{...t,tenantId:e.tenantId}:t}async function ll(e,t,n,s,a={}){return b1(e,a,async()=>{let u={},c={};s&&(t==="GET"?c=s:u={body:JSON.stringify(s)});const d=Wu({key:e.config.apiKey,...c}).slice(1),g=await e._getAdditionalHeaders();g["Content-Type"]="application/json",e.languageCode&&(g["X-Firebase-Locale"]=e.languageCode);const p={method:t,headers:g,...u};return qR()||(p.referrerPolicy="no-referrer"),e.emulatorConfig&&al(e.emulatorConfig.host)&&(p.credentials="include"),w1.fetch()(await A1(e,e.config.apiHost,n,d),p)})}async function b1(e,t,n){e._canInitEmulator=!1;const s={...px,...t};try{const a=new Ex(e),u=await Promise.race([n(),a.promise]);a.clearNetworkTimeout();const c=await u.json();if("needConfirmation"in c)throw Ah(e,"account-exists-with-different-credential",c);if(u.ok&&!("errorMessage"in c))return c;{const d=u.ok?c.errorMessage:c.error.message,[g,p]=d.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ah(e,"credential-already-in-use",c);if(g==="EMAIL_EXISTS")throw Ah(e,"email-already-in-use",c);if(g==="USER_DISABLED")throw Ah(e,"user-disabled",c);const y=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw gp(e,y,p);ur(e,y)}}catch(a){if(a instanceof Kr)throw a;ur(e,"network-request-failed",{message:String(a)})}}async function vx(e,t,n,s,a={}){const u=await ll(e,t,n,s,a);return"mfaPendingCredential"in u&&ur(e,"multi-factor-auth-required",{_serverResponse:u}),u}async function A1(e,t,n,s){const a=`${t}${n}?${s}`,u=e,c=u.config.emulator?yp(e.config,a):`${e.config.apiScheme}://${a}`;return yx.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(c).toString():c}class Ex{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Di(this.auth,"network-request-failed")),_x.get())})}}function Ah(e,t,n){const s={appName:e.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const a=Di(e,t,s);return a.customData._tokenResponse=n,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tx(e,t){return ll(e,"POST","/v1/accounts:delete",t)}async function rf(e,t){return ll(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Sx(e,t=!1){const n=yi(e),s=await n.getIdToken(t),a=vp(s);Mt(a&&a.exp&&a.auth_time&&a.iat,n.auth,"internal-error");const u=typeof a.firebase=="object"?a.firebase:void 0,c=u?.sign_in_provider;return{claims:a,token:s,authTime:xu(ag(a.auth_time)),issuedAtTime:xu(ag(a.iat)),expirationTime:xu(ag(a.exp)),signInProvider:c||null,signInSecondFactor:u?.sign_in_second_factor||null}}function ag(e){return Number(e)*1e3}function vp(e){const[t,n,s]=e.split(".");if(t===void 0||n===void 0||s===void 0)return Bh("JWT malformed, contained fewer than 3 sections"),null;try{const a=u1(n);return a?JSON.parse(a):(Bh("Failed to decode base64 JWT payload"),null)}catch(a){return Bh("Caught error parsing JWT payload as JSON",a?.toString()),null}}function eE(e){const t=vp(e);return Mt(t,"internal-error"),Mt(typeof t.exp<"u","internal-error"),Mt(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vu(e,t,n=!1){if(n)return t;try{return await t}catch(s){throw s instanceof Kr&&wx(s)&&e.auth.currentUser===e&&await e.auth.signOut(),s}}function wx({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){if(t){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=xu(this.lastLoginAt),this.creationTime=xu(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sf(e){const t=e.auth,n=await e.getIdToken(),s=await Vu(e,rf(t,{idToken:n}));Mt(s?.users.length,t,"internal-error");const a=s.users[0];e._notifyReloadListener(a);const u=a.providerUserInfo?.length?R1(a.providerUserInfo):[],c=Rx(e.providerData,u),d=e.isAnonymous,g=!(e.email&&a.passwordHash)&&!c?.length,p=d?g:!1,y={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new Mg(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(e,y)}async function Ax(e){const t=yi(e);await sf(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Rx(e,t){return[...e.filter(s=>!t.some(a=>a.providerId===s.providerId)),...t]}function R1(e){return e.map(({providerId:t,...n})=>({providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xx(e,t){const n=await b1(e,{},async()=>{const s=Wu({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:a,apiKey:u}=e.config,c=await A1(e,a,"/v1/token",`key=${u}`),d=await e._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:d,body:s};return e.emulatorConfig&&al(e.emulatorConfig.host)&&(g.credentials="include"),w1.fetch()(c,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Ix(e,t){return ll(e,"POST","/v2/accounts:revokeToken",_p(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){Mt(t.idToken,"internal-error"),Mt(typeof t.idToken<"u","internal-error"),Mt(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):eE(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){Mt(t.length!==0,"internal-error");const n=eE(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Mt(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:s,refreshToken:a,expiresIn:u}=await xx(t,n);this.updateTokensAndExpiration(s,a,Number(u))}updateTokensAndExpiration(t,n,s){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(t,n){const{refreshToken:s,accessToken:a,expirationTime:u}=n,c=new Bo;return s&&(Mt(typeof s=="string","internal-error",{appName:t}),c.refreshToken=s),a&&(Mt(typeof a=="string","internal-error",{appName:t}),c.accessToken=a),u&&(Mt(typeof u=="number","internal-error",{appName:t}),c.expirationTime=u),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Bo,this.toJSON())}_performRefresh(){return zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(e,t){Mt(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Ci{constructor({uid:t,auth:n,stsTokenManager:s,...a}){this.providerId="firebase",this.proactiveRefresh=new bx(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Mg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(t){const n=await Vu(this,this.stsTokenManager.getToken(this.auth,t));return Mt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Sx(this,t)}reload(){return Ax(this)}_assign(t){this!==t&&(Mt(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>({...n})),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Ci({...this,auth:t,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(t){Mt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let s=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),s=!0),n&&await sf(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ri(this.auth.app))return Promise.reject(Ra(this.auth));const t=await this.getIdToken();return await Vu(this,Tx(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>({...t})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){const s=n.displayName??void 0,a=n.email??void 0,u=n.phoneNumber??void 0,c=n.photoURL??void 0,d=n.tenantId??void 0,g=n._redirectEventId??void 0,p=n.createdAt??void 0,y=n.lastLoginAt??void 0,{uid:v,emailVerified:S,isAnonymous:b,providerData:k,stsTokenManager:P}=n;Mt(v&&P,t,"internal-error");const U=Bo.fromJSON(this.name,P);Mt(typeof v=="string",t,"internal-error"),Ss(s,t.name),Ss(a,t.name),Mt(typeof S=="boolean",t,"internal-error"),Mt(typeof b=="boolean",t,"internal-error"),Ss(u,t.name),Ss(c,t.name),Ss(d,t.name),Ss(g,t.name),Ss(p,t.name),Ss(y,t.name);const B=new Ci({uid:v,auth:t,email:a,emailVerified:S,displayName:s,isAnonymous:b,photoURL:c,phoneNumber:u,tenantId:d,stsTokenManager:U,createdAt:p,lastLoginAt:y});return k&&Array.isArray(k)&&(B.providerData=k.map(j=>({...j}))),g&&(B._redirectEventId=g),B}static async _fromIdTokenResponse(t,n,s=!1){const a=new Bo;a.updateFromServerResponse(n);const u=new Ci({uid:n.localId,auth:t,stsTokenManager:a,isAnonymous:s});return await sf(u),u}static async _fromGetAccountInfoResponse(t,n,s){const a=n.users[0];Mt(a.localId!==void 0,"internal-error");const u=a.providerUserInfo!==void 0?R1(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!u?.length,d=new Bo;d.updateFromIdToken(s);const g=new Ci({uid:a.localId,auth:t,stsTokenManager:d,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:u,metadata:new Mg(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!u?.length};return Object.assign(g,p),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE=new Map;function Br(e){Fr(e instanceof Function,"Expected a class definition");let t=nE.get(e);return t?(Fr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,nE.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}x1.type="NONE";const iE=x1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hh(e,t,n){return`firebase:${e}:${t}:${n}`}class Ho{constructor(t,n,s){this.persistence=t,this.auth=n,this.userKey=s;const{config:a,name:u}=this.auth;this.fullUserKey=Hh(this.userKey,a.apiKey,u),this.fullPersistenceKey=Hh("persistence",a.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);if(!t)return null;if(typeof t=="string"){const n=await rf(this.auth,{idToken:t}).catch(()=>{});return n?Ci._fromGetAccountInfoResponse(this.auth,n,t):null}return Ci._fromJSON(this.auth,t)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,s="authUser"){if(!n.length)return new Ho(Br(iE),t,s);const a=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let u=a[0]||Br(iE);const c=Hh(s,t.config.apiKey,t.name);let d=null;for(const p of n)try{const y=await p._get(c);if(y){let v;if(typeof y=="string"){const S=await rf(t,{idToken:y}).catch(()=>{});if(!S)break;v=await Ci._fromGetAccountInfoResponse(t,S,y)}else v=Ci._fromJSON(t,y);p!==u&&(d=v),u=p;break}}catch{}const g=a.filter(p=>p._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new Ho(u,t,s):(u=g[0],d&&await u._set(c,d.toJSON()),await Promise.all(n.map(async p=>{if(p!==u)try{await p._remove(c)}catch{}})),new Ho(u,t,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(D1(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(I1(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(O1(t))return"Blackberry";if(V1(t))return"Webos";if(C1(t))return"Safari";if((t.includes("chrome/")||N1(t))&&!t.includes("edge/"))return"Chrome";if(M1(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=e.match(n);if(s?.length===2)return s[1]}return"Other"}function I1(e=vn()){return/firefox\//i.test(e)}function C1(e=vn()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function N1(e=vn()){return/crios\//i.test(e)}function D1(e=vn()){return/iemobile/i.test(e)}function M1(e=vn()){return/android/i.test(e)}function O1(e=vn()){return/blackberry/i.test(e)}function V1(e=vn()){return/webos/i.test(e)}function Ep(e=vn()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Cx(e=vn()){return Ep(e)&&!!window.navigator?.standalone}function Nx(){return GR()&&document.documentMode===10}function k1(e=vn()){return Ep(e)||M1(e)||V1(e)||O1(e)||/windows phone/i.test(e)||D1(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P1(e,t=[]){let n;switch(e){case"Browser":n=rE(vn());break;case"Worker":n=`${rE(vn())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${ol}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const s=u=>new Promise((c,d)=>{try{const g=t(u);c(g)}catch(g){d(g)}});s.onAbort=n,this.queue.push(s);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const s of this.queue)await s(t),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const a of n)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mx(e,t={}){return ll(e,"GET","/v2/passwordPolicy",_p(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=6;class Vx{constructor(t){const n=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Ox,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=t.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=t.forceUpgradeOnSignin??!1,this.schemaVersion=t.schemaVersion}validatePassword(t){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,n),this.validatePasswordCharacterOptions(t,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(t,n){const s=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=t.length>=s),a&&(n.meetsMaxPasswordLength=t.length<=a)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let a=0;a<t.length;a++)s=t.charAt(a),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(t,n,s,a,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(t,n,s,a){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sE(this),this.idTokenSubscription=new sE(this),this.beforeStateQueue=new Dx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=S1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Br(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Ho.create(this,t),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await rf(this,{idToken:t}),s=await Ci._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){if(Ri(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,a=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,c=s?._redirectEventId,d=await this.tryRedirectSignIn(t);(!u||u===c)&&d?.user&&(s=d.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Mt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await sf(t)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=gx()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Ri(this.app))return Promise.reject(Ra(this));const n=t?yi(t):null;return n&&Mt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&Mt(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Ri(this.app)?Promise.reject(Ra(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Ri(this.app)?Promise.reject(Ra(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Br(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Mx(this),n=new Vx(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(t){this._errorFactory=new Zu("auth","Firebase",t())}onAuthStateChanged(t,n,s){return this.registerStateListener(this.authStateSubscription,t,n,s)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,s){return this.registerStateListener(this.idTokenSubscription,t,n,s)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const s=this.onAuthStateChanged(()=>{s(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await Ix(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(t,n){const s=await this.getOrInitRedirectPersistenceManager(n);return t===null?s.removeCurrentUser():s.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Br(t)||this._popupRedirectResolver;Mt(n,this,"argument-error"),this.redirectPersistenceManager=await Ho.create(this,[Br(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===t?this._currentUser:this.redirectUser?._redirectEventId===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=this.currentUser?.uid??null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,s,a){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Mt(d,this,"internal-error"),d.then(()=>{c||u(this.currentUser)}),typeof n=="function"){const g=t.addObserver(n,s,a);return()=>{c=!0,g()}}else{const g=t.addObserver(n);return()=>{c=!0,g()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return Mt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=P1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(t["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){if(Ri(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return t?.error&&hx(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Mf(e){return yi(e)}class sE{constructor(t){this.auth=t,this.observer=null,this.addObserver=JR(n=>this.observer=n)}get next(){return Mt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Px(e){Tp=e}function Lx(e){return Tp.loadJS(e)}function Ux(){return Tp.gapiScript}function zx(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bx(e,t){const n=mp(e,"auth");if(n.isInitialized()){const a=n.getImmediate(),u=n.getOptions();if(Ca(u,t??{}))return a;ur(a,"already-initialized")}return n.initialize({options:t})}function Hx(e,t){const n=t?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Br);t?.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(s,t?.popupRedirectResolver)}function qx(e,t,n){const s=Mf(e);Mt(/^https?:\/\//.test(t),s,"invalid-emulator-scheme");const a=!1,u=L1(t),{host:c,port:d}=jx(t),g=d===null?"":`:${d}`,p={url:`${u}//${c}${g}/`},y=Object.freeze({host:c,port:d,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!s._canInitEmulator){Mt(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Mt(Ca(p,s.config.emulator)&&Ca(y,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=p,s.emulatorConfig=y,s.settings.appVerificationDisabledForTesting=!0,al(c)?(d1(`${u}//${c}${g}`),m1("Auth",!0)):Fx()}function L1(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function jx(e){const t=L1(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(s);if(a){const u=a[1];return{host:u,port:aE(s.substr(u.length+1))}}else{const[u,c]=s.split(":");return{host:u,port:aE(c)}}}function aE(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function Fx(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return zr("not implemented")}_getIdTokenResponse(t){return zr("not implemented")}_linkToIdToken(t,n){return zr("not implemented")}_getReauthenticationResolver(t){return zr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(e,t){return vx(e,"POST","/v1/accounts:signInWithIdp",_p(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx="http://localhost";class Da extends U1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Da(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):ur("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:s,signInMethod:a,...u}=n;if(!s||!a)return null;const c=new Da(s,a);return c.idToken=u.idToken||void 0,c.accessToken=u.accessToken||void 0,c.secret=u.secret,c.nonce=u.nonce,c.pendingToken=u.pendingToken||null,c}_getIdTokenResponse(t){const n=this.buildRequest();return qo(t,n)}_linkToIdToken(t,n){const s=this.buildRequest();return s.idToken=n,qo(t,s)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,qo(t,n)}buildRequest(){const t={requestUri:Gx,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Wu(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sp{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc extends Sp{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends tc{constructor(){super("facebook.com")}static credential(t){return Da._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Rs.credentialFromTaggedObject(t)}static credentialFromError(t){return Rs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Rs.credential(t.oauthAccessToken)}catch{return null}}}Rs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Rs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends tc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Da._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Ur.credentialFromTaggedObject(t)}static credentialFromError(t){return Ur.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:s}=t;if(!n&&!s)return null;try{return Ur.credential(n,s)}catch{return null}}}Ur.GOOGLE_SIGN_IN_METHOD="google.com";Ur.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs extends tc{constructor(){super("github.com")}static credential(t){return Da._fromParams({providerId:xs.PROVIDER_ID,signInMethod:xs.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return xs.credentialFromTaggedObject(t)}static credentialFromError(t){return xs.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return xs.credential(t.oauthAccessToken)}catch{return null}}}xs.GITHUB_SIGN_IN_METHOD="github.com";xs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is extends tc{constructor(){super("twitter.com")}static credential(t,n){return Da._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Is.credentialFromTaggedObject(t)}static credentialFromError(t){return Is.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=t;if(!n||!s)return null;try{return Is.credential(n,s)}catch{return null}}}Is.TWITTER_SIGN_IN_METHOD="twitter.com";Is.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,s,a=!1){const u=await Ci._fromIdTokenResponse(t,s,a),c=oE(s);return new Ko({user:u,providerId:c,_tokenResponse:s,operationType:n})}static async _forOperation(t,n,s){await t._updateTokensIfNecessary(s,!0);const a=oE(s);return new Ko({user:t,providerId:a,_tokenResponse:s,operationType:n})}}function oE(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af extends Kr{constructor(t,n,s,a){super(n.code,n.message),this.operationType=s,this.user=a,Object.setPrototypeOf(this,af.prototype),this.customData={appName:t.name,tenantId:t.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(t,n,s,a){return new af(t,n,s,a)}}function z1(e,t,n,s){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?af._fromErrorAndOperation(e,u,t,s):u})}async function $x(e,t,n=!1){const s=await Vu(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ko._forOperation(e,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yx(e,t,n=!1){const{auth:s}=e;if(Ri(s.app))return Promise.reject(Ra(s));const a="reauthenticate";try{const u=await Vu(e,z1(s,a,t,e),n);Mt(u.idToken,s,"internal-error");const c=vp(u.idToken);Mt(c,s,"internal-error");const{sub:d}=c;return Mt(e.uid===d,s,"user-mismatch"),Ko._forOperation(e,a,u)}catch(u){throw u?.code==="auth/user-not-found"&&ur(s,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xx(e,t,n=!1){if(Ri(e.app))return Promise.reject(Ra(e));const s="signIn",a=await z1(e,s,t),u=await Ko._fromIdTokenResponse(e,s,a);return n||await e._updateCurrentUser(u.user),u}function Kx(e,t,n,s){return yi(e).onIdTokenChanged(t,n,s)}function Qx(e,t,n){return yi(e).beforeAuthStateChanged(t,n)}function Zx(e,t,n,s){return yi(e).onAuthStateChanged(t,n,s)}function Wx(e){return yi(e).signOut()}const of="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(of,"1"),this.storage.removeItem(of),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx=1e3,tI=10;class H1 extends B1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=k1(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),a=this.localCache[n];s!==a&&t(n,a,s)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((c,d,g)=>{this.notifyListeners(c,g)});return}const s=t.key;n?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(s);!n&&this.localCache[s]===c||this.notifyListeners(s,c)},u=this.storage.getItem(s);Nx()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(a,tI):a()}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const a of Array.from(s))a(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:s}),!0)})},Jx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}H1.type="LOCAL";const eI=H1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1 extends B1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}q1.type="SESSION";const j1=q1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(a=>a.isListeningto(t));if(n)return n;const s=new Of(t);return this.receivers.push(s),s}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:s,eventType:a,data:u}=n.data,c=this.handlersMap[a];if(!c?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:a});const d=Array.from(c).map(async p=>p(n.origin,u)),g=await nI(d);n.ports[0].postMessage({status:"done",eventId:s,eventType:a,response:g})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Of.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(e="",t=10){let n="";for(let s=0;s<t;s++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,s=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let u,c;return new Promise((d,g)=>{const p=wp("",20);a.port1.start();const y=setTimeout(()=>{g(new Error("unsupported_event"))},s);c={messageChannel:a,onMessage(v){const S=v;if(S.data.eventId===p)switch(S.data.status){case"ack":clearTimeout(y),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),d(S.data.response);break;default:clearTimeout(y),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:t,eventId:p,data:n},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(){return window}function rI(e){ir().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F1(){return typeof ir().WorkerGlobalScope<"u"&&typeof ir().importScripts=="function"}async function sI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function aI(){return navigator?.serviceWorker?.controller||null}function oI(){return F1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="firebaseLocalStorageDb",lI=1,lf="firebaseLocalStorage",$1="fbase_key";class ec{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Vf(e,t){return e.transaction([lf],t?"readwrite":"readonly").objectStore(lf)}function uI(){const e=indexedDB.deleteDatabase(G1);return new ec(e).toPromise()}function Og(){const e=indexedDB.open(G1,lI);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const s=e.result;try{s.createObjectStore(lf,{keyPath:$1})}catch(a){n(a)}}),e.addEventListener("success",async()=>{const s=e.result;s.objectStoreNames.contains(lf)?t(s):(s.close(),await uI(),t(await Og()))})})}async function lE(e,t,n){const s=Vf(e,!0).put({[$1]:t,value:n});return new ec(s).toPromise()}async function cI(e,t){const n=Vf(e,!1).get(t),s=await new ec(n).toPromise();return s===void 0?null:s.value}function uE(e,t){const n=Vf(e,!0).delete(t);return new ec(n).toPromise()}const hI=800,fI=3;class Y1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Og(),this.db)}async _withRetries(t){let n=0;for(;;)try{const s=await this._openDb();return await t(s)}catch(s){if(n++>fI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return F1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Of._getInstance(oI()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await sI(),!this.activeServiceWorker)return;this.sender=new iI(this.activeServiceWorker);const t=await this.sender._send("ping",{},800);t&&t[0]?.fulfilled&&t[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||aI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Og();return await lE(t,of,"1"),await uE(t,of),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>lE(s,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(s=>cI(s,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>uE(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(a=>{const u=Vf(a,!1).getAll();return new ec(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(t.length!==0)for(const{fbase_key:a,value:u}of t)s.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(u)&&(this.notifyListeners(a,u),n.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!s.has(a)&&(this.notifyListeners(a,null),n.push(a));return n}notifyListeners(t,n){this.localCache[t]=n;const s=this.listeners[t];if(s)for(const a of Array.from(s))a(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Y1.type="LOCAL";const dI=Y1;new Ju(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(e,t){return t?Br(t):(Mt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp extends U1{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return qo(t,this._buildIdpRequest())}_linkToIdToken(t,n){return qo(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return qo(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function mI(e){return Xx(e.auth,new bp(e),e.bypassAuthState)}function gI(e){const{auth:t,user:n}=e;return Mt(n,t,"internal-error"),Yx(n,new bp(e),e.bypassAuthState)}async function pI(e){const{auth:t,user:n}=e;return Mt(n,t,"internal-error"),$x(n,new bp(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(t,n,s,a,u=!1){this.auth=t,this.resolver=s,this.user=a,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:s,postBody:a,tenantId:u,error:c,type:d}=t;if(c){this.reject(c);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(g))}catch(p){this.reject(p)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return mI;case"linkViaPopup":case"linkViaRedirect":return pI;case"reauthViaPopup":case"reauthViaRedirect":return gI;default:ur(this.auth,"internal-error")}}resolve(t){Fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Fr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI=new Ju(2e3,1e4);async function _I(e,t,n){if(Ri(e.app))return Promise.reject(Di(e,"operation-not-supported-in-this-environment"));const s=Mf(e);fx(e,t,Sp);const a=X1(s,n);return new Sa(s,"signInViaPopup",t,a).executeNotNull()}class Sa extends K1{constructor(t,n,s,a,u){super(t,n,a,u),this.provider=s,this.authWindow=null,this.pollId=null,Sa.currentPopupAction&&Sa.currentPopupAction.cancel(),Sa.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return Mt(t,this.auth,"internal-error"),t}async onExecution(){Fr(this.filter.length===1,"Popup operations only handle one event");const t=wp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Di(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Di(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sa.currentPopupAction=null}pollUserCancellation(){const t=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Di(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,yI.get())};t()}}Sa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="pendingRedirect",qh=new Map;class EI extends K1{constructor(t,n,s=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let t=qh.get(this.auth._key());if(!t){try{const s=await TI(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(s)}catch(n){t=()=>Promise.reject(n)}qh.set(this.auth._key(),t)}return this.bypassAuthState||qh.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function TI(e,t){const n=bI(t),s=wI(e);if(!await s._isAvailable())return!1;const a=await s._get(n)==="true";return await s._remove(n),a}function SI(e,t){qh.set(e._key(),t)}function wI(e){return Br(e._redirectPersistence)}function bI(e){return Hh(vI,e.config.apiKey,e.name)}async function AI(e,t,n=!1){if(Ri(e.app))return Promise.reject(Ra(e));const s=Mf(e),a=X1(s,t),c=await new EI(s,a,n).execute();return c&&!n&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,t)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=600*1e3;class xI{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(t,s)&&(n=!0,this.sendToConsumer(t,s),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!II(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){if(t.error&&!Q1(t)){const s=t.error.code?.split("auth/")[1]||"internal-error";n.onError(Di(this.auth,s))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const s=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&s}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=RI&&this.cachedEventUids.clear(),this.cachedEventUids.has(cE(t))}saveEventToCache(t){this.cachedEventUids.add(cE(t)),this.lastProcessedEventTime=Date.now()}}function cE(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function Q1({type:e,error:t}){return e==="unknown"&&t?.code==="auth/no-auth-event"}function II(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Q1(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CI(e,t={}){return ll(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,DI=/^https?/;async function MI(e){if(e.config.emulator)return;const{authorizedDomains:t}=await CI(e);for(const n of t)try{if(OI(n))return}catch{}ur(e,"unauthorized-domain")}function OI(e){const t=Dg(),{protocol:n,hostname:s}=new URL(t);if(e.startsWith("chrome-extension://")){const c=new URL(e);return c.hostname===""&&s===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&c.hostname===s}if(!DI.test(n))return!1;if(NI.test(e))return s===e;const a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=new Ju(3e4,6e4);function hE(){const e=ir().___jsl;if(e?.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function kI(e){return new Promise((t,n)=>{function s(){hE(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{hE(),n(Di(e,"network-request-failed"))},timeout:VI.get()})}if(ir().gapi?.iframes?.Iframe)t(gapi.iframes.getContext());else if(ir().gapi?.load)s();else{const a=zx("iframefcb");return ir()[a]=()=>{gapi.load?s():n(Di(e,"network-request-failed"))},Lx(`${Ux()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw jh=null,t})}let jh=null;function PI(e){return jh=jh||kI(e),jh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=new Ju(5e3,15e3),UI="__/auth/iframe",zI="emulator/auth/iframe",BI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},HI=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qI(e){const t=e.config;Mt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?yp(t,zI):`https://${e.config.authDomain}/${UI}`,s={apiKey:t.apiKey,appName:e.name,v:ol},a=HI.get(e.config.apiHost);a&&(s.eid=a);const u=e._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Wu(s).slice(1)}`}async function jI(e){const t=await PI(e),n=ir().gapi;return Mt(n,e,"internal-error"),t.open({where:document.body,url:qI(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BI,dontclear:!0},s=>new Promise(async(a,u)=>{await s.restyle({setHideOnLeave:!1});const c=Di(e,"network-request-failed"),d=ir().setTimeout(()=>{u(c)},LI.get());function g(){ir().clearTimeout(d),a(s)}s.ping(g).then(g,()=>{u(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FI={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GI=500,$I=600,YI="_blank",XI="http://localhost";class fE{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function KI(e,t,n,s=GI,a=$I){const u=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let d="";const g={...FI,width:s.toString(),height:a.toString(),top:u,left:c},p=vn().toLowerCase();n&&(d=N1(p)?YI:n),I1(p)&&(t=t||XI,g.scrollbars="yes");const y=Object.entries(g).reduce((S,[b,k])=>`${S}${b}=${k},`,"");if(Cx(p)&&d!=="_self")return QI(t||"",d),new fE(null);const v=window.open(t||"",d,y);Mt(v,e,"popup-blocked");try{v.focus()}catch{}return new fE(v)}function QI(e,t){const n=document.createElement("a");n.href=e,n.target=t;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI="__/auth/handler",WI="emulator/auth/handler",JI=encodeURIComponent("fac");async function dE(e,t,n,s,a,u){Mt(e.config.authDomain,e,"auth-domain-config-required"),Mt(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:ol,eventId:a};if(t instanceof Sp){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",WR(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[y,v]of Object.entries({}))c[y]=v}if(t instanceof tc){const y=t.getScopes().filter(v=>v!=="");y.length>0&&(c.scopes=y.join(","))}e.tenantId&&(c.tid=e.tenantId);const d=c;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const g=await e._getAppCheckToken(),p=g?`#${JI}=${encodeURIComponent(g)}`:"";return`${tC(e)}?${Wu(d).slice(1)}${p}`}function tC({config:e}){return e.emulator?yp(e,WI):`https://${e.authDomain}/${ZI}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="webStorageSupport";class eC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=j1,this._completeRedirectFn=AI,this._overrideRedirectResult=SI}async _openPopup(t,n,s,a){Fr(this.eventManagers[t._key()]?.manager,"_initialize() not called before _openPopup()");const u=await dE(t,n,s,Dg(),a);return KI(t,u,wp())}async _openRedirect(t,n,s,a){await this._originValidation(t);const u=await dE(t,n,s,Dg(),a);return rI(u),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:a,promise:u}=this.eventManagers[n];return a?Promise.resolve(a):(Fr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(t);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(t){const n=await jI(t),s=new xI(t);return n.register("authEvent",a=>(Mt(a?.authEvent,t,"invalid-auth-event"),{status:s.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:s},this.iframes[t._key()]=n,s}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(og,{type:og},a=>{const u=a?.[0]?.[og];u!==void 0&&n(!!u),ur(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=MI(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return k1()||C1()||Ep()}}const nC=eC;var mE="@firebase/auth",gE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(s=>{t(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Mt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rC(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sC(e){Xo(new Na("auth",(t,{options:n})=>{const s=t.getProvider("app").getImmediate(),a=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=s.options;Mt(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:c,authDomain:d,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:P1(e)},p=new kx(s,a,u,g);return Hx(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,s)=>{t.getProvider("auth-internal").initialize()})),Xo(new Na("auth-internal",t=>{const n=Mf(t.getProvider("auth").getImmediate());return(s=>new iC(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Os(mE,gE,rC(e)),Os(mE,gE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC=300,oC=f1("authIdTokenMaxAge")||aC;let pE=null;const lC=e=>async t=>{const n=t&&await t.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>oC)return;const a=n?.token;pE!==a&&(pE=a,await fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function uC(e=_1()){const t=mp(e,"auth");if(t.isInitialized())return t.getImmediate();const n=Bx(e,{popupRedirectResolver:nC,persistence:[dI,eI,j1]}),s=f1("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const c=lC(u.toString());Qx(n,c,()=>c(n.currentUser)),Kx(n,d=>c(d))}}const a=c1("auth");return a&&qx(n,`http://${a}`),n}function cC(){return document.getElementsByTagName("head")?.[0]??document}Px({loadJS(e){return new Promise((t,n)=>{const s=document.createElement("script");s.setAttribute("src",e),s.onload=t,s.onerror=a=>{const u=Di("internal-error");u.customData=a,n(u)},s.type="text/javascript",s.charset="UTF-8",cC().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sC("Browser");var hC="firebase",fC="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Os(hC,fC,"app");var yE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vs,Z1;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(N,A){function R(){}R.prototype=A.prototype,N.D=A.prototype,N.prototype=new R,N.prototype.constructor=N,N.C=function(D,O,L){for(var I=Array(arguments.length-2),M=2;M<arguments.length;M++)I[M-2]=arguments[M];return A.prototype[O].apply(D,I)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(N,A,R){R||(R=0);var D=Array(16);if(typeof A=="string")for(var O=0;16>O;++O)D[O]=A.charCodeAt(R++)|A.charCodeAt(R++)<<8|A.charCodeAt(R++)<<16|A.charCodeAt(R++)<<24;else for(O=0;16>O;++O)D[O]=A[R++]|A[R++]<<8|A[R++]<<16|A[R++]<<24;A=N.g[0],R=N.g[1],O=N.g[2];var L=N.g[3],I=A+(L^R&(O^L))+D[0]+3614090360&4294967295;A=R+(I<<7&4294967295|I>>>25),I=L+(O^A&(R^O))+D[1]+3905402710&4294967295,L=A+(I<<12&4294967295|I>>>20),I=O+(R^L&(A^R))+D[2]+606105819&4294967295,O=L+(I<<17&4294967295|I>>>15),I=R+(A^O&(L^A))+D[3]+3250441966&4294967295,R=O+(I<<22&4294967295|I>>>10),I=A+(L^R&(O^L))+D[4]+4118548399&4294967295,A=R+(I<<7&4294967295|I>>>25),I=L+(O^A&(R^O))+D[5]+1200080426&4294967295,L=A+(I<<12&4294967295|I>>>20),I=O+(R^L&(A^R))+D[6]+2821735955&4294967295,O=L+(I<<17&4294967295|I>>>15),I=R+(A^O&(L^A))+D[7]+4249261313&4294967295,R=O+(I<<22&4294967295|I>>>10),I=A+(L^R&(O^L))+D[8]+1770035416&4294967295,A=R+(I<<7&4294967295|I>>>25),I=L+(O^A&(R^O))+D[9]+2336552879&4294967295,L=A+(I<<12&4294967295|I>>>20),I=O+(R^L&(A^R))+D[10]+4294925233&4294967295,O=L+(I<<17&4294967295|I>>>15),I=R+(A^O&(L^A))+D[11]+2304563134&4294967295,R=O+(I<<22&4294967295|I>>>10),I=A+(L^R&(O^L))+D[12]+1804603682&4294967295,A=R+(I<<7&4294967295|I>>>25),I=L+(O^A&(R^O))+D[13]+4254626195&4294967295,L=A+(I<<12&4294967295|I>>>20),I=O+(R^L&(A^R))+D[14]+2792965006&4294967295,O=L+(I<<17&4294967295|I>>>15),I=R+(A^O&(L^A))+D[15]+1236535329&4294967295,R=O+(I<<22&4294967295|I>>>10),I=A+(O^L&(R^O))+D[1]+4129170786&4294967295,A=R+(I<<5&4294967295|I>>>27),I=L+(R^O&(A^R))+D[6]+3225465664&4294967295,L=A+(I<<9&4294967295|I>>>23),I=O+(A^R&(L^A))+D[11]+643717713&4294967295,O=L+(I<<14&4294967295|I>>>18),I=R+(L^A&(O^L))+D[0]+3921069994&4294967295,R=O+(I<<20&4294967295|I>>>12),I=A+(O^L&(R^O))+D[5]+3593408605&4294967295,A=R+(I<<5&4294967295|I>>>27),I=L+(R^O&(A^R))+D[10]+38016083&4294967295,L=A+(I<<9&4294967295|I>>>23),I=O+(A^R&(L^A))+D[15]+3634488961&4294967295,O=L+(I<<14&4294967295|I>>>18),I=R+(L^A&(O^L))+D[4]+3889429448&4294967295,R=O+(I<<20&4294967295|I>>>12),I=A+(O^L&(R^O))+D[9]+568446438&4294967295,A=R+(I<<5&4294967295|I>>>27),I=L+(R^O&(A^R))+D[14]+3275163606&4294967295,L=A+(I<<9&4294967295|I>>>23),I=O+(A^R&(L^A))+D[3]+4107603335&4294967295,O=L+(I<<14&4294967295|I>>>18),I=R+(L^A&(O^L))+D[8]+1163531501&4294967295,R=O+(I<<20&4294967295|I>>>12),I=A+(O^L&(R^O))+D[13]+2850285829&4294967295,A=R+(I<<5&4294967295|I>>>27),I=L+(R^O&(A^R))+D[2]+4243563512&4294967295,L=A+(I<<9&4294967295|I>>>23),I=O+(A^R&(L^A))+D[7]+1735328473&4294967295,O=L+(I<<14&4294967295|I>>>18),I=R+(L^A&(O^L))+D[12]+2368359562&4294967295,R=O+(I<<20&4294967295|I>>>12),I=A+(R^O^L)+D[5]+4294588738&4294967295,A=R+(I<<4&4294967295|I>>>28),I=L+(A^R^O)+D[8]+2272392833&4294967295,L=A+(I<<11&4294967295|I>>>21),I=O+(L^A^R)+D[11]+1839030562&4294967295,O=L+(I<<16&4294967295|I>>>16),I=R+(O^L^A)+D[14]+4259657740&4294967295,R=O+(I<<23&4294967295|I>>>9),I=A+(R^O^L)+D[1]+2763975236&4294967295,A=R+(I<<4&4294967295|I>>>28),I=L+(A^R^O)+D[4]+1272893353&4294967295,L=A+(I<<11&4294967295|I>>>21),I=O+(L^A^R)+D[7]+4139469664&4294967295,O=L+(I<<16&4294967295|I>>>16),I=R+(O^L^A)+D[10]+3200236656&4294967295,R=O+(I<<23&4294967295|I>>>9),I=A+(R^O^L)+D[13]+681279174&4294967295,A=R+(I<<4&4294967295|I>>>28),I=L+(A^R^O)+D[0]+3936430074&4294967295,L=A+(I<<11&4294967295|I>>>21),I=O+(L^A^R)+D[3]+3572445317&4294967295,O=L+(I<<16&4294967295|I>>>16),I=R+(O^L^A)+D[6]+76029189&4294967295,R=O+(I<<23&4294967295|I>>>9),I=A+(R^O^L)+D[9]+3654602809&4294967295,A=R+(I<<4&4294967295|I>>>28),I=L+(A^R^O)+D[12]+3873151461&4294967295,L=A+(I<<11&4294967295|I>>>21),I=O+(L^A^R)+D[15]+530742520&4294967295,O=L+(I<<16&4294967295|I>>>16),I=R+(O^L^A)+D[2]+3299628645&4294967295,R=O+(I<<23&4294967295|I>>>9),I=A+(O^(R|~L))+D[0]+4096336452&4294967295,A=R+(I<<6&4294967295|I>>>26),I=L+(R^(A|~O))+D[7]+1126891415&4294967295,L=A+(I<<10&4294967295|I>>>22),I=O+(A^(L|~R))+D[14]+2878612391&4294967295,O=L+(I<<15&4294967295|I>>>17),I=R+(L^(O|~A))+D[5]+4237533241&4294967295,R=O+(I<<21&4294967295|I>>>11),I=A+(O^(R|~L))+D[12]+1700485571&4294967295,A=R+(I<<6&4294967295|I>>>26),I=L+(R^(A|~O))+D[3]+2399980690&4294967295,L=A+(I<<10&4294967295|I>>>22),I=O+(A^(L|~R))+D[10]+4293915773&4294967295,O=L+(I<<15&4294967295|I>>>17),I=R+(L^(O|~A))+D[1]+2240044497&4294967295,R=O+(I<<21&4294967295|I>>>11),I=A+(O^(R|~L))+D[8]+1873313359&4294967295,A=R+(I<<6&4294967295|I>>>26),I=L+(R^(A|~O))+D[15]+4264355552&4294967295,L=A+(I<<10&4294967295|I>>>22),I=O+(A^(L|~R))+D[6]+2734768916&4294967295,O=L+(I<<15&4294967295|I>>>17),I=R+(L^(O|~A))+D[13]+1309151649&4294967295,R=O+(I<<21&4294967295|I>>>11),I=A+(O^(R|~L))+D[4]+4149444226&4294967295,A=R+(I<<6&4294967295|I>>>26),I=L+(R^(A|~O))+D[11]+3174756917&4294967295,L=A+(I<<10&4294967295|I>>>22),I=O+(A^(L|~R))+D[2]+718787259&4294967295,O=L+(I<<15&4294967295|I>>>17),I=R+(L^(O|~A))+D[9]+3951481745&4294967295,N.g[0]=N.g[0]+A&4294967295,N.g[1]=N.g[1]+(O+(I<<21&4294967295|I>>>11))&4294967295,N.g[2]=N.g[2]+O&4294967295,N.g[3]=N.g[3]+L&4294967295}s.prototype.u=function(N,A){A===void 0&&(A=N.length);for(var R=A-this.blockSize,D=this.B,O=this.h,L=0;L<A;){if(O==0)for(;L<=R;)a(this,N,L),L+=this.blockSize;if(typeof N=="string"){for(;L<A;)if(D[O++]=N.charCodeAt(L++),O==this.blockSize){a(this,D),O=0;break}}else for(;L<A;)if(D[O++]=N[L++],O==this.blockSize){a(this,D),O=0;break}}this.h=O,this.o+=A},s.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var A=1;A<N.length-8;++A)N[A]=0;var R=8*this.o;for(A=N.length-8;A<N.length;++A)N[A]=R&255,R/=256;for(this.u(N),N=Array(16),A=R=0;4>A;++A)for(var D=0;32>D;D+=8)N[R++]=this.g[A]>>>D&255;return N};function u(N,A){var R=d;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=A(N)}function c(N,A){this.h=A;for(var R=[],D=!0,O=N.length-1;0<=O;O--){var L=N[O]|0;D&&L==A||(R[O]=L,D=!1)}this.g=R}var d={};function g(N){return-128<=N&&128>N?u(N,function(A){return new c([A|0],0>A?-1:0)}):new c([N|0],0>N?-1:0)}function p(N){if(isNaN(N)||!isFinite(N))return v;if(0>N)return U(p(-N));for(var A=[],R=1,D=0;N>=R;D++)A[D]=N/R|0,R*=4294967296;return new c(A,0)}function y(N,A){if(N.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(N.charAt(0)=="-")return U(y(N.substring(1),A));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=p(Math.pow(A,8)),D=v,O=0;O<N.length;O+=8){var L=Math.min(8,N.length-O),I=parseInt(N.substring(O,O+L),A);8>L?(L=p(Math.pow(A,L)),D=D.j(L).add(p(I))):(D=D.j(R),D=D.add(p(I)))}return D}var v=g(0),S=g(1),b=g(16777216);e=c.prototype,e.m=function(){if(P(this))return-U(this).m();for(var N=0,A=1,R=0;R<this.g.length;R++){var D=this.i(R);N+=(0<=D?D:4294967296+D)*A,A*=4294967296}return N},e.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(k(this))return"0";if(P(this))return"-"+U(this).toString(N);for(var A=p(Math.pow(N,6)),R=this,D="";;){var O=F(R,A).g;R=B(R,O.j(A));var L=((0<R.g.length?R.g[0]:R.h)>>>0).toString(N);if(R=O,k(R))return L+D;for(;6>L.length;)L="0"+L;D=L+D}},e.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function k(N){if(N.h!=0)return!1;for(var A=0;A<N.g.length;A++)if(N.g[A]!=0)return!1;return!0}function P(N){return N.h==-1}e.l=function(N){return N=B(this,N),P(N)?-1:k(N)?0:1};function U(N){for(var A=N.g.length,R=[],D=0;D<A;D++)R[D]=~N.g[D];return new c(R,~N.h).add(S)}e.abs=function(){return P(this)?U(this):this},e.add=function(N){for(var A=Math.max(this.g.length,N.g.length),R=[],D=0,O=0;O<=A;O++){var L=D+(this.i(O)&65535)+(N.i(O)&65535),I=(L>>>16)+(this.i(O)>>>16)+(N.i(O)>>>16);D=I>>>16,L&=65535,I&=65535,R[O]=I<<16|L}return new c(R,R[R.length-1]&-2147483648?-1:0)};function B(N,A){return N.add(U(A))}e.j=function(N){if(k(this)||k(N))return v;if(P(this))return P(N)?U(this).j(U(N)):U(U(this).j(N));if(P(N))return U(this.j(U(N)));if(0>this.l(b)&&0>N.l(b))return p(this.m()*N.m());for(var A=this.g.length+N.g.length,R=[],D=0;D<2*A;D++)R[D]=0;for(D=0;D<this.g.length;D++)for(var O=0;O<N.g.length;O++){var L=this.i(D)>>>16,I=this.i(D)&65535,M=N.i(O)>>>16,et=N.i(O)&65535;R[2*D+2*O]+=I*et,j(R,2*D+2*O),R[2*D+2*O+1]+=L*et,j(R,2*D+2*O+1),R[2*D+2*O+1]+=I*M,j(R,2*D+2*O+1),R[2*D+2*O+2]+=L*M,j(R,2*D+2*O+2)}for(D=0;D<A;D++)R[D]=R[2*D+1]<<16|R[2*D];for(D=A;D<2*A;D++)R[D]=0;return new c(R,0)};function j(N,A){for(;(N[A]&65535)!=N[A];)N[A+1]+=N[A]>>>16,N[A]&=65535,A++}function X(N,A){this.g=N,this.h=A}function F(N,A){if(k(A))throw Error("division by zero");if(k(N))return new X(v,v);if(P(N))return A=F(U(N),A),new X(U(A.g),U(A.h));if(P(A))return A=F(N,U(A)),new X(U(A.g),A.h);if(30<N.g.length){if(P(N)||P(A))throw Error("slowDivide_ only works with positive integers.");for(var R=S,D=A;0>=D.l(N);)R=at(R),D=at(D);var O=Z(R,1),L=Z(D,1);for(D=Z(D,2),R=Z(R,2);!k(D);){var I=L.add(D);0>=I.l(N)&&(O=O.add(R),L=I),D=Z(D,1),R=Z(R,1)}return A=B(N,O.j(A)),new X(O,A)}for(O=v;0<=N.l(A);){for(R=Math.max(1,Math.floor(N.m()/A.m())),D=Math.ceil(Math.log(R)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),L=p(R),I=L.j(A);P(I)||0<I.l(N);)R-=D,L=p(R),I=L.j(A);k(L)&&(L=S),O=O.add(L),N=B(N,I)}return new X(O,N)}e.A=function(N){return F(this,N).h},e.and=function(N){for(var A=Math.max(this.g.length,N.g.length),R=[],D=0;D<A;D++)R[D]=this.i(D)&N.i(D);return new c(R,this.h&N.h)},e.or=function(N){for(var A=Math.max(this.g.length,N.g.length),R=[],D=0;D<A;D++)R[D]=this.i(D)|N.i(D);return new c(R,this.h|N.h)},e.xor=function(N){for(var A=Math.max(this.g.length,N.g.length),R=[],D=0;D<A;D++)R[D]=this.i(D)^N.i(D);return new c(R,this.h^N.h)};function at(N){for(var A=N.g.length+1,R=[],D=0;D<A;D++)R[D]=N.i(D)<<1|N.i(D-1)>>>31;return new c(R,N.h)}function Z(N,A){var R=A>>5;A%=32;for(var D=N.g.length-R,O=[],L=0;L<D;L++)O[L]=0<A?N.i(L+R)>>>A|N.i(L+R+1)<<32-A:N.i(L+R);return new c(O,N.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,Z1=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=y,Vs=c}).apply(typeof yE<"u"?yE:typeof self<"u"?self:typeof window<"u"?window:{});var Rh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var W1,vu,J1,Fh,Vg,tS,eS,nS;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,E){return h==Array.prototype||h==Object.prototype||(h[_]=E.value),h};function n(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Rh=="object"&&Rh];for(var _=0;_<h.length;++_){var E=h[_];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=n(this);function a(h,_){if(_)t:{var E=s;h=h.split(".");for(var x=0;x<h.length-1;x++){var K=h[x];if(!(K in E))break t;E=E[K]}h=h[h.length-1],x=E[h],_=_(x),_!=x&&_!=null&&t(E,h,{configurable:!0,writable:!0,value:_})}}function u(h,_){h instanceof String&&(h+="");var E=0,x=!1,K={next:function(){if(!x&&E<h.length){var ot=E++;return{value:_(ot,h[ot]),done:!1}}return x=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}a("Array.prototype.values",function(h){return h||function(){return u(this,function(_,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},d=this||self;function g(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function p(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function y(h,_,E){return h.call.apply(h.bind,arguments)}function v(h,_,E){if(!h)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,x),h.apply(_,K)}}return function(){return h.apply(_,arguments)}}function S(h,_,E){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,S.apply(null,arguments)}function b(h,_){var E=Array.prototype.slice.call(arguments,1);return function(){var x=E.slice();return x.push.apply(x,arguments),h.apply(this,x)}}function k(h,_){function E(){}E.prototype=_.prototype,h.aa=_.prototype,h.prototype=new E,h.prototype.constructor=h,h.Qb=function(x,K,ot){for(var pt=Array(arguments.length-2),Yt=2;Yt<arguments.length;Yt++)pt[Yt-2]=arguments[Yt];return _.prototype[K].apply(x,pt)}}function P(h){const _=h.length;if(0<_){const E=Array(_);for(let x=0;x<_;x++)E[x]=h[x];return E}return[]}function U(h,_){for(let E=1;E<arguments.length;E++){const x=arguments[E];if(g(x)){const K=h.length||0,ot=x.length||0;h.length=K+ot;for(let pt=0;pt<ot;pt++)h[K+pt]=x[pt]}else h.push(x)}}class B{constructor(_,E){this.i=_,this.j=E,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function j(h){return/^[\s\xa0]*$/.test(h)}function X(){var h=d.navigator;return h&&(h=h.userAgent)?h:""}function F(h){return F[" "](h),h}F[" "]=function(){};var at=X().indexOf("Gecko")!=-1&&!(X().toLowerCase().indexOf("webkit")!=-1&&X().indexOf("Edge")==-1)&&!(X().indexOf("Trident")!=-1||X().indexOf("MSIE")!=-1)&&X().indexOf("Edge")==-1;function Z(h,_,E){for(const x in h)_.call(E,h[x],x,h)}function N(h,_){for(const E in h)_.call(void 0,h[E],E,h)}function A(h){const _={};for(const E in h)_[E]=h[E];return _}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(h,_){let E,x;for(let K=1;K<arguments.length;K++){x=arguments[K];for(E in x)h[E]=x[E];for(let ot=0;ot<R.length;ot++)E=R[ot],Object.prototype.hasOwnProperty.call(x,E)&&(h[E]=x[E])}}function O(h){var _=1;h=h.split(":");const E=[];for(;0<_&&h.length;)E.push(h.shift()),_--;return h.length&&E.push(h.join(":")),E}function L(h){d.setTimeout(()=>{throw h},0)}function I(){var h=Y;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class M{constructor(){this.h=this.g=null}add(_,E){const x=et.get();x.set(_,E),this.h?this.h.next=x:this.g=x,this.h=x}}var et=new B(()=>new V,h=>h.reset());class V{constructor(){this.next=this.g=this.h=null}set(_,E){this.h=_,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let G,tt=!1,Y=new M,C=()=>{const h=d.Promise.resolve(void 0);G=()=>{h.then(q)}};var q=()=>{for(var h;h=I();){try{h.h.call(h.g)}catch(E){L(E)}var _=et;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}tt=!1};function J(){this.s=this.s,this.C=this.C}J.prototype.s=!1,J.prototype.ma=function(){this.s||(this.s=!0,this.N())},J.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function rt(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}rt.prototype.h=function(){this.defaultPrevented=!0};var ht=(function(){if(!d.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const E=()=>{};d.addEventListener("test",E,_),d.removeEventListener("test",E,_)}catch{}return h})();function yt(h,_){if(rt.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var E=this.type=h.type,x=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(at){t:{try{F(_.nodeName);var K=!0;break t}catch{}K=!1}K||(_=null)}}else E=="mouseover"?_=h.fromElement:E=="mouseout"&&(_=h.toElement);this.relatedTarget=_,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:_t[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&yt.aa.h.call(this)}}k(yt,rt);var _t={2:"touch",3:"pen",4:"mouse"};yt.prototype.h=function(){yt.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var Nt="closure_listenable_"+(1e6*Math.random()|0),At=0;function Zt(h,_,E,x,K){this.listener=h,this.proxy=null,this.src=_,this.type=E,this.capture=!!x,this.ha=K,this.key=++At,this.da=this.fa=!1}function $t(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Ae(h){this.src=h,this.g={},this.h=0}Ae.prototype.add=function(h,_,E,x,K){var ot=h.toString();h=this.g[ot],h||(h=this.g[ot]=[],this.h++);var pt=ze(h,_,x,K);return-1<pt?(_=h[pt],E||(_.fa=!1)):(_=new Zt(_,this.src,ot,!!x,K),_.fa=E,h.push(_)),_};function Ne(h,_){var E=_.type;if(E in h.g){var x=h.g[E],K=Array.prototype.indexOf.call(x,_,void 0),ot;(ot=0<=K)&&Array.prototype.splice.call(x,K,1),ot&&($t(_),h.g[E].length==0&&(delete h.g[E],h.h--))}}function ze(h,_,E,x){for(var K=0;K<h.length;++K){var ot=h[K];if(!ot.da&&ot.listener==_&&ot.capture==!!E&&ot.ha==x)return K}return-1}var De="closure_lm_"+(1e6*Math.random()|0),fe={};function Tn(h,_,E,x,K){if(Array.isArray(_)){for(var ot=0;ot<_.length;ot++)Tn(h,_[ot],E,x,K);return null}return E=_i(E),h&&h[Nt]?h.K(_,E,p(x)?!!x.capture:!1,K):Lt(h,_,E,!1,x,K)}function Lt(h,_,E,x,K,ot){if(!_)throw Error("Invalid event type");var pt=p(K)?!!K.capture:!!K,Yt=Un(h);if(Yt||(h[De]=Yt=new Ae(h)),E=Yt.add(_,E,x,pt,ot),E.proxy)return E;if(x=wt(),E.proxy=x,x.src=h,x.listener=E,h.addEventListener)ht||(K=pt),K===void 0&&(K=!1),h.addEventListener(_.toString(),x,K);else if(h.attachEvent)h.attachEvent(Ln(_.toString()),x);else if(h.addListener&&h.removeListener)h.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return E}function wt(){function h(E){return _.call(h.src,h.listener,E)}const _=Vi;return h}function Be(h,_,E,x,K){if(Array.isArray(_))for(var ot=0;ot<_.length;ot++)Be(h,_[ot],E,x,K);else x=p(x)?!!x.capture:!!x,E=_i(E),h&&h[Nt]?(h=h.i,_=String(_).toString(),_ in h.g&&(ot=h.g[_],E=ze(ot,E,x,K),-1<E&&($t(ot[E]),Array.prototype.splice.call(ot,E,1),ot.length==0&&(delete h.g[_],h.h--)))):h&&(h=Un(h))&&(_=h.g[_.toString()],h=-1,_&&(h=ze(_,E,x,K)),(E=-1<h?_[h]:null)&&Nn(E))}function Nn(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[Nt])Ne(_.i,h);else{var E=h.type,x=h.proxy;_.removeEventListener?_.removeEventListener(E,x,h.capture):_.detachEvent?_.detachEvent(Ln(E),x):_.addListener&&_.removeListener&&_.removeListener(x),(E=Un(_))?(Ne(E,h),E.h==0&&(E.src=null,_[De]=null)):$t(h)}}}function Ln(h){return h in fe?fe[h]:fe[h]="on"+h}function Vi(h,_){if(h.da)h=!0;else{_=new yt(_,this);var E=h.listener,x=h.ha||h.src;h.fa&&Nn(h),h=E.call(x,_)}return h}function Un(h){return h=h[De],h instanceof Ae?h:null}var Sn="__closure_events_fn_"+(1e9*Math.random()>>>0);function _i(h){return typeof h=="function"?h:(h[Sn]||(h[Sn]=function(_){return h.handleEvent(_)}),h[Sn])}function te(){J.call(this),this.i=new Ae(this),this.M=this,this.F=null}k(te,J),te.prototype[Nt]=!0,te.prototype.removeEventListener=function(h,_,E,x){Be(this,h,_,E,x)};function Bt(h,_){var E,x=h.F;if(x)for(E=[];x;x=x.F)E.push(x);if(h=h.M,x=_.type||_,typeof _=="string")_=new rt(_,h);else if(_ instanceof rt)_.target=_.target||h;else{var K=_;_=new rt(x,h),D(_,K)}if(K=!0,E)for(var ot=E.length-1;0<=ot;ot--){var pt=_.g=E[ot];K=Me(pt,x,!0,_)&&K}if(pt=_.g=h,K=Me(pt,x,!0,_)&&K,K=Me(pt,x,!1,_)&&K,E)for(ot=0;ot<E.length;ot++)pt=_.g=E[ot],K=Me(pt,x,!1,_)&&K}te.prototype.N=function(){if(te.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var E=h.g[_],x=0;x<E.length;x++)$t(E[x]);delete h.g[_],h.h--}}this.F=null},te.prototype.K=function(h,_,E,x){return this.i.add(String(h),_,!1,E,x)},te.prototype.L=function(h,_,E,x){return this.i.add(String(h),_,!0,E,x)};function Me(h,_,E,x){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var K=!0,ot=0;ot<_.length;++ot){var pt=_[ot];if(pt&&!pt.da&&pt.capture==E){var Yt=pt.listener,qe=pt.ha||pt.src;pt.fa&&Ne(h.i,pt),K=Yt.call(qe,x)!==!1&&K}}return K&&!x.defaultPrevented}function ge(h,_,E){if(typeof h=="function")E&&(h=S(h,E));else if(h&&typeof h.handleEvent=="function")h=S(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:d.setTimeout(h,_||0)}function ki(h){h.g=ge(()=>{h.g=null,h.i&&(h.i=!1,ki(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Oe extends J{constructor(_,E){super(),this.m=_,this.l=E,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:ki(this)}N(){super.N(),this.g&&(d.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xe(h){J.call(this),this.h=h,this.g={}}k(Xe,J);var wn=[];function bn(h){Z(h.g,function(_,E){this.g.hasOwnProperty(E)&&Nn(_)},h),h.g={}}Xe.prototype.N=function(){Xe.aa.N.call(this),bn(this)},Xe.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ke=d.JSON.stringify,sn=d.JSON.parse,An=class{stringify(h){return d.JSON.stringify(h,void 0)}parse(h){return d.JSON.parse(h,void 0)}};function dr(){}dr.prototype.h=null;function mr(h){return h.h||(h.h=h.i())}function vi(){}var zn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zn(){rt.call(this,"d")}k(Zn,rt);function Bn(){rt.call(this,"c")}k(Bn,rt);var Wn={},Fs=null;function Pi(){return Fs=Fs||new te}Wn.La="serverreachability";function Qr(h){rt.call(this,Wn.La,h)}k(Qr,rt);function Li(h){const _=Pi();Bt(_,new Qr(_))}Wn.STAT_EVENT="statevent";function Ba(h,_){rt.call(this,Wn.STAT_EVENT,h),this.stat=_}k(Ba,rt);function ce(h){const _=Pi();Bt(_,new Ba(_,h))}Wn.Ma="timingevent";function Re(h,_){rt.call(this,Wn.Ma,h),this.size=_}k(Re,rt);function Te(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return d.setTimeout(function(){h()},_)}function Dn(){this.g=!0}Dn.prototype.xa=function(){this.g=!1};function Gs(h,_,E,x,K,ot){h.info(function(){if(h.g)if(ot)for(var pt="",Yt=ot.split("&"),qe=0;qe<Yt.length;qe++){var Xt=Yt[qe].split("=");if(1<Xt.length){var Ze=Xt[0];Xt=Xt[1];var je=Ze.split("_");pt=2<=je.length&&je[1]=="type"?pt+(Ze+"="+Xt+"&"):pt+(Ze+"=redacted&")}}else pt=null;else pt=ot;return"XMLHTTP REQ ("+x+") [attempt "+K+"]: "+_+`
`+E+`
`+pt})}function dl(h,_,E,x,K,ot,pt){h.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+K+"]: "+_+`
`+E+`
`+ot+" "+pt})}function Ui(h,_,E,x){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+gr(h,E)+(x?" "+x:"")})}function Ha(h,_){h.info(function(){return"TIMEOUT: "+_})}Dn.prototype.info=function(){};function gr(h,_){if(!h.g)return _;if(!_)return null;try{var E=JSON.parse(_);if(E){for(h=0;h<E.length;h++)if(Array.isArray(E[h])){var x=E[h];if(!(2>x.length)){var K=x[1];if(Array.isArray(K)&&!(1>K.length)){var ot=K[0];if(ot!="noop"&&ot!="stop"&&ot!="close")for(var pt=1;pt<K.length;pt++)K[pt]=""}}}}return Ke(E)}catch{return _}}var zi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Jn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ti;function ei(){}k(ei,dr),ei.prototype.g=function(){return new XMLHttpRequest},ei.prototype.i=function(){return{}},ti=new ei;function an(h,_,E,x){this.j=h,this.i=_,this.l=E,this.R=x||1,this.U=new Xe(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pe}function pe(){this.i=null,this.g="",this.h=!1}var $s={},Zr={};function Hn(h,_,E){h.L=1,h.v=Qs(qn(_)),h.m=E,h.P=!0,Ei(h,null)}function Ei(h,_){h.F=Date.now(),pr(h),h.A=qn(h.v);var E=h.A,x=h.R;Array.isArray(x)||(x=[String(x)]),vl(E.i,"t",x),h.C=0,E=h.j.J,h.h=new pe,h.g=Tc(h.j,E?_:null,!h.m),0<h.O&&(h.M=new Oe(S(h.Y,h,h.g),h.O)),_=h.U,E=h.g,x=h.ca;var K="readystatechange";Array.isArray(K)||(K&&(wn[0]=K.toString()),K=wn);for(var ot=0;ot<K.length;ot++){var pt=Tn(E,K[ot],x||_.handleEvent,!1,_.h||_);if(!pt)break;_.g[pt.key]=pt}_=h.H?A(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),Li(),Gs(h.i,h.u,h.A,h.l,h.R,h.m)}an.prototype.ca=function(h){h=h.target;const _=this.M;_&&ai(h)==3?_.j():this.Y(h)},an.prototype.Y=function(h){try{if(h==this.g)t:{const je=ai(this.g);var _=this.g.Ba();const wr=this.g.Z();if(!(3>je)&&(je!=3||this.g&&(this.h.h||this.g.oa()||dc(this.g)))){this.J||je!=4||_==7||(_==8||0>=wr?Li(3):Li(2)),Bi(this);var E=this.g.Z();this.X=E;e:if(Ys(this)){var x=dc(this.g);h="";var K=x.length,ot=ai(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){He(this),ni(this);var pt="";break e}this.h.i=new d.TextDecoder}for(_=0;_<K;_++)this.h.h=!0,h+=this.h.i.decode(x[_],{stream:!(ot&&_==K-1)});x.length=0,this.h.g+=h,this.C=0,pt=this.h.g}else pt=this.g.oa();if(this.o=E==200,dl(this.i,this.u,this.A,this.l,this.R,je,E),this.o){if(this.T&&!this.K){e:{if(this.g){var Yt,qe=this.g;if((Yt=qe.g?qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!j(Yt)){var Xt=Yt;break e}}Xt=null}if(E=Xt)Ui(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hi(this,E);else{this.o=!1,this.s=3,ce(12),He(this),ni(this);break t}}if(this.P){E=!0;let on;for(;!this.J&&this.C<pt.length;)if(on=qa(this,pt),on==Zr){je==4&&(this.s=4,ce(14),E=!1),Ui(this.i,this.l,null,"[Incomplete Response]");break}else if(on==$s){this.s=4,ce(15),Ui(this.i,this.l,pt,"[Invalid Chunk]"),E=!1;break}else Ui(this.i,this.l,on,null),Hi(this,on);if(Ys(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),je!=4||pt.length!=0||this.h.h||(this.s=1,ce(16),E=!1),this.o=this.o&&E,!E)Ui(this.i,this.l,pt,"[Invalid Chunked Response]"),He(this),ni(this);else if(0<pt.length&&!this.W){this.W=!0;var Ze=this.j;Ze.g==this&&Ze.ba&&!Ze.M&&(Ze.j.info("Great, no buffering proxy detected. Bytes received: "+pt.length),ra(Ze),Ze.M=!0,ce(11))}}else Ui(this.i,this.l,pt,null),Hi(this,pt);je==4&&He(this),this.o&&!this.J&&(je==4?_c(this.j,this):(this.o=!1,pr(this)))}else id(this.g),E==400&&0<pt.indexOf("Unknown SID")?(this.s=3,ce(12)):(this.s=0,ce(13)),He(this),ni(this)}}}catch{}finally{}};function Ys(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function qa(h,_){var E=h.C,x=_.indexOf(`
`,E);return x==-1?Zr:(E=Number(_.substring(E,x)),isNaN(E)?$s:(x+=1,x+E>_.length?Zr:(_=_.slice(x,x+E),h.C=x+E,_)))}an.prototype.cancel=function(){this.J=!0,He(this)};function pr(h){h.S=Date.now()+h.I,ja(h,h.I)}function ja(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Te(S(h.ba,h),_)}function Bi(h){h.B&&(d.clearTimeout(h.B),h.B=null)}an.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Ha(this.i,this.A),this.L!=2&&(Li(),ce(17)),He(this),this.s=2,ni(this)):ja(this,this.S-h)};function ni(h){h.j.G==0||h.J||_c(h.j,h)}function He(h){Bi(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,bn(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Hi(h,_){try{var E=h.j;if(E.G!=0&&(E.g==h||ml(E.h,h))){if(!h.K&&ml(E.h,h)&&E.G==3){try{var x=E.Da.g.parse(_)}catch{x=null}if(Array.isArray(x)&&x.length==3){var K=x;if(K[0]==0){t:if(!E.u){if(E.g)if(E.g.F+3e3<h.F)to(E),Wa(E);else break t;bl(E),ce(18)}}else E.za=K[1],0<E.za-E.T&&37500>K[2]&&E.F&&E.v==0&&!E.C&&(E.C=Te(S(E.Za,E),6e3));if(1>=qi(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Sr(E,11)}else if((h.K||E.g==h)&&to(E),!j(_))for(K=E.Da.g.parse(_),_=0;_<K.length;_++){let Xt=K[_];if(E.T=Xt[0],Xt=Xt[1],E.G==2)if(Xt[0]=="c"){E.K=Xt[1],E.ia=Xt[2];const Ze=Xt[3];Ze!=null&&(E.la=Ze,E.j.info("VER="+E.la));const je=Xt[4];je!=null&&(E.Aa=je,E.j.info("SVER="+E.Aa));const wr=Xt[5];wr!=null&&typeof wr=="number"&&0<wr&&(x=1.5*wr,E.L=x,E.j.info("backChannelRequestTimeoutMs_="+x)),x=E;const on=h.g;if(on){const Ki=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ki){var ot=x.h;ot.g||Ki.indexOf("spdy")==-1&&Ki.indexOf("quic")==-1&&Ki.indexOf("h2")==-1||(ot.j=ot.l,ot.g=new Set,ot.h&&(Ga(ot,ot.h),ot.h=null))}if(x.D){const Rl=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;Rl&&(x.ya=Rl,se(x.I,x.D,Rl))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-h.F,E.j.info("Handshake RTT: "+E.R+"ms")),x=E;var pt=h;if(x.qa=Ec(x,x.J?x.ia:null,x.W),pt.K){Rn(x.h,pt);var Yt=pt,qe=x.L;qe&&(Yt.I=qe),Yt.B&&(Bi(Yt),pr(Yt)),x.g=pt}else pc(x);0<E.i.length&&Ja(E)}else Xt[0]!="stop"&&Xt[0]!="close"||Sr(E,7);else E.G==3&&(Xt[0]=="stop"||Xt[0]=="close"?Xt[0]=="stop"?Sr(E,7):Sl(E):Xt[0]!="noop"&&E.l&&E.l.ta(Xt),E.v=0)}}Li(4)}catch{}}var Fa=class{constructor(h,_){this.g=h,this.map=_}};function Ti(h){this.l=h||10,d.PerformanceNavigationTiming?(h=d.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(d.chrome&&d.chrome.loadTimes&&d.chrome.loadTimes()&&d.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wr(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function qi(h){return h.h?1:h.g?h.g.size:0}function ml(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function Ga(h,_){h.g?h.g.add(_):h.h=_}function Rn(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}Ti.prototype.cancel=function(){if(this.i=gl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function gl(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const E of h.g.values())_=_.concat(E.D);return _}return P(h.i)}function Jf(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(g(h)){for(var _=[],E=h.length,x=0;x<E;x++)_.push(h[x]);return _}_=[],E=0;for(x in h)_[E++]=h[x];return _}function $a(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(g(h)||typeof h=="string"){var _=[];h=h.length;for(var E=0;E<h;E++)_.push(E);return _}_=[],E=0;for(const x in h)_[E++]=x;return _}}}function pl(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(g(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var E=$a(h),x=Jf(h),K=x.length,ot=0;ot<K;ot++)_.call(void 0,x[ot],E&&E[ot],h)}var Xs=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function td(h,_){if(h){h=h.split("&");for(var E=0;E<h.length;E++){var x=h[E].indexOf("="),K=null;if(0<=x){var ot=h[E].substring(0,x);K=h[E].substring(x+1)}else ot=h[E];_(ot,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function Ve(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof Ve){this.h=h.h,Ks(this,h.j),this.o=h.o,this.g=h.g,Jr(this,h.s),this.l=h.l;var _=h.i,E=new _r;E.i=_.i,_.g&&(E.g=new Map(_.g),E.h=_.h),yr(this,E),this.m=h.m}else h&&(_=String(h).match(Xs))?(this.h=!1,Ks(this,_[1]||"",!0),this.o=ii(_[2]||""),this.g=ii(_[3]||"",!0),Jr(this,_[4]),this.l=ii(_[5]||"",!0),yr(this,_[6]||"",!0),this.m=ii(_[7]||"")):(this.h=!1,this.i=new _r(null,this.h))}Ve.prototype.toString=function(){var h=[],_=this.j;_&&h.push(Zs(_,yl,!0),":");var E=this.g;return(E||_=="file")&&(h.push("//"),(_=this.o)&&h.push(Zs(_,yl,!0),"@"),h.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&h.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&h.push("/"),h.push(Zs(E,E.charAt(0)=="/"?ed:_l,!0))),(E=this.i.toString())&&h.push("?",E),(E=this.m)&&h.push("#",Zs(E,Ya)),h.join("")};function qn(h){return new Ve(h)}function Ks(h,_,E){h.j=E?ii(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Jr(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function yr(h,_,E){_ instanceof _r?(h.i=_,hc(h.i,h.h)):(E||(_=Zs(_,nd)),h.i=new _r(_,h.h))}function se(h,_,E){h.i.set(_,E)}function Qs(h){return se(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function ii(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Zs(h,_,E){return typeof h=="string"?(h=encodeURI(h).replace(_,cc),E&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function cc(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var yl=/[#\/\?@]/g,_l=/[#\?:]/g,ed=/[#\?]/g,nd=/[#\?@]/g,Ya=/#/g;function _r(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function ri(h){h.g||(h.g=new Map,h.h=0,h.i&&td(h.i,function(_,E){h.add(decodeURIComponent(_.replace(/\+/g," ")),E)}))}e=_r.prototype,e.add=function(h,_){ri(this),this.i=null,h=ji(this,h);var E=this.g.get(h);return E||this.g.set(h,E=[]),E.push(_),this.h+=1,this};function vr(h,_){ri(h),_=ji(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Er(h,_){return ri(h),_=ji(h,_),h.g.has(_)}e.forEach=function(h,_){ri(this),this.g.forEach(function(E,x){E.forEach(function(K){h.call(_,K,x,this)},this)},this)},e.na=function(){ri(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),E=[];for(let x=0;x<_.length;x++){const K=h[x];for(let ot=0;ot<K.length;ot++)E.push(_[x])}return E},e.V=function(h){ri(this);let _=[];if(typeof h=="string")Er(this,h)&&(_=_.concat(this.g.get(ji(this,h))));else{h=Array.from(this.g.values());for(let E=0;E<h.length;E++)_=_.concat(h[E])}return _},e.set=function(h,_){return ri(this),this.i=null,h=ji(this,h),Er(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},e.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function vl(h,_,E){vr(h,_),0<E.length&&(h.i=null,h.g.set(ji(h,_),P(E)),h.h+=E.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var E=0;E<_.length;E++){var x=_[E];const ot=encodeURIComponent(String(x)),pt=this.V(x);for(x=0;x<pt.length;x++){var K=ot;pt[x]!==""&&(K+="="+encodeURIComponent(String(pt[x]))),h.push(K)}}return this.i=h.join("&")};function ji(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function hc(h,_){_&&!h.j&&(ri(h),h.i=null,h.g.forEach(function(E,x){var K=x.toLowerCase();x!=K&&(vr(this,x),vl(this,K,E))},h)),h.j=_}function Ws(h,_){const E=new Dn;if(d.Image){const x=new Image;x.onload=b(si,E,"TestLoadImage: loaded",!0,_,x),x.onerror=b(si,E,"TestLoadImage: error",!1,_,x),x.onabort=b(si,E,"TestLoadImage: abort",!1,_,x),x.ontimeout=b(si,E,"TestLoadImage: timeout",!1,_,x),d.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=h}else _(!1)}function Si(h,_){const E=new Dn,x=new AbortController,K=setTimeout(()=>{x.abort(),si(E,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:x.signal}).then(ot=>{clearTimeout(K),ot.ok?si(E,"TestPingServer: ok",!0,_):si(E,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(K),si(E,"TestPingServer: error",!1,_)})}function si(h,_,E,x,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),x(E)}catch{}}function Js(){this.g=new An}function Fi(h,_,E){const x=E||"";try{pl(h,function(K,ot){let pt=K;p(K)&&(pt=Ke(K)),_.push(x+ot+"="+encodeURIComponent(pt))})}catch(K){throw _.push(x+"type="+encodeURIComponent("_badmap")),K}}function ts(h){this.l=h.Ub||null,this.j=h.eb||!1}k(ts,dr),ts.prototype.g=function(){return new Tr(this.l,this.j)},ts.prototype.i=(function(h){return function(){return h}})({});function Tr(h,_){te.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Tr,te),e=Tr.prototype,e.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,$i(this)},e.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||d).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Gi(this)),this.readyState=0},e.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,$i(this)),this.g&&(this.readyState=3,$i(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof d.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;El(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function El(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}e.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Gi(this):$i(this),this.readyState==3&&El(this)}},e.Ra=function(h){this.g&&(this.response=this.responseText=h,Gi(this))},e.Qa=function(h){this.g&&(this.response=h,Gi(this))},e.ga=function(){this.g&&Gi(this)};function Gi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,$i(h)}e.setRequestHeader=function(h,_){this.u.append(h,_)},e.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var E=_.next();!E.done;)E=E.value,h.push(E[0]+": "+E[1]),E=_.next();return h.join(`\r
`)};function $i(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Tr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Tl(h){let _="";return Z(h,function(E,x){_+=x,_+=":",_+=E,_+=`\r
`}),_}function Qe(h,_,E){t:{for(x in E){var x=!1;break t}x=!0}x||(E=Tl(E),typeof h=="string"?E!=null&&encodeURIComponent(String(E)):se(h,_,E))}function ee(h){te.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(ee,te);var Xa=/^https?$/i,ta=["POST","PUT"];e=ee.prototype,e.Ha=function(h){this.J=h},e.ea=function(h,_,E,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ti.g(),this.v=this.o?mr(this.o):mr(ti),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ot){fc(this,ot);return}if(h=E||"",E=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var K in x)E.set(K,x[K]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const ot of x.keys())E.set(ot,x.get(ot));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(E.keys()).find(ot=>ot.toLowerCase()=="content-type"),K=d.FormData&&h instanceof d.FormData,!(0<=Array.prototype.indexOf.call(ta,_,void 0))||x||K||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ot,pt]of E)this.g.setRequestHeader(ot,pt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ea(this),this.u=!0,this.g.send(h),this.u=!1}catch(ot){fc(this,ot)}};function fc(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,Ka(h),Yi(h)}function Ka(h){h.A||(h.A=!0,Bt(h,"complete"),Bt(h,"error"))}e.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Bt(this,"complete"),Bt(this,"abort"),Yi(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yi(this,!0)),ee.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Qa(this):this.bb())},e.bb=function(){Qa(this)};function Qa(h){if(h.h&&typeof c<"u"&&(!h.v[1]||ai(h)!=4||h.Z()!=2)){if(h.u&&ai(h)==4)ge(h.Ea,0,h);else if(Bt(h,"readystatechange"),ai(h)==4){h.h=!1;try{const pt=h.Z();t:switch(pt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break t;default:_=!1}var E;if(!(E=_)){var x;if(x=pt===0){var K=String(h.D).match(Xs)[1]||null;!K&&d.self&&d.self.location&&(K=d.self.location.protocol.slice(0,-1)),x=!Xa.test(K?K.toLowerCase():"")}E=x}if(E)Bt(h,"complete"),Bt(h,"success");else{h.m=6;try{var ot=2<ai(h)?h.g.statusText:""}catch{ot=""}h.l=ot+" ["+h.Z()+"]",Ka(h)}}finally{Yi(h)}}}}function Yi(h,_){if(h.g){ea(h);const E=h.g,x=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Bt(h,"ready");try{E.onreadystatechange=x}catch{}}}function ea(h){h.I&&(d.clearTimeout(h.I),h.I=null)}e.isActive=function(){return!!this.g};function ai(h){return h.g?h.g.readyState:0}e.Z=function(){try{return 2<ai(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),sn(_)}};function dc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function id(h){const _={};h=(h.g&&2<=ai(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<h.length;x++){if(j(h[x]))continue;var E=O(h[x]);const K=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const ot=_[K]||[];_[K]=ot,ot.push(E)}N(_,function(x){return x.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function na(h,_,E){return E&&E.internalChannelParams&&E.internalChannelParams[h]||_}function Za(h){this.Aa=0,this.i=[],this.j=new Dn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=na("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=na("baseRetryDelayMs",5e3,h),this.cb=na("retryDelaySeedMs",1e4,h),this.Wa=na("forwardChannelMaxRetries",2,h),this.wa=na("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Ti(h&&h.concurrentRequestLimit),this.Da=new Js,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=Za.prototype,e.la=8,e.G=1,e.connect=function(h,_,E,x){ce(0),this.W=h,this.H=_||{},E&&x!==void 0&&(this.H.OSID=E,this.H.OAID=x),this.F=this.X,this.I=Ec(this,null,this.W),Ja(this)};function Sl(h){if(mc(h),h.G==3){var _=h.U++,E=qn(h.I);if(se(E,"SID",h.K),se(E,"RID",_),se(E,"TYPE","terminate"),ia(h,E),_=new an(h,h.j,_),_.L=2,_.v=Qs(qn(E)),E=!1,d.navigator&&d.navigator.sendBeacon)try{E=d.navigator.sendBeacon(_.v.toString(),"")}catch{}!E&&d.Image&&(new Image().src=_.v,E=!0),E||(_.g=Tc(_.j,null),_.g.ea(_.v)),_.F=Date.now(),pr(_)}vc(h)}function Wa(h){h.g&&(ra(h),h.g.cancel(),h.g=null)}function mc(h){Wa(h),h.u&&(d.clearTimeout(h.u),h.u=null),to(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&d.clearTimeout(h.s),h.s=null)}function Ja(h){if(!Wr(h.h)&&!h.s){h.s=!0;var _=h.Ga;G||C(),tt||(G(),tt=!0),Y.add(_,h),h.B=0}}function rd(h,_){return qi(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Te(S(h.Ga,h,_),Al(h,h.B)),h.B++,!0)}e.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const K=new an(this,this.j,h);let ot=this.o;if(this.S&&(ot?(ot=A(ot),D(ot,this.S)):ot=this.S),this.m!==null||this.O||(K.H=ot,ot=null),this.P)t:{for(var _=0,E=0;E<this.i.length;E++){e:{var x=this.i[E];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break e}x=void 0}if(x===void 0)break;if(_+=x,4096<_){_=E;break t}if(_===4096||E===this.i.length-1){_=E+1;break t}}_=1e3}else _=1e3;_=gc(this,K,_),E=qn(this.I),se(E,"RID",h),se(E,"CVER",22),this.D&&se(E,"X-HTTP-Session-Id",this.D),ia(this,E),ot&&(this.O?_="headers="+encodeURIComponent(String(Tl(ot)))+"&"+_:this.m&&Qe(E,this.m,ot)),Ga(this.h,K),this.Ua&&se(E,"TYPE","init"),this.P?(se(E,"$req",_),se(E,"SID","null"),K.T=!0,Hn(K,E,null)):Hn(K,E,_),this.G=2}}else this.G==3&&(h?wl(this,h):this.i.length==0||Wr(this.h)||wl(this))};function wl(h,_){var E;_?E=_.l:E=h.U++;const x=qn(h.I);se(x,"SID",h.K),se(x,"RID",E),se(x,"AID",h.T),ia(h,x),h.m&&h.o&&Qe(x,h.m,h.o),E=new an(h,h.j,E,h.B+1),h.m===null&&(E.H=h.o),_&&(h.i=_.D.concat(h.i)),_=gc(h,E,1e3),E.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),Ga(h.h,E),Hn(E,x,_)}function ia(h,_){h.H&&Z(h.H,function(E,x){se(_,x,E)}),h.l&&pl({},function(E,x){se(_,x,E)})}function gc(h,_,E){E=Math.min(h.i.length,E);var x=h.l?S(h.l.Na,h.l,h):null;t:{var K=h.i;let ot=-1;for(;;){const pt=["count="+E];ot==-1?0<E?(ot=K[0].g,pt.push("ofs="+ot)):ot=0:pt.push("ofs="+ot);let Yt=!0;for(let qe=0;qe<E;qe++){let Xt=K[qe].g;const Ze=K[qe].map;if(Xt-=ot,0>Xt)ot=Math.max(0,K[qe].g-100),Yt=!1;else try{Fi(Ze,pt,"req"+Xt+"_")}catch{x&&x(Ze)}}if(Yt){x=pt.join("&");break t}}}return h=h.i.splice(0,E),_.D=h,x}function pc(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;G||C(),tt||(G(),tt=!0),Y.add(_,h),h.v=0}}function bl(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Te(S(h.Fa,h),Al(h,h.v)),h.v++,!0)}e.Fa=function(){if(this.u=null,yc(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Te(S(this.ab,this),h)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ce(10),Wa(this),yc(this))};function ra(h){h.A!=null&&(d.clearTimeout(h.A),h.A=null)}function yc(h){h.g=new an(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=qn(h.qa);se(_,"RID","rpc"),se(_,"SID",h.K),se(_,"AID",h.T),se(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&se(_,"TO",h.ja),se(_,"TYPE","xmlhttp"),ia(h,_),h.m&&h.o&&Qe(_,h.m,h.o),h.L&&(h.g.I=h.L);var E=h.g;h=h.ia,E.L=1,E.v=Qs(qn(_)),E.m=null,E.P=!0,Ei(E,h)}e.Za=function(){this.C!=null&&(this.C=null,Wa(this),bl(this),ce(19))};function to(h){h.C!=null&&(d.clearTimeout(h.C),h.C=null)}function _c(h,_){var E=null;if(h.g==_){to(h),ra(h),h.g=null;var x=2}else if(ml(h.h,_))E=_.D,Rn(h.h,_),x=1;else return;if(h.G!=0){if(_.o)if(x==1){E=_.m?_.m.length:0,_=Date.now()-_.F;var K=h.B;x=Pi(),Bt(x,new Re(x,E)),Ja(h)}else pc(h);else if(K=_.s,K==3||K==0&&0<_.X||!(x==1&&rd(h,_)||x==2&&bl(h)))switch(E&&0<E.length&&(_=h.h,_.i=_.i.concat(E)),K){case 1:Sr(h,5);break;case 4:Sr(h,10);break;case 3:Sr(h,6);break;default:Sr(h,2)}}}function Al(h,_){let E=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(E*=2),E*_}function Sr(h,_){if(h.j.info("Error code "+_),_==2){var E=S(h.fb,h),x=h.Xa;const K=!x;x=new Ve(x||"//www.google.com/images/cleardot.gif"),d.location&&d.location.protocol=="http"||Ks(x,"https"),Qs(x),K?Ws(x.toString(),E):Si(x.toString(),E)}else ce(2);h.G=0,h.l&&h.l.sa(_),vc(h),mc(h)}e.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ce(2)):(this.j.info("Failed to ping google.com"),ce(1))};function vc(h){if(h.G=0,h.ka=[],h.l){const _=gl(h.h);(_.length!=0||h.i.length!=0)&&(U(h.ka,_),U(h.ka,h.i),h.h.i.length=0,P(h.i),h.i.length=0),h.l.ra()}}function Ec(h,_,E){var x=E instanceof Ve?qn(E):new Ve(E);if(x.g!="")_&&(x.g=_+"."+x.g),Jr(x,x.s);else{var K=d.location;x=K.protocol,_=_?_+"."+K.hostname:K.hostname,K=+K.port;var ot=new Ve(null);x&&Ks(ot,x),_&&(ot.g=_),K&&Jr(ot,K),E&&(ot.l=E),x=ot}return E=h.D,_=h.ya,E&&_&&se(x,E,_),se(x,"VER",h.la),ia(h,x),x}function Tc(h,_,E){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new ee(new ts({eb:E})):new ee(h.pa),_.Ha(h.J),_}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sc(){}e=Sc.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function eo(){}eo.prototype.g=function(h,_){return new xn(h,_)};function xn(h,_){te.call(this),this.g=new Za(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!j(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!j(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new Xi(this)}k(xn,te),xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){Sl(this.g)},xn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var E={};E.__data__=h,h=E}else this.u&&(E={},E.__data__=Ke(h),h=E);_.i.push(new Fa(_.Ya++,h)),_.G==3&&Ja(_)},xn.prototype.N=function(){this.g.l=null,delete this.j,Sl(this.g),delete this.g,xn.aa.N.call(this)};function wc(h){Zn.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){t:{for(const E in _){h=E;break t}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}k(wc,Zn);function bc(){Bn.call(this),this.status=1}k(bc,Bn);function Xi(h){this.g=h}k(Xi,Sc),Xi.prototype.ua=function(){Bt(this.g,"a")},Xi.prototype.ta=function(h){Bt(this.g,new wc(h))},Xi.prototype.sa=function(h){Bt(this.g,new bc)},Xi.prototype.ra=function(){Bt(this.g,"b")},eo.prototype.createWebChannel=eo.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,nS=function(){return new eo},eS=function(){return Pi()},tS=Wn,Vg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},zi.NO_ERROR=0,zi.TIMEOUT=8,zi.HTTP_ERROR=6,Fh=zi,Jn.COMPLETE="complete",J1=Jn,vi.EventType=zn,zn.OPEN="a",zn.CLOSE="b",zn.ERROR="c",zn.MESSAGE="d",te.prototype.listen=te.prototype.K,vu=vi,ee.prototype.listenOnce=ee.prototype.L,ee.prototype.getLastError=ee.prototype.Ka,ee.prototype.getLastErrorCode=ee.prototype.Ba,ee.prototype.getStatus=ee.prototype.Z,ee.prototype.getResponseJson=ee.prototype.Oa,ee.prototype.getResponseText=ee.prototype.oa,ee.prototype.send=ee.prototype.ea,ee.prototype.setWithCredentials=ee.prototype.Ha,W1=ee}).apply(typeof Rh<"u"?Rh:typeof self<"u"?self:typeof window<"u"?window:{});const _E="@firebase/firestore",vE="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}yn.UNAUTHENTICATED=new yn(null),yn.GOOGLE_CREDENTIALS=new yn("google-credentials-uid"),yn.FIRST_PARTY=new yn("first-party-uid"),yn.MOCK_USER=new yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ul="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ma=new fp("@firebase/firestore");function ko(){return Ma.logLevel}function vt(e,...t){if(Ma.logLevel<=jt.DEBUG){const n=t.map(Ap);Ma.debug(`Firestore (${ul}): ${e}`,...n)}}function Gr(e,...t){if(Ma.logLevel<=jt.ERROR){const n=t.map(Ap);Ma.error(`Firestore (${ul}): ${e}`,...n)}}function Qo(e,...t){if(Ma.logLevel<=jt.WARN){const n=t.map(Ap);Ma.warn(`Firestore (${ul}): ${e}`,...n)}}function Ap(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(e,t,n){let s="Unexpected state";typeof t=="string"?s=t:n=t,iS(e,s,n)}function iS(e,t,n){let s=`FIRESTORE (${ul}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw Gr(s),new Error(s)}function ne(e,t,n,s){let a="Unexpected state";typeof n=="string"?a=n:s=n,e||iS(t,a,s)}function Vt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class St extends Kr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class dC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(yn.UNAUTHENTICATED)))}shutdown(){}}class mC{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class gC{constructor(t){this.t=t,this.currentUser=yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){ne(this.o===void 0,42304);let s=this.i;const a=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let u=new ks;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ks,t.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const g=u;t.enqueueRetryable((async()=>{await g.promise,await a(this.currentUser)}))},d=g=>{vt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((g=>d(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(vt("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ks)}}),0),c()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==t?(vt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(ne(typeof s.accessToken=="string",31837,{l:s}),new rS(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return ne(t===null||typeof t=="string",2055,{h:t}),new yn(t)}}class pC{constructor(t,n,s){this.P=t,this.T=n,this.I=s,this.type="FirstParty",this.user=yn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yC{constructor(t,n,s){this.P=t,this.T=n,this.I=s}getToken(){return Promise.resolve(new pC(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(yn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class EE{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class _C{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ri(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){ne(this.o===void 0,3512);const s=u=>{u.error!=null&&vt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.m;return this.m=u.token,vt("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?n(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>s(u)))};const a=u=>{vt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>a(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?a(u):vt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new EE(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(ne(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new EE(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let s=0;s<e;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const a=vC(40);for(let u=0;u<a.length;++u)s.length<20&&a[u]<n&&(s+=t.charAt(a[u]%62))}return s}}function Ft(e,t){return e<t?-1:e>t?1:0}function kg(e,t){const n=Math.min(e.length,t.length);for(let s=0;s<n;s++){const a=e.charAt(s),u=t.charAt(s);if(a!==u)return lg(a)===lg(u)?Ft(a,u):lg(a)?1:-1}return Ft(e.length,t.length)}const EC=55296,TC=57343;function lg(e){const t=e.charCodeAt(0);return t>=EC&&t<=TC}function Zo(e,t,n){return e.length===t.length&&e.every(((s,a)=>n(s,t[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="__name__";class er{constructor(t,n,s){n===void 0?n=0:n>t.length&&Ct(637,{offset:n,range:t.length}),s===void 0?s=t.length-n:s>t.length-n&&Ct(1746,{length:s,range:t.length-n}),this.segments=t,this.offset=n,this.len=s}get length(){return this.len}isEqual(t){return er.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof er?t.forEach((s=>{n.push(s)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,s=this.limit();n<s;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const s=Math.min(t.length,n.length);for(let a=0;a<s;a++){const u=er.compareSegments(t.get(a),n.get(a));if(u!==0)return u}return Ft(t.length,n.length)}static compareSegments(t,n){const s=er.isNumericId(t),a=er.isNumericId(n);return s&&!a?-1:!s&&a?1:s&&a?er.extractNumericId(t).compare(er.extractNumericId(n)):kg(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Vs.fromString(t.substring(4,t.length-2))}}class _e extends er{construct(t,n,s){return new _e(t,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const s of t){if(s.indexOf("//")>=0)throw new St(mt.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((a=>a.length>0)))}return new _e(n)}static emptyPath(){return new _e([])}}const SC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends er{construct(t,n,s){return new fn(t,n,s)}static isValidIdentifier(t){return SC.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===TE}static keyField(){return new fn([TE])}static fromServerFormat(t){const n=[];let s="",a=0;const u=()=>{if(s.length===0)throw new St(mt.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let c=!1;for(;a<t.length;){const d=t[a];if(d==="\\"){if(a+1===t.length)throw new St(mt.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[a+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new St(mt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=g,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(s+=d,a++):(u(),a++)}if(u(),c)throw new St(mt.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new fn(n)}static emptyPath(){return new fn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rt{constructor(t){this.path=t}static fromPath(t){return new Rt(_e.fromString(t))}static fromName(t){return new Rt(_e.fromString(t).popFirst(5))}static empty(){return new Rt(_e.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&_e.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return _e.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Rt(new _e(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wC(e,t,n){if(!n)throw new St(mt.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function bC(e,t,n,s){if(t===!0&&s===!0)throw new St(mt.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function SE(e){if(!Rt.isDocumentKey(e))throw new St(mt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function sS(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function xp(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(s){return s.constructor?s.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":Ct(12329,{type:typeof e})}function ku(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new St(mt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=xp(e);throw new St(mt.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(e,t){const n={typeString:e};return t&&(n.value=t),n}function nc(e,t){if(!sS(e))throw new St(mt.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in t)if(t[s]){const a=t[s].typeString,u="value"in t[s]?{value:t[s].value}:void 0;if(!(s in e)){n=`JSON missing required field: '${s}'`;break}const c=e[s];if(a&&typeof c!==a){n=`JSON field '${s}' must be a ${a}.`;break}if(u!==void 0&&c!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new St(mt.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE=-62135596800,bE=1e6;class de{static now(){return de.fromMillis(Date.now())}static fromDate(t){return de.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),s=Math.floor((t-1e3*n)*bE);return new de(n,s)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new St(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new St(mt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<wE)throw new St(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new St(mt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/bE}_compareTo(t){return this.seconds===t.seconds?Ft(this.nanoseconds,t.nanoseconds):Ft(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:de._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(nc(t,de._jsonSchema))return new de(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-wE;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}de._jsonSchemaVersion="firestore/timestamp/1.0",de._jsonSchema={type:Ue("string",de._jsonSchemaVersion),seconds:Ue("number"),nanoseconds:Ue("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{static fromTimestamp(t){return new Ot(t)}static min(){return new Ot(new de(0,0))}static max(){return new Ot(new de(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=-1;function AC(e,t){const n=e.toTimestamp().seconds,s=e.toTimestamp().nanoseconds+1,a=Ot.fromTimestamp(s===1e9?new de(n+1,0):new de(n,s));return new Us(a,Rt.empty(),t)}function RC(e){return new Us(e.readTime,e.key,Pu)}class Us{constructor(t,n,s){this.readTime=t,this.documentKey=n,this.largestBatchId=s}static min(){return new Us(Ot.min(),Rt.empty(),Pu)}static max(){return new Us(Ot.max(),Rt.empty(),Pu)}}function xC(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Rt.comparator(e.documentKey,t.documentKey),n!==0?n:Ft(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cl(e){if(e.code!==mt.FAILED_PRECONDITION||e.message!==IC)throw e;vt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&Ct(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new dt(((s,a)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(s,a)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,a)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof dt?n:dt.resolve(n)}catch(n){return dt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):dt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):dt.reject(n)}static resolve(t){return new dt(((n,s)=>{n(t)}))}static reject(t){return new dt(((n,s)=>{s(t)}))}static waitFor(t){return new dt(((n,s)=>{let a=0,u=0,c=!1;t.forEach((d=>{++a,d.next((()=>{++u,c&&u===a&&n()}),(g=>s(g)))})),c=!0,u===a&&n()}))}static or(t){let n=dt.resolve(!1);for(const s of t)n=n.next((a=>a?dt.resolve(a):s()));return n}static forEach(t,n){const s=[];return t.forEach(((a,u)=>{s.push(n.call(this,a,u))})),this.waitFor(s)}static mapArray(t,n){return new dt(((s,a)=>{const u=t.length,c=new Array(u);let d=0;for(let g=0;g<u;g++){const p=g;n(t[p]).next((y=>{c[p]=y,++d,d===u&&s(c)}),(y=>a(y)))}}))}static doWhile(t,n){return new dt(((s,a)=>{const u=()=>{t()===!0?n().next((()=>{u()}),a):s()};u()}))}}function NC(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function hl(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}kf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip=-1;function Pf(e){return e==null}function uf(e){return e===0&&1/e==-1/0}function DC(e){return typeof e=="number"&&Number.isInteger(e)&&!uf(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="";function MC(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=AE(t)),t=OC(e.get(n),t);return AE(t)}function OC(e,t){let n=t;const s=e.length;for(let a=0;a<s;a++){const u=e.charAt(a);switch(u){case"\0":n+="";break;case aS:n+="";break;default:n+=u}}return n}function AE(e){return e+aS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Pa(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function oS(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(t,n){this.comparator=t,this.root=n||hn.EMPTY}insert(t,n){return new ve(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,hn.BLACK,null,null))}remove(t){return new ve(this.comparator,this.root.remove(t,this.comparator).copy(null,null,hn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(t,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(t){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(t,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,s)=>(t(n,s),!1)))}toString(){const t=[];return this.inorderTraversal(((n,s)=>(t.push(`${n}:${s}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new xh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new xh(this.root,t,this.comparator,!1)}getReverseIterator(){return new xh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new xh(this.root,t,this.comparator,!0)}}class xh{constructor(t,n,s,a){this.isReverse=a,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=n?s(t.key,n):1,n&&a&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class hn{constructor(t,n,s,a,u){this.key=t,this.value=n,this.color=s??hn.RED,this.left=a??hn.EMPTY,this.right=u??hn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,s,a,u){return new hn(t??this.key,n??this.value,s??this.color,a??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,s){let a=this;const u=s(t,a.key);return a=u<0?a.copy(null,null,null,a.left.insert(t,n,s),null):u===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(t,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return hn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let s,a=this;if(n(t,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(t,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(t,a.key)===0){if(a.right.isEmpty())return hn.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(t,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ct(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ct(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw Ct(27949);return t+(this.isRed()?0:1)}}hn.EMPTY=null,hn.RED=!0,hn.BLACK=!1;hn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ct(57766)}get value(){throw Ct(16141)}get color(){throw Ct(16727)}get left(){throw Ct(29726)}get right(){throw Ct(36894)}copy(t,n,s,a,u){return this}insert(t,n,s){return new hn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(t){this.comparator=t,this.data=new ve(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,s)=>(t(n),!1)))}forEachInRange(t,n){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,t[1])>=0)return;n(a.key)}}forEachWhile(t,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new xE(this.data.getIterator())}getIteratorFrom(t){return new xE(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((s=>{n=n.add(s)})),n}isEqual(t){if(!(t instanceof Ye)||this.size!==t.size)return!1;const n=this.data.getIterator(),s=t.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,u=s.getNext().key;if(this.comparator(a,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new Ye(this.comparator);return n.data=t,n}}class xE{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(t){this.fields=t,t.sort(fn.comparator)}static empty(){return new Ni([])}unionWith(t){let n=new Ye(fn.comparator);for(const s of this.fields)n=n.add(s);for(const s of t)n=n.add(s);return new Ni(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Zo(this.fields,t.fields,((n,s)=>n.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(a){try{return atob(a)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new lS("Invalid base64 string: "+u):u}})(t);return new dn(n)}static fromUint8Array(t){const n=(function(a){let u="";for(let c=0;c<a.length;++c)u+=String.fromCharCode(a[c]);return u})(t);return new dn(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Ft(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const VC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zs(e){if(ne(!!e,39018),typeof e=="string"){let t=0;const n=VC.exec(e);if(ne(!!n,46558,{timestamp:e}),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),t=Number(a)}const s=new Date(e);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Ce(e.seconds),nanos:Ce(e.nanos)}}function Ce(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Bs(e){return typeof e=="string"?dn.fromBase64String(e):dn.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="server_timestamp",cS="__type__",hS="__previous_value__",fS="__local_write_time__";function Cp(e){return(e?.mapValue?.fields||{})[cS]?.stringValue===uS}function Lf(e){const t=e.mapValue.fields[hS];return Cp(t)?Lf(t):t}function Lu(e){const t=zs(e.mapValue.fields[fS].timestampValue);return new de(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(t,n,s,a,u,c,d,g,p,y){this.databaseId=t,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=p,this.isUsingEmulator=y}}const cf="(default)";class Uu{constructor(t,n){this.projectId=t,this.database=n||cf}static empty(){return new Uu("","")}get isDefaultDatabase(){return this.database===cf}isEqual(t){return t instanceof Uu&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS="__type__",PC="__max__",Ih={mapValue:{}},mS="__vector__",hf="value";function Hs(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Cp(e)?4:UC(e)?9007199254740991:LC(e)?10:11:Ct(28295,{value:e})}function cr(e,t){if(e===t)return!0;const n=Hs(e);if(n!==Hs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Lu(e).isEqual(Lu(t));case 3:return(function(a,u){if(typeof a.timestampValue=="string"&&typeof u.timestampValue=="string"&&a.timestampValue.length===u.timestampValue.length)return a.timestampValue===u.timestampValue;const c=zs(a.timestampValue),d=zs(u.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(a,u){return Bs(a.bytesValue).isEqual(Bs(u.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(a,u){return Ce(a.geoPointValue.latitude)===Ce(u.geoPointValue.latitude)&&Ce(a.geoPointValue.longitude)===Ce(u.geoPointValue.longitude)})(e,t);case 2:return(function(a,u){if("integerValue"in a&&"integerValue"in u)return Ce(a.integerValue)===Ce(u.integerValue);if("doubleValue"in a&&"doubleValue"in u){const c=Ce(a.doubleValue),d=Ce(u.doubleValue);return c===d?uf(c)===uf(d):isNaN(c)&&isNaN(d)}return!1})(e,t);case 9:return Zo(e.arrayValue.values||[],t.arrayValue.values||[],cr);case 10:case 11:return(function(a,u){const c=a.mapValue.fields||{},d=u.mapValue.fields||{};if(RE(c)!==RE(d))return!1;for(const g in c)if(c.hasOwnProperty(g)&&(d[g]===void 0||!cr(c[g],d[g])))return!1;return!0})(e,t);default:return Ct(52216,{left:e})}}function zu(e,t){return(e.values||[]).find((n=>cr(n,t)))!==void 0}function Wo(e,t){if(e===t)return 0;const n=Hs(e),s=Hs(t);if(n!==s)return Ft(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ft(e.booleanValue,t.booleanValue);case 2:return(function(u,c){const d=Ce(u.integerValue||u.doubleValue),g=Ce(c.integerValue||c.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1})(e,t);case 3:return IE(e.timestampValue,t.timestampValue);case 4:return IE(Lu(e),Lu(t));case 5:return kg(e.stringValue,t.stringValue);case 6:return(function(u,c){const d=Bs(u),g=Bs(c);return d.compareTo(g)})(e.bytesValue,t.bytesValue);case 7:return(function(u,c){const d=u.split("/"),g=c.split("/");for(let p=0;p<d.length&&p<g.length;p++){const y=Ft(d[p],g[p]);if(y!==0)return y}return Ft(d.length,g.length)})(e.referenceValue,t.referenceValue);case 8:return(function(u,c){const d=Ft(Ce(u.latitude),Ce(c.latitude));return d!==0?d:Ft(Ce(u.longitude),Ce(c.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return CE(e.arrayValue,t.arrayValue);case 10:return(function(u,c){const d=u.fields||{},g=c.fields||{},p=d[hf]?.arrayValue,y=g[hf]?.arrayValue,v=Ft(p?.values?.length||0,y?.values?.length||0);return v!==0?v:CE(p,y)})(e.mapValue,t.mapValue);case 11:return(function(u,c){if(u===Ih.mapValue&&c===Ih.mapValue)return 0;if(u===Ih.mapValue)return 1;if(c===Ih.mapValue)return-1;const d=u.fields||{},g=Object.keys(d),p=c.fields||{},y=Object.keys(p);g.sort(),y.sort();for(let v=0;v<g.length&&v<y.length;++v){const S=kg(g[v],y[v]);if(S!==0)return S;const b=Wo(d[g[v]],p[y[v]]);if(b!==0)return b}return Ft(g.length,y.length)})(e.mapValue,t.mapValue);default:throw Ct(23264,{he:n})}}function IE(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Ft(e,t);const n=zs(e),s=zs(t),a=Ft(n.seconds,s.seconds);return a!==0?a:Ft(n.nanos,s.nanos)}function CE(e,t){const n=e.values||[],s=t.values||[];for(let a=0;a<n.length&&a<s.length;++a){const u=Wo(n[a],s[a]);if(u)return u}return Ft(n.length,s.length)}function Jo(e){return Pg(e)}function Pg(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const s=zs(n);return`time(${s.seconds},${s.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return Bs(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return Rt.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let s="[",a=!0;for(const u of n.values||[])a?a=!1:s+=",",s+=Pg(u);return s+"]"})(e.arrayValue):"mapValue"in e?(function(n){const s=Object.keys(n.fields||{}).sort();let a="{",u=!0;for(const c of s)u?u=!1:a+=",",a+=`${c}:${Pg(n.fields[c])}`;return a+"}"})(e.mapValue):Ct(61005,{value:e})}function Gh(e){switch(Hs(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Lf(e);return t?16+Gh(t):16;case 5:return 2*e.stringValue.length;case 6:return Bs(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((a,u)=>a+Gh(u)),0)})(e.arrayValue);case 10:case 11:return(function(s){let a=0;return Pa(s.fields,((u,c)=>{a+=u.length+Gh(c)})),a})(e.mapValue);default:throw Ct(13486,{value:e})}}function Lg(e){return!!e&&"integerValue"in e}function Np(e){return!!e&&"arrayValue"in e}function NE(e){return!!e&&"nullValue"in e}function DE(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function $h(e){return!!e&&"mapValue"in e}function LC(e){return(e?.mapValue?.fields||{})[dS]?.stringValue===mS}function Iu(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Pa(e.mapValue.fields,((n,s)=>t.mapValue.fields[n]=Iu(s))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Iu(e.arrayValue.values[n]);return t}return{...e}}function UC(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===PC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(t){this.value=t}static empty(){return new mi({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let s=0;s<t.length-1;++s)if(n=(n.mapValue.fields||{})[t.get(s)],!$h(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Iu(n)}setAll(t){let n=fn.emptyPath(),s={},a=[];t.forEach(((c,d)=>{if(!n.isImmediateParentOf(d)){const g=this.getFieldsMap(n);this.applyChanges(g,s,a),s={},a=[],n=d.popLast()}c?s[d.lastSegment()]=Iu(c):a.push(d.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,a)}delete(t){const n=this.field(t.popLast());$h(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return cr(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<t.length;++s){let a=n.mapValue.fields[t.get(s)];$h(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[t.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(t,n,s){Pa(n,((a,u)=>t[a]=u));for(const a of s)delete t[a]}clone(){return new mi(Iu(this.value))}}function gS(e){const t=[];return Pa(e.fields,((n,s)=>{const a=new fn([n]);if($h(s)){const u=gS(s.mapValue).fields;if(u.length===0)t.push(a);else for(const c of u)t.push(a.child(c))}else t.push(a)})),new Ni(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(t,n,s,a,u,c,d){this.key=t,this.documentType=n,this.version=s,this.readTime=a,this.createTime=u,this.data=c,this.documentState=d}static newInvalidDocument(t){return new _n(t,0,Ot.min(),Ot.min(),Ot.min(),mi.empty(),0)}static newFoundDocument(t,n,s,a){return new _n(t,1,n,Ot.min(),s,a,0)}static newNoDocument(t,n){return new _n(t,2,n,Ot.min(),Ot.min(),mi.empty(),0)}static newUnknownDocument(t,n){return new _n(t,3,n,Ot.min(),Ot.min(),mi.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Ot.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=mi.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=mi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ot.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof _n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new _n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(t,n){this.position=t,this.inclusive=n}}function ME(e,t,n){let s=0;for(let a=0;a<e.position.length;a++){const u=t[a],c=e.position[a];if(u.field.isKeyField()?s=Rt.comparator(Rt.fromName(c.referenceValue),n.key):s=Wo(c,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function OE(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!cr(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(t,n="asc"){this.field=t,this.dir=n}}function zC(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{}class $e extends pS{constructor(t,n,s){super(),this.field=t,this.op=n,this.value=s}static create(t,n,s){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,s):new HC(t,n,s):n==="array-contains"?new FC(t,s):n==="in"?new GC(t,s):n==="not-in"?new $C(t,s):n==="array-contains-any"?new YC(t,s):new $e(t,n,s)}static createKeyFieldInFilter(t,n,s){return n==="in"?new qC(t,s):new jC(t,s)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Wo(n,this.value)):n!==null&&Hs(this.value)===Hs(n)&&this.matchesComparison(Wo(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ct(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class hr extends pS{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new hr(t,n)}matches(t){return yS(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function yS(e){return e.op==="and"}function _S(e){return BC(e)&&yS(e)}function BC(e){for(const t of e.filters)if(t instanceof hr)return!1;return!0}function Ug(e){if(e instanceof $e)return e.field.canonicalString()+e.op.toString()+Jo(e.value);if(_S(e))return e.filters.map((t=>Ug(t))).join(",");{const t=e.filters.map((n=>Ug(n))).join(",");return`${e.op}(${t})`}}function vS(e,t){return e instanceof $e?(function(s,a){return a instanceof $e&&s.op===a.op&&s.field.isEqual(a.field)&&cr(s.value,a.value)})(e,t):e instanceof hr?(function(s,a){return a instanceof hr&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce(((u,c,d)=>u&&vS(c,a.filters[d])),!0):!1})(e,t):void Ct(19439)}function ES(e){return e instanceof $e?(function(n){return`${n.field.canonicalString()} ${n.op} ${Jo(n.value)}`})(e):e instanceof hr?(function(n){return n.op.toString()+" {"+n.getFilters().map(ES).join(" ,")+"}"})(e):"Filter"}class HC extends $e{constructor(t,n,s){super(t,n,s),this.key=Rt.fromName(s.referenceValue)}matches(t){const n=Rt.comparator(t.key,this.key);return this.matchesComparison(n)}}class qC extends $e{constructor(t,n){super(t,"in",n),this.keys=TS("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class jC extends $e{constructor(t,n){super(t,"not-in",n),this.keys=TS("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function TS(e,t){return(t.arrayValue?.values||[]).map((n=>Rt.fromName(n.referenceValue)))}class FC extends $e{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Np(n)&&zu(n.arrayValue,this.value)}}class GC extends $e{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&zu(this.value.arrayValue,n)}}class $C extends $e{constructor(t,n){super(t,"not-in",n)}matches(t){if(zu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!zu(this.value.arrayValue,n)}}class YC extends $e{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Np(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>zu(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(t,n=null,s=[],a=[],u=null,c=null,d=null){this.path=t,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=u,this.startAt=c,this.endAt=d,this.Te=null}}function VE(e,t=null,n=[],s=[],a=null,u=null,c=null){return new XC(e,t,n,s,a,u,c)}function Dp(e){const t=Vt(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((s=>Ug(s))).join(","),n+="|ob:",n+=t.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),Pf(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((s=>Jo(s))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((s=>Jo(s))).join(",")),t.Te=n}return t.Te}function Mp(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!zC(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!vS(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!OE(e.startAt,t.startAt)&&OE(e.endAt,t.endAt)}function zg(e){return Rt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(t,n=null,s=[],a=[],u=null,c="F",d=null,g=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=u,this.limitType=c,this.startAt=d,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function KC(e,t,n,s,a,u,c,d){return new Uf(e,t,n,s,a,u,c,d)}function Op(e){return new Uf(e)}function kE(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function QC(e){return e.collectionGroup!==null}function Cu(e){const t=Vt(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),n.add(u.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Ye(fn.comparator);return c.filters.forEach((g=>{g.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(t).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new df(u,s))})),n.has(fn.keyField().canonicalString())||t.Ie.push(new df(fn.keyField(),s))}return t.Ie}function rr(e){const t=Vt(e);return t.Ee||(t.Ee=ZC(t,Cu(e))),t.Ee}function ZC(e,t){if(e.limitType==="F")return VE(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((a=>{const u=a.dir==="desc"?"asc":"desc";return new df(a.field,u)}));const n=e.endAt?new ff(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new ff(e.startAt.position,e.startAt.inclusive):null;return VE(e.path,e.collectionGroup,t,e.filters,e.limit,n,s)}}function Bg(e,t,n){return new Uf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function zf(e,t){return Mp(rr(e),rr(t))&&e.limitType===t.limitType}function SS(e){return`${Dp(rr(e))}|lt:${e.limitType}`}function Po(e){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((a=>ES(a))).join(", ")}]`),Pf(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((a=>Jo(a))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((a=>Jo(a))).join(",")),`Target(${s})`})(rr(e))}; limitType=${e.limitType})`}function Bf(e,t){return t.isFoundDocument()&&(function(s,a){const u=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Rt.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(e,t)&&(function(s,a){for(const u of Cu(s))if(!u.field.isKeyField()&&a.data.field(u.field)===null)return!1;return!0})(e,t)&&(function(s,a){for(const u of s.filters)if(!u.matches(a))return!1;return!0})(e,t)&&(function(s,a){return!(s.startAt&&!(function(c,d,g){const p=ME(c,d,g);return c.inclusive?p<=0:p<0})(s.startAt,Cu(s),a)||s.endAt&&!(function(c,d,g){const p=ME(c,d,g);return c.inclusive?p>=0:p>0})(s.endAt,Cu(s),a))})(e,t)}function WC(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function wS(e){return(t,n)=>{let s=!1;for(const a of Cu(e)){const u=JC(a,t,n);if(u!==0)return u;s=s||a.field.isKeyField()}return 0}}function JC(e,t,n){const s=e.field.isKeyField()?Rt.comparator(t.key,n.key):(function(u,c,d){const g=c.data.field(u),p=d.data.field(u);return g!==null&&p!==null?Wo(g,p):Ct(42886)})(e.field,t,n);switch(e.dir){case"asc":return s;case"desc":return-1*s;default:return Ct(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s!==void 0){for(const[a,u]of s)if(this.equalsFn(a,t))return u}}has(t){return this.get(t)!==void 0}set(t,n){const s=this.mapKeyFn(t),a=this.inner[s];if(a===void 0)return this.inner[s]=[[t,n]],void this.innerSize++;for(let u=0;u<a.length;u++)if(this.equalsFn(a[u][0],t))return void(a[u]=[t,n]);a.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],t))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(t){Pa(this.inner,((n,s)=>{for(const[a,u]of s)t(a,u)}))}isEmpty(){return oS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN=new ve(Rt.comparator);function $r(){return tN}const bS=new ve(Rt.comparator);function Eu(...e){let t=bS;for(const n of e)t=t.insert(n.key,n);return t}function AS(e){let t=bS;return e.forEach(((n,s)=>t=t.insert(n,s.overlayedDocument))),t}function wa(){return Nu()}function RS(){return Nu()}function Nu(){return new La((e=>e.toString()),((e,t)=>e.isEqual(t)))}const eN=new ve(Rt.comparator),nN=new Ye(Rt.comparator);function Gt(...e){let t=nN;for(const n of e)t=t.add(n);return t}const iN=new Ye(Ft);function rN(){return iN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uf(t)?"-0":t}}function xS(e){return{integerValue:""+e}}function sN(e,t){return DC(t)?xS(t):Vp(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(){this._=void 0}}function aN(e,t,n){return e instanceof mf?(function(a,u){const c={fields:{[cS]:{stringValue:uS},[fS]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return u&&Cp(u)&&(u=Lf(u)),u&&(c.fields[hS]=u),{mapValue:c}})(n,t):e instanceof Bu?CS(e,t):e instanceof Hu?NS(e,t):(function(a,u){const c=IS(a,u),d=PE(c)+PE(a.Ae);return Lg(c)&&Lg(a.Ae)?xS(d):Vp(a.serializer,d)})(e,t)}function oN(e,t,n){return e instanceof Bu?CS(e,t):e instanceof Hu?NS(e,t):n}function IS(e,t){return e instanceof gf?(function(s){return Lg(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(t)?t:{integerValue:0}:null}class mf extends Hf{}class Bu extends Hf{constructor(t){super(),this.elements=t}}function CS(e,t){const n=DS(t);for(const s of e.elements)n.some((a=>cr(a,s)))||n.push(s);return{arrayValue:{values:n}}}class Hu extends Hf{constructor(t){super(),this.elements=t}}function NS(e,t){let n=DS(t);for(const s of e.elements)n=n.filter((a=>!cr(a,s)));return{arrayValue:{values:n}}}class gf extends Hf{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function PE(e){return Ce(e.integerValue||e.doubleValue)}function DS(e){return Np(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function lN(e,t){return e.field.isEqual(t.field)&&(function(s,a){return s instanceof Bu&&a instanceof Bu||s instanceof Hu&&a instanceof Hu?Zo(s.elements,a.elements,cr):s instanceof gf&&a instanceof gf?cr(s.Ae,a.Ae):s instanceof mf&&a instanceof mf})(e.transform,t.transform)}class uN{constructor(t,n){this.version=t,this.transformResults=n}}class qr{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new qr}static exists(t){return new qr(void 0,t)}static updateTime(t){return new qr(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Yh(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class qf{}function MS(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new VS(e.key,qr.none()):new ic(e.key,e.data,qr.none());{const n=e.data,s=mi.empty();let a=new Ye(fn.comparator);for(let u of t.fields)if(!a.has(u)){let c=n.field(u);c===null&&u.length>1&&(u=u.popLast(),c=n.field(u)),c===null?s.delete(u):s.set(u,c),a=a.add(u)}return new Ua(e.key,s,new Ni(a.toArray()),qr.none())}}function cN(e,t,n){e instanceof ic?(function(a,u,c){const d=a.value.clone(),g=UE(a.fieldTransforms,u,c.transformResults);d.setAll(g),u.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(e,t,n):e instanceof Ua?(function(a,u,c){if(!Yh(a.precondition,u))return void u.convertToUnknownDocument(c.version);const d=UE(a.fieldTransforms,u,c.transformResults),g=u.data;g.setAll(OS(a)),g.setAll(d),u.convertToFoundDocument(c.version,g).setHasCommittedMutations()})(e,t,n):(function(a,u,c){u.convertToNoDocument(c.version).setHasCommittedMutations()})(0,t,n)}function Du(e,t,n,s){return e instanceof ic?(function(u,c,d,g){if(!Yh(u.precondition,c))return d;const p=u.value.clone(),y=zE(u.fieldTransforms,g,c);return p.setAll(y),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(e,t,n,s):e instanceof Ua?(function(u,c,d,g){if(!Yh(u.precondition,c))return d;const p=zE(u.fieldTransforms,g,c),y=c.data;return y.setAll(OS(u)),y.setAll(p),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),d===null?null:d.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((v=>v.field)))})(e,t,n,s):(function(u,c,d){return Yh(u.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(e,t,n)}function hN(e,t){let n=null;for(const s of e.fieldTransforms){const a=t.data.field(s.field),u=IS(s.transform,a||null);u!=null&&(n===null&&(n=mi.empty()),n.set(s.field,u))}return n||null}function LE(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&Zo(s,a,((u,c)=>lN(u,c)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class ic extends qf{constructor(t,n,s,a=[]){super(),this.key=t,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Ua extends qf{constructor(t,n,s,a,u=[]){super(),this.key=t,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function OS(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=e.data.field(n);t.set(n,s)}})),t}function UE(e,t,n){const s=new Map;ne(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let a=0;a<n.length;a++){const u=e[a],c=u.transform,d=t.data.field(u.field);s.set(u.field,oN(c,d,n[a]))}return s}function zE(e,t,n){const s=new Map;for(const a of e){const u=a.transform,c=n.data.field(a.field);s.set(a.field,aN(u,c,t))}return s}class VS extends qf{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class fN extends qf{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(t,n,s,a){this.batchId=t,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(t,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const u=this.mutations[a];u.key.isEqual(t.key)&&cN(u,t,s[a])}}applyToLocalView(t,n){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(n=Du(s,t,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(n=Du(s,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const s=RS();return this.mutations.forEach((a=>{const u=t.get(a.key),c=u.overlayedDocument;let d=this.applyToLocalView(c,u.mutatedFields);d=n.has(a.key)?null:d;const g=MS(c,d);g!==null&&s.set(a.key,g),c.isValidDocument()||c.convertToNoDocument(Ot.min())})),s}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),Gt())}isEqual(t){return this.batchId===t.batchId&&Zo(this.mutations,t.mutations,((n,s)=>LE(n,s)))&&Zo(this.baseMutations,t.baseMutations,((n,s)=>LE(n,s)))}}class kp{constructor(t,n,s,a){this.batch=t,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(t,n,s){ne(t.mutations.length===s.length,58842,{me:t.mutations.length,fe:s.length});let a=(function(){return eN})();const u=t.mutations;for(let c=0;c<u.length;c++)a=a.insert(u[c].key,s[c].version);return new kp(t,n,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mN{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le,Qt;function pN(e){switch(e){case mt.OK:return Ct(64938);case mt.CANCELLED:case mt.UNKNOWN:case mt.DEADLINE_EXCEEDED:case mt.RESOURCE_EXHAUSTED:case mt.INTERNAL:case mt.UNAVAILABLE:case mt.UNAUTHENTICATED:return!1;case mt.INVALID_ARGUMENT:case mt.NOT_FOUND:case mt.ALREADY_EXISTS:case mt.PERMISSION_DENIED:case mt.FAILED_PRECONDITION:case mt.ABORTED:case mt.OUT_OF_RANGE:case mt.UNIMPLEMENTED:case mt.DATA_LOSS:return!0;default:return Ct(15467,{code:e})}}function kS(e){if(e===void 0)return Gr("GRPC error has no .code"),mt.UNKNOWN;switch(e){case Le.OK:return mt.OK;case Le.CANCELLED:return mt.CANCELLED;case Le.UNKNOWN:return mt.UNKNOWN;case Le.DEADLINE_EXCEEDED:return mt.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return mt.RESOURCE_EXHAUSTED;case Le.INTERNAL:return mt.INTERNAL;case Le.UNAVAILABLE:return mt.UNAVAILABLE;case Le.UNAUTHENTICATED:return mt.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return mt.INVALID_ARGUMENT;case Le.NOT_FOUND:return mt.NOT_FOUND;case Le.ALREADY_EXISTS:return mt.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return mt.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return mt.FAILED_PRECONDITION;case Le.ABORTED:return mt.ABORTED;case Le.OUT_OF_RANGE:return mt.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return mt.UNIMPLEMENTED;case Le.DATA_LOSS:return mt.DATA_LOSS;default:return Ct(39323,{code:e})}}(Qt=Le||(Le={}))[Qt.OK=0]="OK",Qt[Qt.CANCELLED=1]="CANCELLED",Qt[Qt.UNKNOWN=2]="UNKNOWN",Qt[Qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qt[Qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qt[Qt.NOT_FOUND=5]="NOT_FOUND",Qt[Qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qt[Qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qt[Qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qt[Qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qt[Qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qt[Qt.ABORTED=10]="ABORTED",Qt[Qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qt[Qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qt[Qt.INTERNAL=13]="INTERNAL",Qt[Qt.UNAVAILABLE=14]="UNAVAILABLE",Qt[Qt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=new Vs([4294967295,4294967295],0);function BE(e){const t=yN().encode(e),n=new Z1;return n.update(t),new Uint8Array(n.digest())}function HE(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),a=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Vs([n,s],0),new Vs([a,u],0)]}class Pp{constructor(t,n,s){if(this.bitmap=t,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Tu(`Invalid padding: ${n}`);if(s<0)throw new Tu(`Invalid hash count: ${s}`);if(t.length>0&&this.hashCount===0)throw new Tu(`Invalid hash count: ${s}`);if(t.length===0&&n!==0)throw new Tu(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Vs.fromNumber(this.ge)}ye(t,n,s){let a=t.add(n.multiply(Vs.fromNumber(s)));return a.compare(_N)===1&&(a=new Vs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=BE(t),[s,a]=HE(n);for(let u=0;u<this.hashCount;u++){const c=this.ye(s,a,u);if(!this.we(c))return!1}return!0}static create(t,n,s){const a=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),c=new Pp(u,a,n);return s.forEach((d=>c.insert(d))),c}insert(t){if(this.ge===0)return;const n=BE(t),[s,a]=HE(n);for(let u=0;u<this.hashCount;u++){const c=this.ye(s,a,u);this.Se(c)}}Se(t){const n=Math.floor(t/8),s=t%8;this.bitmap[n]|=1<<s}}class Tu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(t,n,s,a,u){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,n,s){const a=new Map;return a.set(t,rc.createSynthesizedTargetChangeForCurrentChange(t,n,s)),new jf(Ot.min(),a,new ve(Ft),$r(),Gt())}}class rc{constructor(t,n,s,a,u){this.resumeToken=t,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,n,s){return new rc(s,n,Gt(),Gt(),Gt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xh{constructor(t,n,s,a){this.be=t,this.removedTargetIds=n,this.key=s,this.De=a}}class PS{constructor(t,n){this.targetId=t,this.Ce=n}}class LS{constructor(t,n,s=dn.EMPTY_BYTE_STRING,a=null){this.state=t,this.targetIds=n,this.resumeToken=s,this.cause=a}}class qE{constructor(){this.ve=0,this.Fe=jE(),this.Me=dn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=Gt(),n=Gt(),s=Gt();return this.Fe.forEach(((a,u)=>{switch(u){case 0:t=t.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:Ct(38017,{changeType:u})}})),new rc(this.Me,this.xe,t,n,s)}qe(){this.Oe=!1,this.Fe=jE()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,ne(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class vN{constructor(t){this.Ge=t,this.ze=new Map,this.je=$r(),this.Je=Ch(),this.He=Ch(),this.Ye=new ve(Ft)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const s=this.nt(n);switch(t.state){case 0:this.rt(n)&&s.Le(t.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(t.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.We(),s.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(t.resumeToken));break;default:Ct(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((s,a)=>{this.rt(a)&&n(a)}))}st(t){const n=t.targetId,s=t.Ce.count,a=this.ot(n);if(a){const u=a.target;if(zg(u))if(s===0){const c=new Rt(u.path);this.et(n,c,_n.newNoDocument(c,Ot.min()))}else ne(s===1,20013,{expectedCount:s});else{const c=this._t(n);if(c!==s){const d=this.ut(t),g=d?this.ct(d,t,c):1;if(g!==0){this.it(n);const p=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,p)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:u=0}=n;let c,d;try{c=Bs(s).toUint8Array()}catch(g){if(g instanceof lS)return Qo("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new Pp(c,a,u)}catch(g){return Qo(g instanceof Tu?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.ge===0?null:d}ct(t,n,s){return n.Ce.count===s-this.Pt(t,n.targetId)?0:2}Pt(t,n){const s=this.Ge.getRemoteKeysForTarget(n);let a=0;return s.forEach((u=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;t.mightContain(d)||(this.et(n,u,null),a++)})),a}Tt(t){const n=new Map;this.ze.forEach(((u,c)=>{const d=this.ot(c);if(d){if(u.current&&zg(d.target)){const g=new Rt(d.target.path);this.It(g).has(c)||this.Et(c,g)||this.et(c,g,_n.newNoDocument(g,t))}u.Be&&(n.set(c,u.ke()),u.qe())}}));let s=Gt();this.He.forEach(((u,c)=>{let d=!0;c.forEachWhile((g=>{const p=this.ot(g);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(u))})),this.je.forEach(((u,c)=>c.setReadTime(t)));const a=new jf(t,n,this.Ye,this.je,s);return this.je=$r(),this.Je=Ch(),this.He=Ch(),this.Ye=new ve(Ft),a}Xe(t,n){if(!this.rt(t))return;const s=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,s),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,s){if(!this.rt(t))return;const a=this.nt(t);this.Et(t,n)?a.Qe(n,1):a.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),s&&(this.je=this.je.insert(n,s))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new qE,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new Ye(Ft),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new Ye(Ft),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||vt("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new qE),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Ch(){return new ve(Rt.comparator)}function jE(){return new ve(Rt.comparator)}const EN={asc:"ASCENDING",desc:"DESCENDING"},TN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},SN={and:"AND",or:"OR"};class wN{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Hg(e,t){return e.useProto3Json||Pf(t)?t:{value:t}}function pf(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function US(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function bN(e,t){return pf(e,t.toTimestamp())}function sr(e){return ne(!!e,49232),Ot.fromTimestamp((function(n){const s=zs(n);return new de(s.seconds,s.nanos)})(e))}function Lp(e,t){return qg(e,t).canonicalString()}function qg(e,t){const n=(function(a){return new _e(["projects",a.projectId,"databases",a.database])})(e).child("documents");return t===void 0?n:n.child(t)}function zS(e){const t=_e.fromString(e);return ne(FS(t),10190,{key:t.toString()}),t}function jg(e,t){return Lp(e.databaseId,t.path)}function ug(e,t){const n=zS(t);if(n.get(1)!==e.databaseId.projectId)throw new St(mt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new St(mt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Rt(HS(n))}function BS(e,t){return Lp(e.databaseId,t)}function AN(e){const t=zS(e);return t.length===4?_e.emptyPath():HS(t)}function Fg(e){return new _e(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function HS(e){return ne(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function FE(e,t,n){return{name:jg(e,t),fields:n.value.mapValue.fields}}function RN(e,t){let n;if("targetChange"in t){t.targetChange;const s=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:Ct(39313,{state:p})})(t.targetChange.targetChangeType||"NO_CHANGE"),a=t.targetChange.targetIds||[],u=(function(p,y){return p.useProto3Json?(ne(y===void 0||typeof y=="string",58123),dn.fromBase64String(y||"")):(ne(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),dn.fromUint8Array(y||new Uint8Array))})(e,t.targetChange.resumeToken),c=t.targetChange.cause,d=c&&(function(p){const y=p.code===void 0?mt.UNKNOWN:kS(p.code);return new St(y,p.message||"")})(c);n=new LS(s,a,u,d||null)}else if("documentChange"in t){t.documentChange;const s=t.documentChange;s.document,s.document.name,s.document.updateTime;const a=ug(e,s.document.name),u=sr(s.document.updateTime),c=s.document.createTime?sr(s.document.createTime):Ot.min(),d=new mi({mapValue:{fields:s.document.fields}}),g=_n.newFoundDocument(a,u,c,d),p=s.targetIds||[],y=s.removedTargetIds||[];n=new Xh(p,y,g.key,g)}else if("documentDelete"in t){t.documentDelete;const s=t.documentDelete;s.document;const a=ug(e,s.document),u=s.readTime?sr(s.readTime):Ot.min(),c=_n.newNoDocument(a,u),d=s.removedTargetIds||[];n=new Xh([],d,c.key,c)}else if("documentRemove"in t){t.documentRemove;const s=t.documentRemove;s.document;const a=ug(e,s.document),u=s.removedTargetIds||[];n=new Xh([],u,a,null)}else{if(!("filter"in t))return Ct(11601,{Rt:t});{t.filter;const s=t.filter;s.targetId;const{count:a=0,unchangedNames:u}=s,c=new gN(a,u),d=s.targetId;n=new PS(d,c)}}return n}function xN(e,t){let n;if(t instanceof ic)n={update:FE(e,t.key,t.value)};else if(t instanceof VS)n={delete:jg(e,t.key)};else if(t instanceof Ua)n={update:FE(e,t.key,t.data),updateMask:PN(t.fieldMask)};else{if(!(t instanceof fN))return Ct(16599,{Vt:t.type});n={verify:jg(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((s=>(function(u,c){const d=c.transform;if(d instanceof mf)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Bu)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Hu)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof gf)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw Ct(20930,{transform:c.transform})})(0,s)))),t.precondition.isNone||(n.currentDocument=(function(a,u){return u.updateTime!==void 0?{updateTime:bN(a,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:Ct(27497)})(e,t.precondition)),n}function IN(e,t){return e&&e.length>0?(ne(t!==void 0,14353),e.map((n=>(function(a,u){let c=a.updateTime?sr(a.updateTime):sr(u);return c.isEqual(Ot.min())&&(c=sr(u)),new uN(c,a.transformResults||[])})(n,t)))):[]}function CN(e,t){return{documents:[BS(e,t.path)]}}function NN(e,t){const n={structuredQuery:{}},s=t.path;let a;t.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=BS(e,a);const u=(function(p){if(p.length!==0)return jS(hr.create(p,"and"))})(t.filters);u&&(n.structuredQuery.where=u);const c=(function(p){if(p.length!==0)return p.map((y=>(function(S){return{field:Lo(S.field),direction:ON(S.dir)}})(y)))})(t.orderBy);c&&(n.structuredQuery.orderBy=c);const d=Hg(e,t.limit);return d!==null&&(n.structuredQuery.limit=d),t.startAt&&(n.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(t.endAt)),{ft:n,parent:a}}function DN(e){let t=AN(e.parent);const n=e.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){ne(s===1,65062);const y=n.from[0];y.allDescendants?a=y.collectionId:t=t.child(y.collectionId)}let u=[];n.where&&(u=(function(v){const S=qS(v);return S instanceof hr&&_S(S)?S.getFilters():[S]})(n.where));let c=[];n.orderBy&&(c=(function(v){return v.map((S=>(function(k){return new df(Uo(k.field),(function(U){switch(U){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(k.direction))})(S)))})(n.orderBy));let d=null;n.limit&&(d=(function(v){let S;return S=typeof v=="object"?v.value:v,Pf(S)?null:S})(n.limit));let g=null;n.startAt&&(g=(function(v){const S=!!v.before,b=v.values||[];return new ff(b,S)})(n.startAt));let p=null;return n.endAt&&(p=(function(v){const S=!v.before,b=v.values||[];return new ff(b,S)})(n.endAt)),KC(t,a,c,u,d,"F",g,p)}function MN(e,t){const n=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ct(28987,{purpose:a})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function qS(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Uo(n.unaryFilter.field);return $e.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Uo(n.unaryFilter.field);return $e.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Uo(n.unaryFilter.field);return $e.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Uo(n.unaryFilter.field);return $e.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ct(61313);default:return Ct(60726)}})(e):e.fieldFilter!==void 0?(function(n){return $e.create(Uo(n.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ct(58110);default:return Ct(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return hr.create(n.compositeFilter.filters.map((s=>qS(s))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ct(1026)}})(n.compositeFilter.op))})(e):Ct(30097,{filter:e})}function ON(e){return EN[e]}function VN(e){return TN[e]}function kN(e){return SN[e]}function Lo(e){return{fieldPath:e.canonicalString()}}function Uo(e){return fn.fromServerFormat(e.fieldPath)}function jS(e){return e instanceof $e?(function(n){if(n.op==="=="){if(DE(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NAN"}};if(NE(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(DE(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NOT_NAN"}};if(NE(n.value))return{unaryFilter:{field:Lo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lo(n.field),op:VN(n.op),value:n.value}}})(e):e instanceof hr?(function(n){const s=n.getFilters().map((a=>jS(a)));return s.length===1?s[0]:{compositeFilter:{op:kN(n.op),filters:s}}})(e):Ct(54877,{filter:e})}function PN(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function FS(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(t,n,s,a,u=Ot.min(),c=Ot.min(),d=dn.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(t){return new Ns(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Ns(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(t){this.yt=t}}function UN(e){const t=DN({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Bg(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(){this.Cn=new BN}addToCollectionParentIndex(t,n){return this.Cn.add(n),dt.resolve()}getCollectionParents(t,n){return dt.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return dt.resolve()}deleteFieldIndex(t,n){return dt.resolve()}deleteAllFieldIndexes(t){return dt.resolve()}createTargetIndexes(t,n){return dt.resolve()}getDocumentsMatchingTarget(t,n){return dt.resolve(null)}getIndexType(t,n){return dt.resolve(0)}getFieldIndexes(t,n){return dt.resolve([])}getNextCollectionGroupToUpdate(t){return dt.resolve(null)}getMinOffset(t,n){return dt.resolve(Us.min())}getMinOffsetFromCollectionGroup(t,n){return dt.resolve(Us.min())}updateCollectionGroup(t,n,s){return dt.resolve()}updateIndexEntries(t,n){return dt.resolve()}}class BN{constructor(){this.index={}}add(t){const n=t.lastSegment(),s=t.popLast(),a=this.index[n]||new Ye(_e.comparator),u=!a.has(s);return this.index[n]=a.add(s),u}has(t){const n=t.lastSegment(),s=t.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(t){return(this.index[t]||new Ye(_e.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},GS=41943040;class kn{static withCacheSize(t){return new kn(t,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kn.DEFAULT_COLLECTION_PERCENTILE=10,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kn.DEFAULT=new kn(GS,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kn.DISABLED=new kn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new tl(0)}static cr(){return new tl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $E="LruGarbageCollector",HN=1048576;function YE([e,t],[n,s]){const a=Ft(e,n);return a===0?Ft(t,s):a}class qN{constructor(t){this.Ir=t,this.buffer=new Ye(YE),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();YE(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class jN{constructor(t,n,s){this.garbageCollector=t,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){vt($E,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){hl(n)?vt($E,"Ignoring IndexedDB error during garbage collection: ",n):await cl(n)}await this.Vr(3e5)}))}}class FN{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(t,n){if(n===0)return dt.resolve(kf.ce);const s=new qN(n);return this.mr.forEachTarget(t,(a=>s.Ar(a.sequenceNumber))).next((()=>this.mr.pr(t,(a=>s.Ar(a))))).next((()=>s.maxValue))}removeTargets(t,n,s){return this.mr.removeTargets(t,n,s)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(vt("LruGarbageCollector","Garbage collection skipped; disabled"),dt.resolve(GE)):this.getCacheSize(t).next((s=>s<this.params.cacheSizeCollectionThreshold?(vt("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),GE):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let s,a,u,c,d,g,p;const y=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(vt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,c=Date.now(),this.nthSequenceNumber(t,a)))).next((v=>(s=v,d=Date.now(),this.removeTargets(t,s,n)))).next((v=>(u=v,g=Date.now(),this.removeOrphanedDocuments(t,s)))).next((v=>(p=Date.now(),ko()<=jt.DEBUG&&vt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-y}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${u} targets in `+(g-d)+`ms
	Removed ${v} documents in `+(p-g)+`ms
Total Duration: ${p-y}ms`),dt.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:u,documentsRemoved:v}))))}}function GN(e,t){return new FN(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(){this.changes=new La((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,_n.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?dt.resolve(s):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(t,n,s,a){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(t,n){let s=null;return this.documentOverlayCache.getOverlay(t,n).next((a=>(s=a,this.remoteDocumentCache.getEntry(t,n)))).next((a=>(s!==null&&Du(s.mutation,a,Ni.empty(),de.now()),a)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.getLocalViewOfDocuments(t,s,Gt()).next((()=>s))))}getLocalViewOfDocuments(t,n,s=Gt()){const a=wa();return this.populateOverlays(t,a,n).next((()=>this.computeViews(t,n,a,s).next((u=>{let c=Eu();return u.forEach(((d,g)=>{c=c.insert(d,g.overlayedDocument)})),c}))))}getOverlayedDocuments(t,n){const s=wa();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,Gt())))}populateOverlays(t,n,s){const a=[];return s.forEach((u=>{n.has(u)||a.push(u)})),this.documentOverlayCache.getOverlays(t,a).next((u=>{u.forEach(((c,d)=>{n.set(c,d)}))}))}computeViews(t,n,s,a){let u=$r();const c=Nu(),d=(function(){return Nu()})();return n.forEach(((g,p)=>{const y=s.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof Ua)?u=u.insert(p.key,p):y!==void 0?(c.set(p.key,y.mutation.getFieldMask()),Du(y.mutation,p,y.mutation.getFieldMask(),de.now())):c.set(p.key,Ni.empty())})),this.recalculateAndSaveOverlays(t,u).next((g=>(g.forEach(((p,y)=>c.set(p,y))),n.forEach(((p,y)=>d.set(p,new YN(y,c.get(p)??null)))),d)))}recalculateAndSaveOverlays(t,n){const s=Nu();let a=new ve(((c,d)=>c-d)),u=Gt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((c=>{for(const d of c)d.keys().forEach((g=>{const p=n.get(g);if(p===null)return;let y=s.get(g)||Ni.empty();y=d.applyToLocalView(p,y),s.set(g,y);const v=(a.get(d.batchId)||Gt()).add(g);a=a.insert(d.batchId,v)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),p=g.key,y=g.value,v=RS();y.forEach((S=>{if(!u.has(S)){const b=MS(n.get(S),s.get(S));b!==null&&v.set(S,b),u=u.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(t,p,v))}return dt.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((s=>this.recalculateAndSaveOverlays(t,s)))}getDocumentsMatchingQuery(t,n,s,a){return(function(c){return Rt.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):QC(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,s,a):this.getDocumentsMatchingCollectionQuery(t,n,s,a)}getNextDocuments(t,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,s,a).next((u=>{const c=a-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,s.largestBatchId,a-u.size):dt.resolve(wa());let d=Pu,g=u;return c.next((p=>dt.forEach(p,((y,v)=>(d<v.largestBatchId&&(d=v.largestBatchId),u.get(y)?dt.resolve():this.remoteDocumentCache.getEntry(t,y).next((S=>{g=g.insert(y,S)}))))).next((()=>this.populateOverlays(t,p,u))).next((()=>this.computeViews(t,g,p,Gt()))).next((y=>({batchId:d,changes:AS(y)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Rt(n)).next((s=>{let a=Eu();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a}))}getDocumentsMatchingCollectionGroupQuery(t,n,s,a){const u=n.collectionGroup;let c=Eu();return this.indexManager.getCollectionParents(t,u).next((d=>dt.forEach(d,(g=>{const p=(function(v,S){return new Uf(S,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,p,s,a).next((y=>{y.forEach(((v,S)=>{c=c.insert(v,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(t,n,s,a){let u;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,s.largestBatchId).next((c=>(u=c,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,s,u,a)))).next((c=>{u.forEach(((g,p)=>{const y=p.getKey();c.get(y)===null&&(c=c.insert(y,_n.newInvalidDocument(y)))}));let d=Eu();return c.forEach(((g,p)=>{const y=u.get(g);y!==void 0&&Du(y.mutation,p,Ni.empty(),de.now()),Bf(n,p)&&(d=d.insert(g,p))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return dt.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(a){return{id:a.id,version:a.version,createTime:sr(a.createTime)}})(n)),dt.resolve()}getNamedQuery(t,n){return dt.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(a){return{name:a.name,query:UN(a.bundledQuery),readTime:sr(a.readTime)}})(n)),dt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(){this.overlays=new ve(Rt.comparator),this.qr=new Map}getOverlay(t,n){return dt.resolve(this.overlays.get(n))}getOverlays(t,n){const s=wa();return dt.forEach(n,(a=>this.getOverlay(t,a).next((u=>{u!==null&&s.set(a,u)})))).next((()=>s))}saveOverlays(t,n,s){return s.forEach(((a,u)=>{this.St(t,n,u)})),dt.resolve()}removeOverlaysForBatchId(t,n,s){const a=this.qr.get(s);return a!==void 0&&(a.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(s)),dt.resolve()}getOverlaysForCollection(t,n,s){const a=wa(),u=n.length+1,c=new Rt(n.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const g=d.getNext().value,p=g.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===u&&g.largestBatchId>s&&a.set(g.getKey(),g)}return dt.resolve(a)}getOverlaysForCollectionGroup(t,n,s,a){let u=new ve(((p,y)=>p-y));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>s){let y=u.get(p.largestBatchId);y===null&&(y=wa(),u=u.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const d=wa(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((p,y)=>d.set(p,y))),!(d.size()>=a)););return dt.resolve(d)}St(t,n,s){const a=this.overlays.get(s.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(s.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new mN(n,s));let u=this.qr.get(n);u===void 0&&(u=Gt(),this.qr.set(n,u)),this.qr.set(n,u.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(t){return dt.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,dt.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(){this.Qr=new Ye(en.$r),this.Ur=new Ye(en.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const s=new en(t,n);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(t,n){t.forEach((s=>this.addReference(s,n)))}removeReference(t,n){this.Gr(new en(t,n))}zr(t,n){t.forEach((s=>this.removeReference(s,n)))}jr(t){const n=new Rt(new _e([])),s=new en(n,t),a=new en(n,t+1),u=[];return this.Ur.forEachInRange([s,a],(c=>{this.Gr(c),u.push(c.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new Rt(new _e([])),s=new en(n,t),a=new en(n,t+1);let u=Gt();return this.Ur.forEachInRange([s,a],(c=>{u=u.add(c.key)})),u}containsKey(t){const n=new en(t,0),s=this.Qr.firstAfterOrEqual(n);return s!==null&&t.isEqual(s.key)}}class en{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return Rt.comparator(t.key,n.key)||Ft(t.Yr,n.Yr)}static Kr(t,n){return Ft(t.Yr,n.Yr)||Rt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ye(en.$r)}checkEmpty(t){return dt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,s,a){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new dN(u,n,s,a);this.mutationQueue.push(c);for(const d of a)this.Zr=this.Zr.add(new en(d.key,u)),this.indexManager.addToCollectionParentIndex(t,d.key.path.popLast());return dt.resolve(c)}lookupMutationBatch(t,n){return dt.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const s=n+1,a=this.ei(s),u=a<0?0:a;return dt.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return dt.resolve(this.mutationQueue.length===0?Ip:this.tr-1)}getAllMutationBatches(t){return dt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const s=new en(n,0),a=new en(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([s,a],(c=>{const d=this.Xr(c.Yr);u.push(d)})),dt.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,n){let s=new Ye(Ft);return n.forEach((a=>{const u=new en(a,0),c=new en(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,c],(d=>{s=s.add(d.Yr)}))})),dt.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(t,n){const s=n.path,a=s.length+1;let u=s;Rt.isDocumentKey(u)||(u=u.child(""));const c=new en(new Rt(u),0);let d=new Ye(Ft);return this.Zr.forEachWhile((g=>{const p=g.key.path;return!!s.isPrefixOf(p)&&(p.length===a&&(d=d.add(g.Yr)),!0)}),c),dt.resolve(this.ti(d))}ti(t){const n=[];return t.forEach((s=>{const a=this.Xr(s);a!==null&&n.push(a)})),n}removeMutationBatch(t,n){ne(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return dt.forEach(n.mutations,(a=>{const u=new en(a.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,a.key)})).next((()=>{this.Zr=s}))}ir(t){}containsKey(t,n){const s=new en(n,0),a=this.Zr.firstAfterOrEqual(s);return dt.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(t){return this.mutationQueue.length,dt.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(t){this.ri=t,this.docs=(function(){return new ve(Rt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const s=n.key,a=this.docs.get(s),u=a?a.size:0,c=this.ri(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const s=this.docs.get(n);return dt.resolve(s?s.document.mutableCopy():_n.newInvalidDocument(n))}getEntries(t,n){let s=$r();return n.forEach((a=>{const u=this.docs.get(a);s=s.insert(a,u?u.document.mutableCopy():_n.newInvalidDocument(a))})),dt.resolve(s)}getDocumentsMatchingQuery(t,n,s,a){let u=$r();const c=n.path,d=new Rt(c.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:p,value:{document:y}}=g.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||xC(RC(y),s)<=0||(a.has(y.key)||Bf(n,y))&&(u=u.insert(y.key,y.mutableCopy()))}return dt.resolve(u)}getAllFromCollectionGroup(t,n,s,a){Ct(9500)}ii(t,n){return dt.forEach(this.docs,(s=>n(s)))}newChangeBuffer(t){return new tD(this)}getSize(t){return dt.resolve(this.size)}}class tD extends $N{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((s,a)=>{a.isValidDocument()?n.push(this.Nr.addEntry(t,a)):this.Nr.removeEntry(s)})),dt.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(t){this.persistence=t,this.si=new La((n=>Dp(n)),Mp),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this.oi=0,this._i=new Up,this.targetCount=0,this.ai=tl.ur()}forEachTarget(t,n){return this.si.forEach(((s,a)=>n(a))),dt.resolve()}getLastRemoteSnapshotVersion(t){return dt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return dt.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),dt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.oi&&(this.oi=n),dt.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new tl(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,dt.resolve()}updateTargetData(t,n){return this.Pr(n),dt.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,dt.resolve()}removeTargets(t,n,s){let a=0;const u=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=n&&s.get(d.targetId)===null&&(this.si.delete(c),u.push(this.removeMatchingKeysForTargetId(t,d.targetId)),a++)})),dt.waitFor(u).next((()=>a))}getTargetCount(t){return dt.resolve(this.targetCount)}getTargetData(t,n){const s=this.si.get(n)||null;return dt.resolve(s)}addMatchingKeys(t,n,s){return this._i.Wr(n,s),dt.resolve()}removeMatchingKeys(t,n,s){this._i.zr(n,s);const a=this.persistence.referenceDelegate,u=[];return a&&n.forEach((c=>{u.push(a.markPotentiallyOrphaned(t,c))})),dt.waitFor(u)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),dt.resolve()}getMatchingKeysForTargetId(t,n){const s=this._i.Hr(n);return dt.resolve(s)}containsKey(t,n){return dt.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(t,n){this.ui={},this.overlays={},this.ci=new kf(0),this.li=!1,this.li=!0,this.hi=new ZN,this.referenceDelegate=t(this),this.Pi=new eD(this),this.indexManager=new zN,this.remoteDocumentCache=(function(a){return new JN(a)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new LN(n),this.Ii=new KN(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new QN,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let s=this.ui[t.toKey()];return s||(s=new WN(n,this.referenceDelegate),this.ui[t.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,s){vt("MemoryPersistence","Starting transaction:",t);const a=new nD(this.ci.next());return this.referenceDelegate.Ei(),s(a).next((u=>this.referenceDelegate.di(a).next((()=>u)))).toPromise().then((u=>(a.raiseOnCommittedEvent(),u)))}Ai(t,n){return dt.or(Object.values(this.ui).map((s=>()=>s.containsKey(t,n))))}}class nD extends CC{constructor(t){super(),this.currentSequenceNumber=t}}class zp{constructor(t){this.persistence=t,this.Ri=new Up,this.Vi=null}static mi(t){return new zp(t)}get fi(){if(this.Vi)return this.Vi;throw Ct(60996)}addReference(t,n,s){return this.Ri.addReference(s,n),this.fi.delete(s.toString()),dt.resolve()}removeReference(t,n,s){return this.Ri.removeReference(s,n),this.fi.add(s.toString()),dt.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),dt.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((a=>this.fi.add(a.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,n.targetId).next((a=>{a.forEach((u=>this.fi.add(u.toString())))})).next((()=>s.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return dt.forEach(this.fi,(s=>{const a=Rt.fromPath(s);return this.gi(t,a).next((u=>{u||n.removeEntry(a,Ot.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((s=>{s?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return dt.or([()=>dt.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class yf{constructor(t,n){this.persistence=t,this.pi=new La((s=>MC(s.path)),((s,a)=>s.isEqual(a))),this.garbageCollector=GN(this,n)}static mi(t,n){return new yf(t,n)}Ei(){}di(t){return dt.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((s=>n.next((a=>s+a))))}wr(t){let n=0;return this.pr(t,(s=>{n++})).next((()=>n))}pr(t,n){return dt.forEach(this.pi,((s,a)=>this.br(t,s,a).next((u=>u?dt.resolve():n(a)))))}removeTargets(t,n,s){return this.persistence.getTargetCache().removeTargets(t,n,s)}removeOrphanedDocuments(t,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),u=a.newChangeBuffer();return a.ii(t,(c=>this.br(t,c,n).next((d=>{d||(s++,u.removeEntry(c,Ot.min()))})))).next((()=>u.apply(t))).next((()=>s))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),dt.resolve()}removeTarget(t,n){const s=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),dt.resolve()}removeReference(t,n,s){return this.pi.set(s,t.currentSequenceNumber),dt.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),dt.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=Gh(t.data.value)),n}br(t,n,s){return dt.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const a=this.pi.get(n);return dt.resolve(a!==void 0&&a>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(t,n,s,a){this.targetId=t,this.fromCache=n,this.Es=s,this.ds=a}static As(t,n){let s=Gt(),a=Gt();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}return new Bp(t,n.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return $R()?8:NC(vn())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,s,a){const u={result:null};return this.ys(t,n).next((c=>{u.result=c})).next((()=>{if(!u.result)return this.ws(t,n,a,s).next((c=>{u.result=c}))})).next((()=>{if(u.result)return;const c=new iD;return this.Ss(t,n,c).next((d=>{if(u.result=d,this.Vs)return this.bs(t,n,c,d.size)}))})).next((()=>u.result))}bs(t,n,s,a){return s.documentReadCount<this.fs?(ko()<=jt.DEBUG&&vt("QueryEngine","SDK will not create cache indexes for query:",Po(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),dt.resolve()):(ko()<=jt.DEBUG&&vt("QueryEngine","Query:",Po(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.gs*a?(ko()<=jt.DEBUG&&vt("QueryEngine","The SDK decides to create cache indexes for query:",Po(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,rr(n))):dt.resolve())}ys(t,n){if(kE(n))return dt.resolve(null);let s=rr(n);return this.indexManager.getIndexType(t,s).next((a=>a===0?null:(n.limit!==null&&a===1&&(n=Bg(n,null,"F"),s=rr(n)),this.indexManager.getDocumentsMatchingTarget(t,s).next((u=>{const c=Gt(...u);return this.ps.getDocuments(t,c).next((d=>this.indexManager.getMinOffset(t,s).next((g=>{const p=this.Ds(n,d);return this.Cs(n,p,c,g.readTime)?this.ys(t,Bg(n,null,"F")):this.vs(t,p,n,g)}))))})))))}ws(t,n,s,a){return kE(n)||a.isEqual(Ot.min())?dt.resolve(null):this.ps.getDocuments(t,s).next((u=>{const c=this.Ds(n,u);return this.Cs(n,c,s,a)?dt.resolve(null):(ko()<=jt.DEBUG&&vt("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Po(n)),this.vs(t,c,n,AC(a,Pu)).next((d=>d)))}))}Ds(t,n){let s=new Ye(wS(t));return n.forEach(((a,u)=>{Bf(t,u)&&(s=s.add(u))})),s}Cs(t,n,s,a){if(t.limit===null)return!1;if(s.size!==n.size)return!0;const u=t.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(a)>0)}Ss(t,n,s){return ko()<=jt.DEBUG&&vt("QueryEngine","Using full collection scan to execute query:",Po(n)),this.ps.getDocumentsMatchingQuery(t,n,Us.min(),s)}vs(t,n,s,a){return this.ps.getDocumentsMatchingQuery(t,s,a).next((u=>(n.forEach((c=>{u=u.insert(c.key,c)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hp="LocalStore",sD=3e8;class aD{constructor(t,n,s,a){this.persistence=t,this.Fs=n,this.serializer=a,this.Ms=new ve(Ft),this.xs=new La((u=>Dp(u)),Mp),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(s)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new XN(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function oD(e,t,n,s){return new aD(e,t,n,s)}async function YS(e,t){const n=Vt(e);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next((u=>(a=u,n.Bs(t),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const c=[],d=[];let g=Gt();for(const p of a){c.push(p.batchId);for(const y of p.mutations)g=g.add(y.key)}for(const p of u){d.push(p.batchId);for(const y of p.mutations)g=g.add(y.key)}return n.localDocuments.getDocuments(s,g).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:d})))}))}))}function lD(e,t){const n=Vt(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const a=t.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,g,p,y){const v=p.batch,S=v.keys();let b=dt.resolve();return S.forEach((k=>{b=b.next((()=>y.getEntry(g,k))).next((P=>{const U=p.docVersions.get(k);ne(U!==null,48541),P.version.compareTo(U)<0&&(v.applyToRemoteDocument(P,p),P.isValidDocument()&&(P.setReadTime(p.commitVersion),y.addEntry(P)))}))})),b.next((()=>d.mutationQueue.removeMutationBatch(g,v)))})(n,s,t,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let g=Gt();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(g=g.add(d.batch.mutations[p].key));return g})(t)))).next((()=>n.localDocuments.getDocuments(s,a)))}))}function XS(e){const t=Vt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function uD(e,t){const n=Vt(e),s=t.snapshotVersion;let a=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const c=n.Ns.newChangeBuffer({trackRemovals:!0});a=n.Ms;const d=[];t.targetChanges.forEach(((y,v)=>{const S=a.get(v);if(!S)return;d.push(n.Pi.removeMatchingKeys(u,y.removedDocuments,v).next((()=>n.Pi.addMatchingKeys(u,y.addedDocuments,v))));let b=S.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(v)!==null?b=b.withResumeToken(dn.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):y.resumeToken.approximateByteSize()>0&&(b=b.withResumeToken(y.resumeToken,s)),a=a.insert(v,b),(function(P,U,B){return P.resumeToken.approximateByteSize()===0||U.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=sD?!0:B.addedDocuments.size+B.modifiedDocuments.size+B.removedDocuments.size>0})(S,b,y)&&d.push(n.Pi.updateTargetData(u,b))}));let g=$r(),p=Gt();if(t.documentUpdates.forEach((y=>{t.resolvedLimboDocuments.has(y)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(u,y))})),d.push(cD(u,c,t.documentUpdates).next((y=>{g=y.ks,p=y.qs}))),!s.isEqual(Ot.min())){const y=n.Pi.getLastRemoteSnapshotVersion(u).next((v=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,s)));d.push(y)}return dt.waitFor(d).next((()=>c.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,p))).next((()=>g))})).then((u=>(n.Ms=a,u)))}function cD(e,t,n){let s=Gt(),a=Gt();return n.forEach((u=>s=s.add(u))),t.getEntries(e,s).next((u=>{let c=$r();return n.forEach(((d,g)=>{const p=u.get(d);g.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),g.isNoDocument()&&g.version.isEqual(Ot.min())?(t.removeEntry(d,g.readTime),c=c.insert(d,g)):!p.isValidDocument()||g.version.compareTo(p.version)>0||g.version.compareTo(p.version)===0&&p.hasPendingWrites?(t.addEntry(g),c=c.insert(d,g)):vt(Hp,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",g.version)})),{ks:c,qs:a}}))}function hD(e,t){const n=Vt(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(t===void 0&&(t=Ip),n.mutationQueue.getNextMutationBatchAfterBatchId(s,t))))}function fD(e,t){const n=Vt(e);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let a;return n.Pi.getTargetData(s,t).next((u=>u?(a=u,dt.resolve(a)):n.Pi.allocateTargetId(s).next((c=>(a=new Ns(t,c,"TargetPurposeListen",s.currentSequenceNumber),n.Pi.addTargetData(s,a).next((()=>a)))))))})).then((s=>{const a=n.Ms.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(s.targetId,s),n.xs.set(t,s.targetId)),s}))}async function Gg(e,t,n){const s=Vt(e),a=s.Ms.get(t),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(c=>s.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!hl(c))throw c;vt(Hp,`Failed to update sequence numbers for target ${t}: ${c}`)}s.Ms=s.Ms.remove(t),s.xs.delete(a.target)}function XE(e,t,n){const s=Vt(e);let a=Ot.min(),u=Gt();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(g,p,y){const v=Vt(g),S=v.xs.get(y);return S!==void 0?dt.resolve(v.Ms.get(S)):v.Pi.getTargetData(p,y)})(s,c,rr(t)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,d.targetId).next((g=>{u=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,t,n?a:Ot.min(),n?u:Gt()))).next((d=>(dD(s,WC(t),d),{documents:d,Qs:u})))))}function dD(e,t,n){let s=e.Os.get(t)||Ot.min();n.forEach(((a,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),e.Os.set(t,s)}class KE{constructor(){this.activeTargetIds=rN()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class mD{constructor(){this.Mo=new KE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,s){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,s){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new KE,Promise.resolve()}handleUserChange(t,n,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="ConnectivityMonitor";class ZE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){vt(QE,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){vt(QE,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh=null;function $g(){return Nh===null?Nh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Nh++,"0x"+Nh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="RestConnection",pD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yD{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${s}/databases/${a}`,this.Wo=this.databaseId.database===cf?`project_id=${s}`:`project_id=${s}&database_id=${a}`}Go(t,n,s,a,u){const c=$g(),d=this.zo(t,n.toUriEncodedString());vt(cg,`Sending RPC '${t}' ${c}:`,d,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,a,u);const{host:p}=new URL(d),y=al(p);return this.Jo(t,d,g,s,y).then((v=>(vt(cg,`Received RPC '${t}' ${c}: `,v),v)),(v=>{throw Qo(cg,`RPC '${t}' ${c} failed with error: `,v,"url: ",d,"request:",s),v}))}Ho(t,n,s,a,u,c){return this.Go(t,n,s,a,u)}jo(t,n,s){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ul})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((a,u)=>t[u]=a)),s&&s.headers.forEach(((a,u)=>t[u]=a))}zo(t,n){const s=pD[t];return`${this.Uo}/v1/${n}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn="WebChannelConnection";class vD extends yD{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,s,a,u){const c=$g();return new Promise(((d,g)=>{const p=new W1;p.setWithCredentials(!0),p.listenOnce(J1.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Fh.NO_ERROR:const v=p.getResponseJson();vt(pn,`XHR for RPC '${t}' ${c} received:`,JSON.stringify(v)),d(v);break;case Fh.TIMEOUT:vt(pn,`RPC '${t}' ${c} timed out`),g(new St(mt.DEADLINE_EXCEEDED,"Request time out"));break;case Fh.HTTP_ERROR:const S=p.getStatus();if(vt(pn,`RPC '${t}' ${c} failed with status:`,S,"response text:",p.getResponseText()),S>0){let b=p.getResponseJson();Array.isArray(b)&&(b=b[0]);const k=b?.error;if(k&&k.status&&k.message){const P=(function(B){const j=B.toLowerCase().replace(/_/g,"-");return Object.values(mt).indexOf(j)>=0?j:mt.UNKNOWN})(k.status);g(new St(P,k.message))}else g(new St(mt.UNKNOWN,"Server responded with status "+p.getStatus()))}else g(new St(mt.UNAVAILABLE,"Connection failed."));break;default:Ct(9055,{l_:t,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{vt(pn,`RPC '${t}' ${c} completed.`)}}));const y=JSON.stringify(a);vt(pn,`RPC '${t}' ${c} sending request:`,a),p.send(n,"POST",y,s,15)}))}T_(t,n,s){const a=$g(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],c=nS(),d=eS(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(g.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,s),g.encodeInitMessageHeaders=!0;const y=u.join("");vt(pn,`Creating RPC '${t}' stream ${a}: ${y}`,g);const v=c.createWebChannel(y,g);this.I_(v);let S=!1,b=!1;const k=new _D({Yo:U=>{b?vt(pn,`Not sending because RPC '${t}' stream ${a} is closed:`,U):(S||(vt(pn,`Opening RPC '${t}' stream ${a} transport.`),v.open(),S=!0),vt(pn,`RPC '${t}' stream ${a} sending:`,U),v.send(U))},Zo:()=>v.close()}),P=(U,B,j)=>{U.listen(B,(X=>{try{j(X)}catch(F){setTimeout((()=>{throw F}),0)}}))};return P(v,vu.EventType.OPEN,(()=>{b||(vt(pn,`RPC '${t}' stream ${a} transport opened.`),k.o_())})),P(v,vu.EventType.CLOSE,(()=>{b||(b=!0,vt(pn,`RPC '${t}' stream ${a} transport closed`),k.a_(),this.E_(v))})),P(v,vu.EventType.ERROR,(U=>{b||(b=!0,Qo(pn,`RPC '${t}' stream ${a} transport errored. Name:`,U.name,"Message:",U.message),k.a_(new St(mt.UNAVAILABLE,"The operation could not be completed")))})),P(v,vu.EventType.MESSAGE,(U=>{if(!b){const B=U.data[0];ne(!!B,16349);const j=B,X=j?.error||j[0]?.error;if(X){vt(pn,`RPC '${t}' stream ${a} received error:`,X);const F=X.status;let at=(function(A){const R=Le[A];if(R!==void 0)return kS(R)})(F),Z=X.message;at===void 0&&(at=mt.INTERNAL,Z="Unknown error status: "+F+" with message "+X.message),b=!0,k.a_(new St(at,Z)),v.close()}else vt(pn,`RPC '${t}' stream ${a} received:`,B),k.u_(B)}})),P(d,tS.STAT_EVENT,(U=>{U.stat===Vg.PROXY?vt(pn,`RPC '${t}' stream ${a} detected buffering proxy`):U.stat===Vg.NOPROXY&&vt(pn,`RPC '${t}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{k.__()}),0),k}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function hg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(e){return new wN(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(t,n,s=1e3,a=1.5,u=6e4){this.Mi=t,this.timerId=n,this.d_=s,this.A_=a,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),a=Math.max(0,n-s);a>0&&vt("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE="PersistentStream";class QS{constructor(t,n,s,a,u,c,d,g){this.Mi=t,this.S_=s,this.b_=a,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new KS(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===mt.RESOURCE_EXHAUSTED?(Gr(n.toString()),Gr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===mt.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,a])=>{this.D_===n&&this.G_(s,a)}),(s=>{t((()=>{const a=new St(mt.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(a)}))}))}G_(t,n){const s=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{s((()=>this.z_(a)))})),this.stream.onMessage((a=>{s((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return vt(WE,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(vt(WE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ED extends QS{constructor(t,n,s,a,u,c){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,c),this.serializer=u}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=RN(this.serializer,t),s=(function(u){if(!("targetChange"in u))return Ot.min();const c=u.targetChange;return c.targetIds&&c.targetIds.length?Ot.min():c.readTime?sr(c.readTime):Ot.min()})(t);return this.listener.H_(n,s)}Y_(t){const n={};n.database=Fg(this.serializer),n.addTarget=(function(u,c){let d;const g=c.target;if(d=zg(g)?{documents:CN(u,g)}:{query:NN(u,g).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=US(u,c.resumeToken);const p=Hg(u,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(Ot.min())>0){d.readTime=pf(u,c.snapshotVersion.toTimestamp());const p=Hg(u,c.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,t);const s=MN(this.serializer,t);s&&(n.labels=s),this.q_(n)}Z_(t){const n={};n.database=Fg(this.serializer),n.removeTarget=t,this.q_(n)}}class TD extends QS{constructor(t,n,s,a,u,c){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,c),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return ne(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,ne(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){ne(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=IN(t.writeResults,t.commitTime),s=sr(t.commitTime);return this.listener.na(s,n)}ra(){const t={};t.database=Fg(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((s=>xN(this.serializer,s)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{}class wD extends SD{constructor(t,n,s,a){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new St(mt.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,s,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,c])=>this.connection.Go(t,qg(n,s),a,u,c))).catch((u=>{throw u.name==="FirebaseError"?(u.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new St(mt.UNKNOWN,u.toString())}))}Ho(t,n,s,a,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(t,qg(n,s),a,c,d,u))).catch((c=>{throw c.name==="FirebaseError"?(c.code===mt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new St(mt.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class bD{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gr(n),this.aa=!1):vt("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oa="RemoteStore";class AD{constructor(t,n,s,a,u){this.localStore=t,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{za(this)&&(vt(Oa,"Restarting streams for network reachability change."),await(async function(g){const p=Vt(g);p.Ea.add(4),await sc(p),p.Ra.set("Unknown"),p.Ea.delete(4),await Gf(p)})(this))}))})),this.Ra=new bD(s,a)}}async function Gf(e){if(za(e))for(const t of e.da)await t(!0)}async function sc(e){for(const t of e.da)await t(!1)}function ZS(e,t){const n=Vt(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Gp(n)?Fp(n):fl(n).O_()&&jp(n,t))}function qp(e,t){const n=Vt(e),s=fl(n);n.Ia.delete(t),s.O_()&&WS(n,t),n.Ia.size===0&&(s.O_()?s.L_():za(n)&&n.Ra.set("Unknown"))}function jp(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ot.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}fl(e).Y_(t)}function WS(e,t){e.Va.Ue(t),fl(e).Z_(t)}function Fp(e){e.Va=new vN({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),fl(e).start(),e.Ra.ua()}function Gp(e){return za(e)&&!fl(e).x_()&&e.Ia.size>0}function za(e){return Vt(e).Ea.size===0}function JS(e){e.Va=void 0}async function RD(e){e.Ra.set("Online")}async function xD(e){e.Ia.forEach(((t,n)=>{jp(e,t)}))}async function ID(e,t){JS(e),Gp(e)?(e.Ra.ha(t),Fp(e)):e.Ra.set("Unknown")}async function CD(e,t,n){if(e.Ra.set("Online"),t instanceof LS&&t.state===2&&t.cause)try{await(async function(a,u){const c=u.cause;for(const d of u.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.Va.removeTarget(d))})(e,t)}catch(s){vt(Oa,"Failed to remove targets %s: %s ",t.targetIds.join(","),s),await _f(e,s)}else if(t instanceof Xh?e.Va.Ze(t):t instanceof PS?e.Va.st(t):e.Va.tt(t),!n.isEqual(Ot.min()))try{const s=await XS(e.localStore);n.compareTo(s)>=0&&await(function(u,c){const d=u.Va.Tt(c);return d.targetChanges.forEach(((g,p)=>{if(g.resumeToken.approximateByteSize()>0){const y=u.Ia.get(p);y&&u.Ia.set(p,y.withResumeToken(g.resumeToken,c))}})),d.targetMismatches.forEach(((g,p)=>{const y=u.Ia.get(g);if(!y)return;u.Ia.set(g,y.withResumeToken(dn.EMPTY_BYTE_STRING,y.snapshotVersion)),WS(u,g);const v=new Ns(y.target,g,p,y.sequenceNumber);jp(u,v)})),u.remoteSyncer.applyRemoteEvent(d)})(e,n)}catch(s){vt(Oa,"Failed to raise snapshot:",s),await _f(e,s)}}async function _f(e,t,n){if(!hl(t))throw t;e.Ea.add(1),await sc(e),e.Ra.set("Offline"),n||(n=()=>XS(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{vt(Oa,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await Gf(e)}))}function tw(e,t){return t().catch((n=>_f(e,n,t)))}async function $f(e){const t=Vt(e),n=qs(t);let s=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Ip;for(;ND(t);)try{const a=await hD(t.localStore,s);if(a===null){t.Ta.length===0&&n.L_();break}s=a.batchId,DD(t,a)}catch(a){await _f(t,a)}ew(t)&&nw(t)}function ND(e){return za(e)&&e.Ta.length<10}function DD(e,t){e.Ta.push(t);const n=qs(e);n.O_()&&n.X_&&n.ea(t.mutations)}function ew(e){return za(e)&&!qs(e).x_()&&e.Ta.length>0}function nw(e){qs(e).start()}async function MD(e){qs(e).ra()}async function OD(e){const t=qs(e);for(const n of e.Ta)t.ea(n.mutations)}async function VD(e,t,n){const s=e.Ta.shift(),a=kp.from(s,t,n);await tw(e,(()=>e.remoteSyncer.applySuccessfulWrite(a))),await $f(e)}async function kD(e,t){t&&qs(e).X_&&await(async function(s,a){if((function(c){return pN(c)&&c!==mt.ABORTED})(a.code)){const u=s.Ta.shift();qs(s).B_(),await tw(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,a))),await $f(s)}})(e,t),ew(e)&&nw(e)}async function JE(e,t){const n=Vt(e);n.asyncQueue.verifyOperationInProgress(),vt(Oa,"RemoteStore received new credentials");const s=za(n);n.Ea.add(3),await sc(n),s&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Gf(n)}async function PD(e,t){const n=Vt(e);t?(n.Ea.delete(2),await Gf(n)):t||(n.Ea.add(2),await sc(n),n.Ra.set("Unknown"))}function fl(e){return e.ma||(e.ma=(function(n,s,a){const u=Vt(n);return u.sa(),new ED(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)})(e.datastore,e.asyncQueue,{Xo:RD.bind(null,e),t_:xD.bind(null,e),r_:ID.bind(null,e),H_:CD.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),Gp(e)?Fp(e):e.Ra.set("Unknown")):(await e.ma.stop(),JS(e))}))),e.ma}function qs(e){return e.fa||(e.fa=(function(n,s,a){const u=Vt(n);return u.sa(),new TD(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,a)})(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:MD.bind(null,e),r_:kD.bind(null,e),ta:OD.bind(null,e),na:VD.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await $f(e)):(await e.fa.stop(),e.Ta.length>0&&(vt(Oa,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(t,n,s,a,u){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=u,this.deferred=new ks,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,s,a,u){const c=Date.now()+s,d=new $p(t,n,c,a,u);return d.start(s),d}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new St(mt.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Yp(e,t){if(Gr("AsyncQueue",`${t}: ${e}`),hl(e))return new St(mt.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jo{static emptySet(t){return new jo(t.comparator)}constructor(t){this.comparator=t?(n,s)=>t(n,s)||Rt.comparator(n.key,s.key):(n,s)=>Rt.comparator(n.key,s.key),this.keyedMap=Eu(),this.sortedSet=new ve(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,s)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof jo)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),s=t.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,u=s.getNext().key;if(!a.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const s=new jo;return s.comparator=this.comparator,s.keyedMap=t,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(){this.ga=new ve(Rt.comparator)}track(t){const n=t.doc.key,s=this.ga.get(n);s?t.type!==0&&s.type===3?this.ga=this.ga.insert(n,t):t.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:t.doc}):t.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&s.type===0?this.ga=this.ga.remove(n):t.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):t.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):Ct(63341,{Rt:t,pa:s}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,s)=>{t.push(s)})),t}}class el{constructor(t,n,s,a,u,c,d,g,p){this.query=t,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=p}static fromInitialDocuments(t,n,s,a,u){const c=[];return n.forEach((d=>{c.push({type:0,doc:d})})),new el(t,n,jo.emptySet(n),c,s,a,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&zf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,s=t.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class UD{constructor(){this.queries=eT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const a=Vt(n),u=a.queries;a.queries=eT(),u.forEach(((c,d)=>{for(const g of d.Sa)g.onError(s)}))})(this,new St(mt.ABORTED,"Firestore shutting down"))}}function eT(){return new La((e=>SS(e)),zf)}async function zD(e,t){const n=Vt(e);let s=3;const a=t.query;let u=n.queries.get(a);u?!u.ba()&&t.Da()&&(s=2):(u=new LD,s=t.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(a,!0);break;case 1:u.wa=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(c){const d=Yp(c,`Initialization of query '${Po(t.query)}' failed`);return void t.onError(d)}n.queries.set(a,u),u.Sa.push(t),t.va(n.onlineState),u.wa&&t.Fa(u.wa)&&Xp(n)}async function BD(e,t){const n=Vt(e),s=t.query;let a=3;const u=n.queries.get(s);if(u){const c=u.Sa.indexOf(t);c>=0&&(u.Sa.splice(c,1),u.Sa.length===0?a=t.Da()?0:1:!u.ba()&&t.Da()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function HD(e,t){const n=Vt(e);let s=!1;for(const a of t){const u=a.query,c=n.queries.get(u);if(c){for(const d of c.Sa)d.Fa(a)&&(s=!0);c.wa=a}}s&&Xp(n)}function qD(e,t,n){const s=Vt(e),a=s.queries.get(t);if(a)for(const u of a.Sa)u.onError(n);s.queries.delete(t)}function Xp(e){e.Ca.forEach((t=>{t.next()}))}var Yg,nT;(nT=Yg||(Yg={})).Ma="default",nT.Cache="cache";class jD{constructor(t,n,s){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(t){if(!this.options.includeMetadataChanges){const s=[];for(const a of t.docChanges)a.type!==3&&s.push(a);t=new el(t.query,t.docs,t.oldDocs,s,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.qa||!s)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=el.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Yg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(t){this.key=t}}class rw{constructor(t){this.key=t}}class FD{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Gt(),this.mutatedKeys=Gt(),this.eu=wS(t),this.tu=new jo(this.eu)}get nu(){return this.Ya}ru(t,n){const s=n?n.iu:new tT,a=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,c=a,d=!1;const g=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(t.inorderTraversal(((y,v)=>{const S=a.get(y),b=Bf(this.query,v)?v:null,k=!!S&&this.mutatedKeys.has(S.key),P=!!b&&(b.hasLocalMutations||this.mutatedKeys.has(b.key)&&b.hasCommittedMutations);let U=!1;S&&b?S.data.isEqual(b.data)?k!==P&&(s.track({type:3,doc:b}),U=!0):this.su(S,b)||(s.track({type:2,doc:b}),U=!0,(g&&this.eu(b,g)>0||p&&this.eu(b,p)<0)&&(d=!0)):!S&&b?(s.track({type:0,doc:b}),U=!0):S&&!b&&(s.track({type:1,doc:S}),U=!0,(g||p)&&(d=!0)),U&&(b?(c=c.add(b),u=P?u.add(y):u.delete(y)):(c=c.delete(y),u=u.delete(y)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const y=this.query.limitType==="F"?c.last():c.first();c=c.delete(y.key),u=u.delete(y.key),s.track({type:1,doc:y})}return{tu:c,iu:s,Cs:d,mutatedKeys:u}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,s,a){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const c=t.iu.ya();c.sort(((y,v)=>(function(b,k){const P=U=>{switch(U){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ct(20277,{Rt:U})}};return P(b)-P(k)})(y.type,v.type)||this.eu(y.doc,v.doc))),this.ou(s),a=a??!1;const d=n&&!a?this._u():[],g=this.Xa.size===0&&this.current&&!a?1:0,p=g!==this.Za;return this.Za=g,c.length!==0||p?{snapshot:new el(this.query,t.tu,u,c,t.mutatedKeys,g===0,p,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new tT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=Gt(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const n=[];return t.forEach((s=>{this.Xa.has(s)||n.push(new rw(s))})),this.Xa.forEach((s=>{t.has(s)||n.push(new iw(s))})),n}cu(t){this.Ya=t.Qs,this.Xa=Gt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return el.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Kp="SyncEngine";class GD{constructor(t,n,s){this.query=t,this.targetId=n,this.view=s}}class $D{constructor(t){this.key=t,this.hu=!1}}class YD{constructor(t,n,s,a,u,c){this.localStore=t,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new La((d=>SS(d)),zf),this.Iu=new Map,this.Eu=new Set,this.du=new ve(Rt.comparator),this.Au=new Map,this.Ru=new Up,this.Vu={},this.mu=new Map,this.fu=tl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function XD(e,t,n=!0){const s=cw(e);let a;const u=s.Tu.get(t);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),a=u.view.lu()):a=await sw(s,t,n,!0),a}async function KD(e,t){const n=cw(e);await sw(n,t,!0,!1)}async function sw(e,t,n,s){const a=await fD(e.localStore,rr(t)),u=a.targetId,c=e.sharedClientState.addLocalQueryTarget(u,n);let d;return s&&(d=await QD(e,t,u,c==="current",a.resumeToken)),e.isPrimaryClient&&n&&ZS(e.remoteStore,a),d}async function QD(e,t,n,s,a){e.pu=(v,S,b)=>(async function(P,U,B,j){let X=U.view.ru(B);X.Cs&&(X=await XE(P.localStore,U.query,!1).then((({documents:N})=>U.view.ru(N,X))));const F=j&&j.targetChanges.get(U.targetId),at=j&&j.targetMismatches.get(U.targetId)!=null,Z=U.view.applyChanges(X,P.isPrimaryClient,F,at);return rT(P,U.targetId,Z.au),Z.snapshot})(e,v,S,b);const u=await XE(e.localStore,t,!0),c=new FD(t,u.Qs),d=c.ru(u.documents),g=rc.createSynthesizedTargetChangeForCurrentChange(n,s&&e.onlineState!=="Offline",a),p=c.applyChanges(d,e.isPrimaryClient,g);rT(e,n,p.au);const y=new GD(t,n,c);return e.Tu.set(t,y),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),p.snapshot}async function ZD(e,t,n){const s=Vt(e),a=s.Tu.get(t),u=s.Iu.get(a.targetId);if(u.length>1)return s.Iu.set(a.targetId,u.filter((c=>!zf(c,t)))),void s.Tu.delete(t);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Gg(s.localStore,a.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(a.targetId),n&&qp(s.remoteStore,a.targetId),Xg(s,a.targetId)})).catch(cl)):(Xg(s,a.targetId),await Gg(s.localStore,a.targetId,!0))}async function WD(e,t){const n=Vt(e),s=n.Tu.get(t),a=n.Iu.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),qp(n.remoteStore,s.targetId))}async function JD(e,t,n){const s=aM(e);try{const a=await(function(c,d){const g=Vt(c),p=de.now(),y=d.reduce(((b,k)=>b.add(k.key)),Gt());let v,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(b=>{let k=$r(),P=Gt();return g.Ns.getEntries(b,y).next((U=>{k=U,k.forEach(((B,j)=>{j.isValidDocument()||(P=P.add(B))}))})).next((()=>g.localDocuments.getOverlayedDocuments(b,k))).next((U=>{v=U;const B=[];for(const j of d){const X=hN(j,v.get(j.key).overlayedDocument);X!=null&&B.push(new Ua(j.key,X,gS(X.value.mapValue),qr.exists(!0)))}return g.mutationQueue.addMutationBatch(b,p,B,d)})).next((U=>{S=U;const B=U.applyToLocalDocumentSet(v,P);return g.documentOverlayCache.saveOverlays(b,U.batchId,B)}))})).then((()=>({batchId:S.batchId,changes:AS(v)})))})(s.localStore,t);s.sharedClientState.addPendingMutation(a.batchId),(function(c,d,g){let p=c.Vu[c.currentUser.toKey()];p||(p=new ve(Ft)),p=p.insert(d,g),c.Vu[c.currentUser.toKey()]=p})(s,a.batchId,n),await ac(s,a.changes),await $f(s.remoteStore)}catch(a){const u=Yp(a,"Failed to persist write");n.reject(u)}}async function aw(e,t){const n=Vt(e);try{const s=await uD(n.localStore,t);t.targetChanges.forEach(((a,u)=>{const c=n.Au.get(u);c&&(ne(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?ne(c.hu,14607):a.removedDocuments.size>0&&(ne(c.hu,42227),c.hu=!1))})),await ac(n,s,t)}catch(s){await cl(s)}}function iT(e,t,n){const s=Vt(e);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.Tu.forEach(((u,c)=>{const d=c.view.va(t);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const g=Vt(c);g.onlineState=d;let p=!1;g.queries.forEach(((y,v)=>{for(const S of v.Sa)S.va(d)&&(p=!0)})),p&&Xp(g)})(s.eventManager,t),a.length&&s.Pu.H_(a),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function tM(e,t,n){const s=Vt(e);s.sharedClientState.updateQueryState(t,"rejected",n);const a=s.Au.get(t),u=a&&a.key;if(u){let c=new ve(Rt.comparator);c=c.insert(u,_n.newNoDocument(u,Ot.min()));const d=Gt().add(u),g=new jf(Ot.min(),new Map,new ve(Ft),c,d);await aw(s,g),s.du=s.du.remove(u),s.Au.delete(t),Qp(s)}else await Gg(s.localStore,t,!1).then((()=>Xg(s,t,n))).catch(cl)}async function eM(e,t){const n=Vt(e),s=t.batch.batchId;try{const a=await lD(n.localStore,t);lw(n,s,null),ow(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await ac(n,a)}catch(a){await cl(a)}}async function nM(e,t,n){const s=Vt(e);try{const a=await(function(c,d){const g=Vt(c);return g.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return g.mutationQueue.lookupMutationBatch(p,d).next((v=>(ne(v!==null,37113),y=v.keys(),g.mutationQueue.removeMutationBatch(p,v)))).next((()=>g.mutationQueue.performConsistencyCheck(p))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(p,y,d))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>g.localDocuments.getDocuments(p,y)))}))})(s.localStore,t);lw(s,t,n),ow(s,t),s.sharedClientState.updateMutationState(t,"rejected",n),await ac(s,a)}catch(a){await cl(a)}}function ow(e,t){(e.mu.get(t)||[]).forEach((n=>{n.resolve()})),e.mu.delete(t)}function lw(e,t,n){const s=Vt(e);let a=s.Vu[s.currentUser.toKey()];if(a){const u=a.get(t);u&&(n?u.reject(n):u.resolve(),a=a.remove(t)),s.Vu[s.currentUser.toKey()]=a}}function Xg(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const s of e.Iu.get(t))e.Tu.delete(s),n&&e.Pu.yu(s,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((s=>{e.Ru.containsKey(s)||uw(e,s)}))}function uw(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(qp(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Qp(e))}function rT(e,t,n){for(const s of n)s instanceof iw?(e.Ru.addReference(s.key,t),iM(e,s)):s instanceof rw?(vt(Kp,"Document no longer in limbo: "+s.key),e.Ru.removeReference(s.key,t),e.Ru.containsKey(s.key)||uw(e,s.key)):Ct(19791,{wu:s})}function iM(e,t){const n=t.key,s=n.path.canonicalString();e.du.get(n)||e.Eu.has(s)||(vt(Kp,"New document in limbo: "+n),e.Eu.add(s),Qp(e))}function Qp(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Rt(_e.fromString(t)),s=e.fu.next();e.Au.set(s,new $D(n)),e.du=e.du.insert(n,s),ZS(e.remoteStore,new Ns(rr(Op(n.path)),s,"TargetPurposeLimboResolution",kf.ce))}}async function ac(e,t,n){const s=Vt(e),a=[],u=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((d,g)=>{c.push(s.pu(g,t,n).then((p=>{if((p||n)&&s.isPrimaryClient){const y=p?!p.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,y?"current":"not-current")}if(p){a.push(p);const y=Bp.As(g.targetId,p);u.push(y)}})))})),await Promise.all(c),s.Pu.H_(a),await(async function(g,p){const y=Vt(g);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>dt.forEach(p,(S=>dt.forEach(S.Es,(b=>y.persistence.referenceDelegate.addReference(v,S.targetId,b))).next((()=>dt.forEach(S.ds,(b=>y.persistence.referenceDelegate.removeReference(v,S.targetId,b)))))))))}catch(v){if(!hl(v))throw v;vt(Hp,"Failed to update sequence numbers: "+v)}for(const v of p){const S=v.targetId;if(!v.fromCache){const b=y.Ms.get(S),k=b.snapshotVersion,P=b.withLastLimboFreeSnapshotVersion(k);y.Ms=y.Ms.insert(S,P)}}})(s.localStore,u))}async function rM(e,t){const n=Vt(e);if(!n.currentUser.isEqual(t)){vt(Kp,"User change. New user:",t.toKey());const s=await YS(n.localStore,t);n.currentUser=t,(function(u,c){u.mu.forEach((d=>{d.forEach((g=>{g.reject(new St(mt.CANCELLED,c))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await ac(n,s.Ls)}}function sM(e,t){const n=Vt(e),s=n.Au.get(t);if(s&&s.hu)return Gt().add(s.key);{let a=Gt();const u=n.Iu.get(t);if(!u)return a;for(const c of u){const d=n.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}function cw(e){const t=Vt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=aw.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=sM.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=tM.bind(null,t),t.Pu.H_=HD.bind(null,t.eventManager),t.Pu.yu=qD.bind(null,t.eventManager),t}function aM(e){const t=Vt(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=eM.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=nM.bind(null,t),t}class vf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Ff(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return oD(this.persistence,new rD,t.initialUser,this.serializer)}Cu(t){return new $S(zp.mi,this.serializer)}Du(t){return new mD}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vf.provider={build:()=>new vf};class oM extends vf{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){ne(this.persistence.referenceDelegate instanceof yf,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new jN(s,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new $S((s=>yf.mi(s,n)),this.serializer)}}class Kg{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>iT(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=rM.bind(null,this.syncEngine),await PD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new UD})()}createDatastore(t){const n=Ff(t.databaseInfo.databaseId),s=(function(u){return new vD(u)})(t.databaseInfo);return(function(u,c,d,g){return new wD(u,c,d,g)})(t.authCredentials,t.appCheckCredentials,s,n)}createRemoteStore(t){return(function(s,a,u,c,d){return new AD(s,a,u,c,d)})(this.localStore,this.datastore,t.asyncQueue,(n=>iT(this.syncEngine,n,0)),(function(){return ZE.v()?new ZE:new gD})())}createSyncEngine(t,n){return(function(a,u,c,d,g,p,y){const v=new YD(a,u,c,d,g,p);return y&&(v.gu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Vt(n);vt(Oa,"RemoteStore shutting down."),s.Ea.add(5),await sc(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Kg.provider={build:()=>new Kg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Gr("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="FirestoreClient";class uM{constructor(t,n,s,a,u){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=yn.UNAUTHENTICATED,this.clientId=Rp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async c=>{vt(js,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(vt(js,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new ks;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const s=Yp(n,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}async function fg(e,t){e.asyncQueue.verifyOperationInProgress(),vt(js,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let s=n.initialUser;e.setCredentialChangeListener((async a=>{s.isEqual(a)||(await YS(t.localStore,a),s=a)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function sT(e,t){e.asyncQueue.verifyOperationInProgress();const n=await cM(e);vt(js,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((s=>JE(t.remoteStore,s))),e.setAppCheckTokenChangeListener(((s,a)=>JE(t.remoteStore,a))),e._onlineComponents=t}async function cM(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){vt(js,"Using user provided OfflineComponentProvider");try{await fg(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(a){return a.name==="FirebaseError"?a.code===mt.FAILED_PRECONDITION||a.code===mt.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(n))throw n;Qo("Error using user provided cache. Falling back to memory cache: "+n),await fg(e,new vf)}}else vt(js,"Using default OfflineComponentProvider"),await fg(e,new oM(void 0));return e._offlineComponents}async function hw(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(vt(js,"Using user provided OnlineComponentProvider"),await sT(e,e._uninitializedComponentsProvider._online)):(vt(js,"Using default OnlineComponentProvider"),await sT(e,new Kg))),e._onlineComponents}function hM(e){return hw(e).then((t=>t.syncEngine))}async function fM(e){const t=await hw(e),n=t.eventManager;return n.onListen=XD.bind(null,t.syncEngine),n.onUnlisten=ZD.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=KD.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=WD.bind(null,t.syncEngine),n}function dM(e,t,n={}){const s=new ks;return e.asyncQueue.enqueueAndForget((async()=>(function(u,c,d,g,p){const y=new lM({next:S=>{y.Nu(),c.enqueueAndForget((()=>BD(u,v)));const b=S.docs.has(d);!b&&S.fromCache?p.reject(new St(mt.UNAVAILABLE,"Failed to get document because the client is offline.")):b&&S.fromCache&&g&&g.source==="server"?p.reject(new St(mt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(S)},error:S=>p.reject(S)}),v=new jD(Op(d.path),y,{includeMetadataChanges:!0,qa:!0});return zD(u,v)})(await fM(e),e.asyncQueue,t,n,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw="firestore.googleapis.com",oT=!0;class lT{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new St(mt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=dw,this.ssl=oT}else this.host=t.host,this.ssl=t.ssl??oT;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=GS;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<HN)throw new St(mt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}bC("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fw(t.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new St(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new St(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new St(mt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(s,a){return s.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Zp{constructor(t,n,s,a){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new lT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new St(mt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new St(mt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new lT(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new dC;switch(s.type){case"firstParty":return new yC(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new St(mt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=aT.get(n);s&&(vt("ComponentProvider","Removing Datastore"),aT.delete(n),s.terminate())})(this),Promise.resolve()}}function mM(e,t,n,s={}){e=ku(e,Zp);const a=al(t),u=e._getSettings(),c={...u,emulatorOptions:e._getEmulatorOptions()},d=`${t}:${n}`;a&&(d1(`https://${d}`),m1("Firestore",!0)),u.host!==dw&&u.host!==d&&Qo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:d,ssl:a,emulatorOptions:s};if(!Ca(g,c)&&(e._setSettings(g),s.mockUserToken)){let p,y;if(typeof s.mockUserToken=="string")p=s.mockUserToken,y=yn.MOCK_USER;else{p=LR(s.mockUserToken,e._app?.options.projectId);const v=s.mockUserToken.sub||s.mockUserToken.user_id;if(!v)throw new St(mt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new yn(v)}e._authCredentials=new mC(new rS(p,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(t,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new Wp(this.firestore,t,this._query)}}class nn{constructor(t,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new qu(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new nn(this.firestore,t,this._key)}toJSON(){return{type:nn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,s){if(nc(n,nn._jsonSchema))return new nn(t,s||null,new Rt(_e.fromString(n.referencePath)))}}nn._jsonSchemaVersion="firestore/documentReference/1.0",nn._jsonSchema={type:Ue("string",nn._jsonSchemaVersion),referencePath:Ue("string")};class qu extends Wp{constructor(t,n,s){super(t,n,Op(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new nn(this.firestore,null,new Rt(t))}withConverter(t){return new qu(this.firestore,t,this._path)}}function gM(e,t,...n){if(e=yi(e),arguments.length===1&&(t=Rp.newId()),wC("doc","path",t),e instanceof Zp){const s=_e.fromString(t,...n);return SE(s),new nn(e,null,new Rt(s))}{if(!(e instanceof nn||e instanceof qu))throw new St(mt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=e._path.child(_e.fromString(t,...n));return SE(s),new nn(e.firestore,e instanceof qu?e.converter:null,new Rt(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uT="AsyncQueue";class cT{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new KS(this,"async_queue_retry"),this._c=()=>{const s=hg();s&&vt(uT,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=t;const n=hg();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=hg();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ks;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!hl(t))throw t;vt(uT,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((s=>{throw this.nc=s,this.rc=!1,Gr("INTERNAL UNHANDLED ERROR: ",hT(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(t,n,s){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const a=$p.createAndSchedule(this,t,n,s,(u=>this.hc(u)));return this.tc.push(a),a}uc(){this.nc&&Ct(47125,{Pc:hT(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function hT(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Jp extends Zp{constructor(t,n,s,a){super(t,n,s,a),this.type="firestore",this._queue=new cT,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new cT(t),this._firestoreClient=void 0,await t}}}function pM(e,t){const n=typeof e=="object"?e:_1(),s=typeof e=="string"?e:cf,a=mp(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const u=kR("firestore");u&&mM(a,...u)}return a}function mw(e){if(e._terminated)throw new St(mt.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||yM(e),e._firestoreClient}function yM(e){const t=e._freezeSettings(),n=(function(a,u,c,d){return new kC(a,u,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,fw(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(e._databaseId,e._app?.options.appId||"",e._persistenceKey,t);e._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new uM(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&(function(a){const u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}})(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new gi(dn.fromBase64String(t))}catch(n){throw new St(mt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new gi(dn.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:gi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(nc(t,gi._jsonSchema))return gi.fromBase64String(t.bytes)}}gi._jsonSchemaVersion="firestore/bytes/1.0",gi._jsonSchema={type:Ue("string",gi._jsonSchemaVersion),bytes:Ue("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new St(mt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new St(mt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new St(mt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return Ft(this._lat,t._lat)||Ft(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ar._jsonSchemaVersion}}static fromJSON(t){if(nc(t,ar._jsonSchema))return new ar(t.latitude,t.longitude)}}ar._jsonSchemaVersion="firestore/geoPoint/1.0",ar._jsonSchema={type:Ue("string",ar._jsonSchemaVersion),latitude:Ue("number"),longitude:Ue("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(s,a){if(s.length!==a.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==a[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:or._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(nc(t,or._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new or(t.vectorValues);throw new St(mt.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}or._jsonSchemaVersion="firestore/vectorValue/1.0",or._jsonSchema={type:Ue("string",or._jsonSchemaVersion),vectorValues:Ue("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M=/^__.*__$/;class vM{constructor(t,n,s){this.data=t,this.fieldMask=n,this.fieldTransforms=s}toMutation(t,n){return this.fieldMask!==null?new Ua(t,this.data,this.fieldMask,n,this.fieldTransforms):new ic(t,this.data,n,this.fieldTransforms)}}function pw(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ct(40011,{Ac:e})}}class ey{constructor(t,n,s,a,u,c){this.settings=t,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new ey({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.gc(t),s}yc(t){const n=this.path?.child(t),s=this.Vc({path:n,fc:!1});return s.Rc(),s}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Ef(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(pw(this.Ac)&&_M.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class EM{constructor(t,n,s){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=s||Ff(t)}Cc(t,n,s,a=!1){return new ey({Ac:t,methodName:n,Dc:s,path:fn.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function TM(e){const t=e._freezeSettings(),n=Ff(e._databaseId);return new EM(e._databaseId,!!t.ignoreUndefinedProperties,n)}function SM(e,t,n,s,a,u={}){const c=e.Cc(u.merge||u.mergeFields?2:0,t,n,a);Ew("Data must be an object, but it was:",c,s);const d=_w(s,c);let g,p;if(u.merge)g=new Ni(c.fieldMask),p=c.fieldTransforms;else if(u.mergeFields){const y=[];for(const v of u.mergeFields){const S=wM(t,v,n);if(!c.contains(S))throw new St(mt.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);AM(y,S)||y.push(S)}g=new Ni(y),p=c.fieldTransforms.filter((v=>g.covers(v.field)))}else g=null,p=c.fieldTransforms;return new vM(new mi(d),g,p)}function yw(e,t){if(vw(e=yi(e)))return Ew("Unsupported field value:",t,e),_w(e,t);if(e instanceof gw)return(function(s,a){if(!pw(a.Ac))throw a.Sc(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(a);u&&a.fieldTransforms.push(u)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(s,a){const u=[];let c=0;for(const d of s){let g=yw(d,a.wc(c));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),c++}return{arrayValue:{values:u}}})(e,t)}return(function(s,a){if((s=yi(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return sN(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=de.fromDate(s);return{timestampValue:pf(a.serializer,u)}}if(s instanceof de){const u=new de(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:pf(a.serializer,u)}}if(s instanceof ar)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof gi)return{bytesValue:US(a.serializer,s._byteString)};if(s instanceof nn){const u=a.databaseId,c=s.firestore._databaseId;if(!c.isEqual(u))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Lp(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof or)return(function(c,d){return{mapValue:{fields:{[dS]:{stringValue:mS},[hf]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw d.Sc("VectorValues must only contain numeric values.");return Vp(d.serializer,p)}))}}}}}})(s,a);throw a.Sc(`Unsupported field value: ${xp(s)}`)})(e,t)}function _w(e,t){const n={};return oS(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Pa(e,((s,a)=>{const u=yw(a,t.mc(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function vw(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof de||e instanceof ar||e instanceof gi||e instanceof nn||e instanceof gw||e instanceof or)}function Ew(e,t,n){if(!vw(n)||!sS(n)){const s=xp(n);throw s==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+s)}}function wM(e,t,n){if((t=yi(t))instanceof ty)return t._internalPath;if(typeof t=="string")return Tw(e,t);throw Ef("Field path arguments must be of type string or ",e,!1,void 0,n)}const bM=new RegExp("[~\\*/\\[\\]]");function Tw(e,t,n){if(t.search(bM)>=0)throw Ef(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ty(...t.split("."))._internalPath}catch{throw Ef(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Ef(e,t,n,s,a){const u=s&&!s.isEmpty(),c=a!==void 0;let d=`Function ${t}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(u||c)&&(g+=" (found",u&&(g+=` in field ${s}`),c&&(g+=` in document ${a}`),g+=")"),new St(mt.INVALID_ARGUMENT,d+e+g)}function AM(e,t){return e.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sw{constructor(t,n,s,a,u){this._firestore=t,this._userDataWriter=n,this._key=s,this._document=a,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new nn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new RM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(ww("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class RM extends Sw{data(){return super.data()}}function ww(e,t){return typeof t=="string"?Tw(e,t):t instanceof ty?t._internalPath:t._delegate._internalPath}class xM{convertValue(t,n="none"){switch(Hs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ce(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Bs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw Ct(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const s={};return Pa(t,((a,u)=>{s[a]=this.convertValue(u,n)})),s}convertVectorValue(t){const n=t.fields?.[hf].arrayValue?.values?.map((s=>Ce(s.doubleValue)));return new or(n)}convertGeoPoint(t){return new ar(Ce(t.latitude),Ce(t.longitude))}convertArray(t,n){return(t.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const s=Lf(t);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Lu(t));default:return null}}convertTimestamp(t){const n=zs(t);return new de(n.seconds,n.nanos)}convertDocumentKey(t,n){const s=_e.fromString(t);ne(FS(s),9688,{name:t});const a=new Uu(s.get(1),s.get(3)),u=new Rt(s.popFirst(5));return a.isEqual(n)||Gr(`Document ${u} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IM(e,t,n){let s;return s=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,s}class Su{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class xa extends Sw{constructor(t,n,s,a,u,c){super(t,n,s,a,c),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Kh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const s=this._document.data.field(ww("DocumentSnapshot.get",t));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new St(mt.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=xa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}xa._jsonSchemaVersion="firestore/documentSnapshot/1.0",xa._jsonSchema={type:Ue("string",xa._jsonSchemaVersion),bundleSource:Ue("string","DocumentSnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class Kh extends xa{data(t={}){return super.data(t)}}class Mu{constructor(t,n,s,a){this._firestore=t,this._userDataWriter=n,this._snapshot=a,this.metadata=new Su(a.hasPendingWrites,a.fromCache),this.query=s}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((s=>{t.call(n,new Kh(this._firestore,this._userDataWriter,s.key,s,new Su(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new St(mt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(a,u){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const g=new Kh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Su(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>u||d.type!==3)).map((d=>{const g=new Kh(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Su(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),y=c.indexOf(d.doc.key)),{type:CM(d.type),doc:g,oldIndex:p,newIndex:y}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new St(mt.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Mu._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Rp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],a=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),a.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function CM(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ct(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(e){e=ku(e,nn);const t=ku(e.firestore,Jp);return dM(mw(t),e._key).then((n=>VM(t,e,n)))}Mu._jsonSchemaVersion="firestore/querySnapshot/1.0",Mu._jsonSchema={type:Ue("string",Mu._jsonSchemaVersion),bundleSource:Ue("string","QuerySnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class DM extends xM{constructor(t){super(),this.firestore=t}convertBytes(t){return new gi(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new nn(this.firestore,null,n)}}function MM(e,t,n){e=ku(e,nn);const s=ku(e.firestore,Jp),a=IM(e.converter,t,n);return OM(s,[SM(TM(s),"setDoc",e._key,a,e.converter!==null,n).toMutation(e._key,qr.none())])}function OM(e,t){return(function(s,a){const u=new ks;return s.asyncQueue.enqueueAndForget((async()=>JD(await hM(s),a,u))),u.promise})(mw(e),t)}function VM(e,t,n){const s=n.docs.get(t._key),a=new DM(e);return new xa(e,a,t._key,s,new Su(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(a){ul=a})(ol),Xo(new Na("firestore",((s,{instanceIdentifier:a,options:u})=>{const c=s.getProvider("app").getImmediate(),d=new Jp(new gC(s.getProvider("auth-internal")),new _C(c,s.getProvider("app-check-internal")),(function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new St(mt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uu(p.options.projectId,y)})(c,a),c);return u={useFetchStreams:n,...u},d._setSettings(u),d}),"PUBLIC").setMultipleInstances(!0)),Os(_E,vE,t),Os(_E,vE,"esm2020")})();const kM={apiKey:"AIzaSyBsf13y09yMeY3y9glikn33VDhZQVG76AQ",authDomain:"visual-roadmap-app.firebaseapp.com",projectId:"visual-roadmap-app",storageBucket:"visual-roadmap-app.firebasestorage.app",messagingSenderId:"227055351639",appId:"1:227055351639:web:ef34f8aea11436fff37012",measurementId:"G-VZ88DVH1SN"},bw=y1(kM),ny=uC(bw),PM=pM(bw),Aw=it.createContext(),LM=({children:e})=>{const[t,n]=it.useState(null),[s,a]=it.useState(!0);it.useEffect(()=>Zx(ny,d=>{n(d),a(!1)}),[]);const u={currentUser:t};return gt.jsx(Aw.Provider,{value:u,children:!s&&e})},iy=()=>it.useContext(Aw),UM=new Ur,zM=async()=>{try{const t=(await _I(ny,UM)).user;return console.log("User signed in: ",t),t}catch(e){return console.error("Error during Google sign-in: ",e),null}},BM=async()=>{try{await Wx(ny),console.log("User signed out")}catch(e){console.error("Error signing out: ",e)}},HM=()=>gt.jsxs("svg",{className:"w-16 h-16 text-indigo-600 mx-auto mb-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[gt.jsx("circle",{cx:"12",cy:"12",r:"10"}),gt.jsx("path",{d:"M12 2L12 6"}),gt.jsx("path",{d:"M12 18L12 22"}),gt.jsx("path",{d:"M4.93 4.93L7.76 7.76"}),gt.jsx("path",{d:"M16.24 16.24L19.07 19.07"}),gt.jsx("path",{d:"M2 12L6 12"}),gt.jsx("path",{d:"M18 12L22 12"}),gt.jsx("path",{d:"M4.93 19.07L7.76 16.24"}),gt.jsx("path",{d:"M16.24 7.76L19.07 4.93"})]}),qM=()=>gt.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center items-center p-4",children:[gt.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[gt.jsx(HM,{}),gt.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Welcome to Pathfinder"}),gt.jsx("p",{className:"text-gray-600 mb-8",children:"Your visual guide to achieving your goals."}),gt.jsxs("button",{onClick:zM,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-lg flex items-center justify-center transition-transform transform hover:scale-105 duration-300 ease-in-out",children:[gt.jsx("img",{src:"https://upload.wikimedia.org/wikipedia/commons/c/c1/Google_%22G%22_logo.svg",alt:"Google icon",className:"w-6 h-6 mr-3 bg-white rounded-full p-0.5"}),"Sign in with Google"]})]}),gt.jsx("footer",{className:"mt-8 text-center text-gray-500",children:gt.jsxs("p",{children:[" ",new Date().getFullYear()," Pathfinder. All rights reserved."]})})]});function Cn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,s;n<e.length;n++)(s=Cn(e[n]))!==""&&(t+=(t&&" ")+s);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var dg={exports:{}},mg={},gg={exports:{}},pg={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fT;function jM(){if(fT)return pg;fT=1;var e=Qu();function t(v,S){return v===S&&(v!==0||1/v===1/S)||v!==v&&S!==S}var n=typeof Object.is=="function"?Object.is:t,s=e.useState,a=e.useEffect,u=e.useLayoutEffect,c=e.useDebugValue;function d(v,S){var b=S(),k=s({inst:{value:b,getSnapshot:S}}),P=k[0].inst,U=k[1];return u(function(){P.value=b,P.getSnapshot=S,g(P)&&U({inst:P})},[v,b,S]),a(function(){return g(P)&&U({inst:P}),v(function(){g(P)&&U({inst:P})})},[v]),c(b),b}function g(v){var S=v.getSnapshot;v=v.value;try{var b=S();return!n(v,b)}catch{return!0}}function p(v,S){return S()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:d;return pg.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:y,pg}var dT;function FM(){return dT||(dT=1,gg.exports=jM()),gg.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mT;function GM(){if(mT)return mg;mT=1;var e=Qu(),t=FM();function n(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var s=typeof Object.is=="function"?Object.is:n,a=t.useSyncExternalStore,u=e.useRef,c=e.useEffect,d=e.useMemo,g=e.useDebugValue;return mg.useSyncExternalStoreWithSelector=function(p,y,v,S,b){var k=u(null);if(k.current===null){var P={hasValue:!1,value:null};k.current=P}else P=k.current;k=d(function(){function B(Z){if(!j){if(j=!0,X=Z,Z=S(Z),b!==void 0&&P.hasValue){var N=P.value;if(b(N,Z))return F=N}return F=Z}if(N=F,s(X,Z))return N;var A=S(Z);return b!==void 0&&b(N,A)?(X=Z,N):(X=Z,F=A)}var j=!1,X,F,at=v===void 0?null:v;return[function(){return B(y())},at===null?void 0:function(){return B(at())}]},[y,v,S,b]);var U=a(p,k[0],k[1]);return c(function(){P.hasValue=!0,P.value=U},[U]),g(U),U},mg}var gT;function $M(){return gT||(gT=1,dg.exports=GM()),dg.exports}var YM=$M();const XM=hp(YM),KM={},pT=e=>{let t;const n=new Set,s=(y,v)=>{const S=typeof y=="function"?y(t):y;if(!Object.is(S,t)){const b=t;t=v??(typeof S!="object"||S===null)?S:Object.assign({},t,S),n.forEach(k=>k(t,b))}},a=()=>t,g={setState:s,getState:a,getInitialState:()=>p,subscribe:y=>(n.add(y),()=>n.delete(y)),destroy:()=>{(KM?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},p=t=e(s,a,g);return g},QM=e=>e?pT(e):pT,{useDebugValue:ZM}=ut,{useSyncExternalStoreWithSelector:WM}=XM,JM=e=>e;function Rw(e,t=JM,n){const s=WM(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return ZM(s),s}const yT=(e,t)=>{const n=QM(e),s=(a,u=t)=>Rw(n,a,u);return Object.assign(s,n),s},tO=(e,t)=>e?yT(e,t):yT;function En(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[s,a]of e)if(!Object.is(a,t.get(s)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const s of e)if(!t.has(s))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const s of n)if(!Object.prototype.hasOwnProperty.call(t,s)||!Object.is(e[s],t[s]))return!1;return!0}var eO={value:()=>{}};function Yf(){for(var e=0,t=arguments.length,n={},s;e<t;++e){if(!(s=arguments[e]+"")||s in n||/[\s.]/.test(s))throw new Error("illegal type: "+s);n[s]=[]}return new Qh(n)}function Qh(e){this._=e}function nO(e,t){return e.trim().split(/^|\s+/).map(function(n){var s="",a=n.indexOf(".");if(a>=0&&(s=n.slice(a+1),n=n.slice(0,a)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:s}})}Qh.prototype=Yf.prototype={constructor:Qh,on:function(e,t){var n=this._,s=nO(e+"",n),a,u=-1,c=s.length;if(arguments.length<2){for(;++u<c;)if((a=(e=s[u]).type)&&(a=iO(n[a],e.name)))return a;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++u<c;)if(a=(e=s[u]).type)n[a]=_T(n[a],e.name,t);else if(t==null)for(a in n)n[a]=_T(n[a],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Qh(e)},call:function(e,t){if((a=arguments.length-2)>0)for(var n=new Array(a),s=0,a,u;s<a;++s)n[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(u=this._[e],s=0,a=u.length;s<a;++s)u[s].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var s=this._[e],a=0,u=s.length;a<u;++a)s[a].value.apply(t,n)}};function iO(e,t){for(var n=0,s=e.length,a;n<s;++n)if((a=e[n]).name===t)return a.value}function _T(e,t,n){for(var s=0,a=e.length;s<a;++s)if(e[s].name===t){e[s]=eO,e=e.slice(0,s).concat(e.slice(s+1));break}return n!=null&&e.push({name:t,value:n}),e}var Qg="http://www.w3.org/1999/xhtml";const vT={svg:"http://www.w3.org/2000/svg",xhtml:Qg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Xf(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),vT.hasOwnProperty(t)?{space:vT[t],local:e}:e}function rO(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Qg&&t.documentElement.namespaceURI===Qg?t.createElement(e):t.createElementNS(n,e)}}function sO(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function xw(e){var t=Xf(e);return(t.local?sO:rO)(t)}function aO(){}function ry(e){return e==null?aO:function(){return this.querySelector(e)}}function oO(e){typeof e!="function"&&(e=ry(e));for(var t=this._groups,n=t.length,s=new Array(n),a=0;a<n;++a)for(var u=t[a],c=u.length,d=s[a]=new Array(c),g,p,y=0;y<c;++y)(g=u[y])&&(p=e.call(g,g.__data__,y,u))&&("__data__"in g&&(p.__data__=g.__data__),d[y]=p);return new Qn(s,this._parents)}function lO(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function uO(){return[]}function Iw(e){return e==null?uO:function(){return this.querySelectorAll(e)}}function cO(e){return function(){return lO(e.apply(this,arguments))}}function hO(e){typeof e=="function"?e=cO(e):e=Iw(e);for(var t=this._groups,n=t.length,s=[],a=[],u=0;u<n;++u)for(var c=t[u],d=c.length,g,p=0;p<d;++p)(g=c[p])&&(s.push(e.call(g,g.__data__,p,c)),a.push(g));return new Qn(s,a)}function Cw(e){return function(){return this.matches(e)}}function Nw(e){return function(t){return t.matches(e)}}var fO=Array.prototype.find;function dO(e){return function(){return fO.call(this.children,e)}}function mO(){return this.firstElementChild}function gO(e){return this.select(e==null?mO:dO(typeof e=="function"?e:Nw(e)))}var pO=Array.prototype.filter;function yO(){return Array.from(this.children)}function _O(e){return function(){return pO.call(this.children,e)}}function vO(e){return this.selectAll(e==null?yO:_O(typeof e=="function"?e:Nw(e)))}function EO(e){typeof e!="function"&&(e=Cw(e));for(var t=this._groups,n=t.length,s=new Array(n),a=0;a<n;++a)for(var u=t[a],c=u.length,d=s[a]=[],g,p=0;p<c;++p)(g=u[p])&&e.call(g,g.__data__,p,u)&&d.push(g);return new Qn(s,this._parents)}function Dw(e){return new Array(e.length)}function TO(){return new Qn(this._enter||this._groups.map(Dw),this._parents)}function Tf(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Tf.prototype={constructor:Tf,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function SO(e){return function(){return e}}function wO(e,t,n,s,a,u){for(var c=0,d,g=t.length,p=u.length;c<p;++c)(d=t[c])?(d.__data__=u[c],s[c]=d):n[c]=new Tf(e,u[c]);for(;c<g;++c)(d=t[c])&&(a[c]=d)}function bO(e,t,n,s,a,u,c){var d,g,p=new Map,y=t.length,v=u.length,S=new Array(y),b;for(d=0;d<y;++d)(g=t[d])&&(S[d]=b=c.call(g,g.__data__,d,t)+"",p.has(b)?a[d]=g:p.set(b,g));for(d=0;d<v;++d)b=c.call(e,u[d],d,u)+"",(g=p.get(b))?(s[d]=g,g.__data__=u[d],p.delete(b)):n[d]=new Tf(e,u[d]);for(d=0;d<y;++d)(g=t[d])&&p.get(S[d])===g&&(a[d]=g)}function AO(e){return e.__data__}function RO(e,t){if(!arguments.length)return Array.from(this,AO);var n=t?bO:wO,s=this._parents,a=this._groups;typeof e!="function"&&(e=SO(e));for(var u=a.length,c=new Array(u),d=new Array(u),g=new Array(u),p=0;p<u;++p){var y=s[p],v=a[p],S=v.length,b=xO(e.call(y,y&&y.__data__,p,s)),k=b.length,P=d[p]=new Array(k),U=c[p]=new Array(k),B=g[p]=new Array(S);n(y,v,P,U,B,b,t);for(var j=0,X=0,F,at;j<k;++j)if(F=P[j]){for(j>=X&&(X=j+1);!(at=U[X])&&++X<k;);F._next=at||null}}return c=new Qn(c,s),c._enter=d,c._exit=g,c}function xO(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function IO(){return new Qn(this._exit||this._groups.map(Dw),this._parents)}function CO(e,t,n){var s=this.enter(),a=this,u=this.exit();return typeof e=="function"?(s=e(s),s&&(s=s.selection())):s=s.append(e+""),t!=null&&(a=t(a),a&&(a=a.selection())),n==null?u.remove():n(u),s&&a?s.merge(a).order():a}function NO(e){for(var t=e.selection?e.selection():e,n=this._groups,s=t._groups,a=n.length,u=s.length,c=Math.min(a,u),d=new Array(a),g=0;g<c;++g)for(var p=n[g],y=s[g],v=p.length,S=d[g]=new Array(v),b,k=0;k<v;++k)(b=p[k]||y[k])&&(S[k]=b);for(;g<a;++g)d[g]=n[g];return new Qn(d,this._parents)}function DO(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var s=e[t],a=s.length-1,u=s[a],c;--a>=0;)(c=s[a])&&(u&&c.compareDocumentPosition(u)^4&&u.parentNode.insertBefore(c,u),u=c);return this}function MO(e){e||(e=OO);function t(v,S){return v&&S?e(v.__data__,S.__data__):!v-!S}for(var n=this._groups,s=n.length,a=new Array(s),u=0;u<s;++u){for(var c=n[u],d=c.length,g=a[u]=new Array(d),p,y=0;y<d;++y)(p=c[y])&&(g[y]=p);g.sort(t)}return new Qn(a,this._parents).order()}function OO(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function VO(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function kO(){return Array.from(this)}function PO(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var s=e[t],a=0,u=s.length;a<u;++a){var c=s[a];if(c)return c}return null}function LO(){let e=0;for(const t of this)++e;return e}function UO(){return!this.node()}function zO(e){for(var t=this._groups,n=0,s=t.length;n<s;++n)for(var a=t[n],u=0,c=a.length,d;u<c;++u)(d=a[u])&&e.call(d,d.__data__,u,a);return this}function BO(e){return function(){this.removeAttribute(e)}}function HO(e){return function(){this.removeAttributeNS(e.space,e.local)}}function qO(e,t){return function(){this.setAttribute(e,t)}}function jO(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function FO(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function GO(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function $O(e,t){var n=Xf(e);if(arguments.length<2){var s=this.node();return n.local?s.getAttributeNS(n.space,n.local):s.getAttribute(n)}return this.each((t==null?n.local?HO:BO:typeof t=="function"?n.local?GO:FO:n.local?jO:qO)(n,t))}function Mw(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function YO(e){return function(){this.style.removeProperty(e)}}function XO(e,t,n){return function(){this.style.setProperty(e,t,n)}}function KO(e,t,n){return function(){var s=t.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,n)}}function QO(e,t,n){return arguments.length>1?this.each((t==null?YO:typeof t=="function"?KO:XO)(e,t,n??"")):nl(this.node(),e)}function nl(e,t){return e.style.getPropertyValue(t)||Mw(e).getComputedStyle(e,null).getPropertyValue(t)}function ZO(e){return function(){delete this[e]}}function WO(e,t){return function(){this[e]=t}}function JO(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function t4(e,t){return arguments.length>1?this.each((t==null?ZO:typeof t=="function"?JO:WO)(e,t)):this.node()[e]}function Ow(e){return e.trim().split(/^|\s+/)}function sy(e){return e.classList||new Vw(e)}function Vw(e){this._node=e,this._names=Ow(e.getAttribute("class")||"")}Vw.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function kw(e,t){for(var n=sy(e),s=-1,a=t.length;++s<a;)n.add(t[s])}function Pw(e,t){for(var n=sy(e),s=-1,a=t.length;++s<a;)n.remove(t[s])}function e4(e){return function(){kw(this,e)}}function n4(e){return function(){Pw(this,e)}}function i4(e,t){return function(){(t.apply(this,arguments)?kw:Pw)(this,e)}}function r4(e,t){var n=Ow(e+"");if(arguments.length<2){for(var s=sy(this.node()),a=-1,u=n.length;++a<u;)if(!s.contains(n[a]))return!1;return!0}return this.each((typeof t=="function"?i4:t?e4:n4)(n,t))}function s4(){this.textContent=""}function a4(e){return function(){this.textContent=e}}function o4(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function l4(e){return arguments.length?this.each(e==null?s4:(typeof e=="function"?o4:a4)(e)):this.node().textContent}function u4(){this.innerHTML=""}function c4(e){return function(){this.innerHTML=e}}function h4(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function f4(e){return arguments.length?this.each(e==null?u4:(typeof e=="function"?h4:c4)(e)):this.node().innerHTML}function d4(){this.nextSibling&&this.parentNode.appendChild(this)}function m4(){return this.each(d4)}function g4(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function p4(){return this.each(g4)}function y4(e){var t=typeof e=="function"?e:xw(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function _4(){return null}function v4(e,t){var n=typeof e=="function"?e:xw(e),s=t==null?_4:typeof t=="function"?t:ry(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),s.apply(this,arguments)||null)})}function E4(){var e=this.parentNode;e&&e.removeChild(this)}function T4(){return this.each(E4)}function S4(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function w4(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function b4(e){return this.select(e?w4:S4)}function A4(e){return arguments.length?this.property("__data__",e):this.node().__data__}function R4(e){return function(t){e.call(this,t,this.__data__)}}function x4(e){return e.trim().split(/^|\s+/).map(function(t){var n="",s=t.indexOf(".");return s>=0&&(n=t.slice(s+1),t=t.slice(0,s)),{type:t,name:n}})}function I4(e){return function(){var t=this.__on;if(t){for(var n=0,s=-1,a=t.length,u;n<a;++n)u=t[n],(!e.type||u.type===e.type)&&u.name===e.name?this.removeEventListener(u.type,u.listener,u.options):t[++s]=u;++s?t.length=s:delete this.__on}}}function C4(e,t,n){return function(){var s=this.__on,a,u=R4(t);if(s){for(var c=0,d=s.length;c<d;++c)if((a=s[c]).type===e.type&&a.name===e.name){this.removeEventListener(a.type,a.listener,a.options),this.addEventListener(a.type,a.listener=u,a.options=n),a.value=t;return}}this.addEventListener(e.type,u,n),a={type:e.type,name:e.name,value:t,listener:u,options:n},s?s.push(a):this.__on=[a]}}function N4(e,t,n){var s=x4(e+""),a,u=s.length,c;if(arguments.length<2){var d=this.node().__on;if(d){for(var g=0,p=d.length,y;g<p;++g)for(a=0,y=d[g];a<u;++a)if((c=s[a]).type===y.type&&c.name===y.name)return y.value}return}for(d=t?C4:I4,a=0;a<u;++a)this.each(d(s[a],t,n));return this}function Lw(e,t,n){var s=Mw(e),a=s.CustomEvent;typeof a=="function"?a=new a(t,n):(a=s.document.createEvent("Event"),n?(a.initEvent(t,n.bubbles,n.cancelable),a.detail=n.detail):a.initEvent(t,!1,!1)),e.dispatchEvent(a)}function D4(e,t){return function(){return Lw(this,e,t)}}function M4(e,t){return function(){return Lw(this,e,t.apply(this,arguments))}}function O4(e,t){return this.each((typeof t=="function"?M4:D4)(e,t))}function*V4(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var s=e[t],a=0,u=s.length,c;a<u;++a)(c=s[a])&&(yield c)}var Uw=[null];function Qn(e,t){this._groups=e,this._parents=t}function oc(){return new Qn([[document.documentElement]],Uw)}function k4(){return this}Qn.prototype=oc.prototype={constructor:Qn,select:oO,selectAll:hO,selectChild:gO,selectChildren:vO,filter:EO,data:RO,enter:TO,exit:IO,join:CO,merge:NO,selection:k4,order:DO,sort:MO,call:VO,nodes:kO,node:PO,size:LO,empty:UO,each:zO,attr:$O,style:QO,property:t4,classed:r4,text:l4,html:f4,raise:m4,lower:p4,append:y4,insert:v4,remove:T4,clone:b4,datum:A4,on:N4,dispatch:O4,[Symbol.iterator]:V4};function xi(e){return typeof e=="string"?new Qn([[document.querySelector(e)]],[document.documentElement]):new Qn([[e]],Uw)}function P4(e){let t;for(;t=e.sourceEvent;)e=t;return e}function nr(e,t){if(e=P4(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var s=n.createSVGPoint();return s.x=e.clientX,s.y=e.clientY,s=s.matrixTransform(t.getScreenCTM().inverse()),[s.x,s.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[e.clientX-a.left-t.clientLeft,e.clientY-a.top-t.clientTop]}}return[e.pageX,e.pageY]}const L4={passive:!1},ju={capture:!0,passive:!1};function yg(e){e.stopImmediatePropagation()}function Fo(e){e.preventDefault(),e.stopImmediatePropagation()}function zw(e){var t=e.document.documentElement,n=xi(e).on("dragstart.drag",Fo,ju);"onselectstart"in t?n.on("selectstart.drag",Fo,ju):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Bw(e,t){var n=e.document.documentElement,s=xi(e).on("dragstart.drag",null);t&&(s.on("click.drag",Fo,ju),setTimeout(function(){s.on("click.drag",null)},0)),"onselectstart"in n?s.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Dh=e=>()=>e;function Zg(e,{sourceEvent:t,subject:n,target:s,identifier:a,active:u,x:c,y:d,dx:g,dy:p,dispatch:y}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:a,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:d,enumerable:!0,configurable:!0},dx:{value:g,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:y}})}Zg.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function U4(e){return!e.ctrlKey&&!e.button}function z4(){return this.parentNode}function B4(e,t){return t??{x:e.x,y:e.y}}function H4(){return navigator.maxTouchPoints||"ontouchstart"in this}function q4(){var e=U4,t=z4,n=B4,s=H4,a={},u=Yf("start","drag","end"),c=0,d,g,p,y,v=0;function S(F){F.on("mousedown.drag",b).filter(s).on("touchstart.drag",U).on("touchmove.drag",B,L4).on("touchend.drag touchcancel.drag",j).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(F,at){if(!(y||!e.call(this,F,at))){var Z=X(this,t.call(this,F,at),F,at,"mouse");Z&&(xi(F.view).on("mousemove.drag",k,ju).on("mouseup.drag",P,ju),zw(F.view),yg(F),p=!1,d=F.clientX,g=F.clientY,Z("start",F))}}function k(F){if(Fo(F),!p){var at=F.clientX-d,Z=F.clientY-g;p=at*at+Z*Z>v}a.mouse("drag",F)}function P(F){xi(F.view).on("mousemove.drag mouseup.drag",null),Bw(F.view,p),Fo(F),a.mouse("end",F)}function U(F,at){if(e.call(this,F,at)){var Z=F.changedTouches,N=t.call(this,F,at),A=Z.length,R,D;for(R=0;R<A;++R)(D=X(this,N,F,at,Z[R].identifier,Z[R]))&&(yg(F),D("start",F,Z[R]))}}function B(F){var at=F.changedTouches,Z=at.length,N,A;for(N=0;N<Z;++N)(A=a[at[N].identifier])&&(Fo(F),A("drag",F,at[N]))}function j(F){var at=F.changedTouches,Z=at.length,N,A;for(y&&clearTimeout(y),y=setTimeout(function(){y=null},500),N=0;N<Z;++N)(A=a[at[N].identifier])&&(yg(F),A("end",F,at[N]))}function X(F,at,Z,N,A,R){var D=u.copy(),O=nr(R||Z,at),L,I,M;if((M=n.call(F,new Zg("beforestart",{sourceEvent:Z,target:S,identifier:A,active:c,x:O[0],y:O[1],dx:0,dy:0,dispatch:D}),N))!=null)return L=M.x-O[0]||0,I=M.y-O[1]||0,function et(V,G,tt){var Y=O,C;switch(V){case"start":a[A]=et,C=c++;break;case"end":delete a[A],--c;case"drag":O=nr(tt||G,at),C=c;break}D.call(V,F,new Zg(V,{sourceEvent:G,subject:M,target:S,identifier:A,active:C,x:O[0]+L,y:O[1]+I,dx:O[0]-Y[0],dy:O[1]-Y[1],dispatch:D}),N)}}return S.filter=function(F){return arguments.length?(e=typeof F=="function"?F:Dh(!!F),S):e},S.container=function(F){return arguments.length?(t=typeof F=="function"?F:Dh(F),S):t},S.subject=function(F){return arguments.length?(n=typeof F=="function"?F:Dh(F),S):n},S.touchable=function(F){return arguments.length?(s=typeof F=="function"?F:Dh(!!F),S):s},S.on=function(){var F=u.on.apply(u,arguments);return F===u?S:F},S.clickDistance=function(F){return arguments.length?(v=(F=+F)*F,S):Math.sqrt(v)},S}function ay(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Hw(e,t){var n=Object.create(e.prototype);for(var s in t)n[s]=t[s];return n}function lc(){}var Fu=.7,Sf=1/Fu,Go="\\s*([+-]?\\d+)\\s*",Gu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",lr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",j4=/^#([0-9a-f]{3,8})$/,F4=new RegExp(`^rgb\\(${Go},${Go},${Go}\\)$`),G4=new RegExp(`^rgb\\(${lr},${lr},${lr}\\)$`),$4=new RegExp(`^rgba\\(${Go},${Go},${Go},${Gu}\\)$`),Y4=new RegExp(`^rgba\\(${lr},${lr},${lr},${Gu}\\)$`),X4=new RegExp(`^hsl\\(${Gu},${lr},${lr}\\)$`),K4=new RegExp(`^hsla\\(${Gu},${lr},${lr},${Gu}\\)$`),ET={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ay(lc,$u,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:TT,formatHex:TT,formatHex8:Q4,formatHsl:Z4,formatRgb:ST,toString:ST});function TT(){return this.rgb().formatHex()}function Q4(){return this.rgb().formatHex8()}function Z4(){return qw(this).formatHsl()}function ST(){return this.rgb().formatRgb()}function $u(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=j4.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?wT(t):n===3?new Pn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Mh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Mh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=F4.exec(e))?new Pn(t[1],t[2],t[3],1):(t=G4.exec(e))?new Pn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=$4.exec(e))?Mh(t[1],t[2],t[3],t[4]):(t=Y4.exec(e))?Mh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=X4.exec(e))?RT(t[1],t[2]/100,t[3]/100,1):(t=K4.exec(e))?RT(t[1],t[2]/100,t[3]/100,t[4]):ET.hasOwnProperty(e)?wT(ET[e]):e==="transparent"?new Pn(NaN,NaN,NaN,0):null}function wT(e){return new Pn(e>>16&255,e>>8&255,e&255,1)}function Mh(e,t,n,s){return s<=0&&(e=t=n=NaN),new Pn(e,t,n,s)}function W4(e){return e instanceof lc||(e=$u(e)),e?(e=e.rgb(),new Pn(e.r,e.g,e.b,e.opacity)):new Pn}function Wg(e,t,n,s){return arguments.length===1?W4(e):new Pn(e,t,n,s??1)}function Pn(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}ay(Pn,Wg,Hw(lc,{brighter(e){return e=e==null?Sf:Math.pow(Sf,e),new Pn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Fu:Math.pow(Fu,e),new Pn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Pn(Ia(this.r),Ia(this.g),Ia(this.b),wf(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bT,formatHex:bT,formatHex8:J4,formatRgb:AT,toString:AT}));function bT(){return`#${ba(this.r)}${ba(this.g)}${ba(this.b)}`}function J4(){return`#${ba(this.r)}${ba(this.g)}${ba(this.b)}${ba((isNaN(this.opacity)?1:this.opacity)*255)}`}function AT(){const e=wf(this.opacity);return`${e===1?"rgb(":"rgba("}${Ia(this.r)}, ${Ia(this.g)}, ${Ia(this.b)}${e===1?")":`, ${e})`}`}function wf(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ia(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ba(e){return e=Ia(e),(e<16?"0":"")+e.toString(16)}function RT(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ii(e,t,n,s)}function qw(e){if(e instanceof Ii)return new Ii(e.h,e.s,e.l,e.opacity);if(e instanceof lc||(e=$u(e)),!e)return new Ii;if(e instanceof Ii)return e;e=e.rgb();var t=e.r/255,n=e.g/255,s=e.b/255,a=Math.min(t,n,s),u=Math.max(t,n,s),c=NaN,d=u-a,g=(u+a)/2;return d?(t===u?c=(n-s)/d+(n<s)*6:n===u?c=(s-t)/d+2:c=(t-n)/d+4,d/=g<.5?u+a:2-u-a,c*=60):d=g>0&&g<1?0:c,new Ii(c,d,g,e.opacity)}function tV(e,t,n,s){return arguments.length===1?qw(e):new Ii(e,t,n,s??1)}function Ii(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}ay(Ii,tV,Hw(lc,{brighter(e){return e=e==null?Sf:Math.pow(Sf,e),new Ii(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Fu:Math.pow(Fu,e),new Ii(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*t,a=2*n-s;return new Pn(_g(e>=240?e-240:e+120,a,s),_g(e,a,s),_g(e<120?e+240:e-120,a,s),this.opacity)},clamp(){return new Ii(xT(this.h),Oh(this.s),Oh(this.l),wf(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=wf(this.opacity);return`${e===1?"hsl(":"hsla("}${xT(this.h)}, ${Oh(this.s)*100}%, ${Oh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function xT(e){return e=(e||0)%360,e<0?e+360:e}function Oh(e){return Math.max(0,Math.min(1,e||0))}function _g(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const jw=e=>()=>e;function eV(e,t){return function(n){return e+n*t}}function nV(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}function iV(e){return(e=+e)==1?Fw:function(t,n){return n-t?nV(t,n,e):jw(isNaN(t)?n:t)}}function Fw(e,t){var n=t-e;return n?eV(e,n):jw(isNaN(e)?t:e)}const IT=(function e(t){var n=iV(t);function s(a,u){var c=n((a=Wg(a)).r,(u=Wg(u)).r),d=n(a.g,u.g),g=n(a.b,u.b),p=Fw(a.opacity,u.opacity);return function(y){return a.r=c(y),a.g=d(y),a.b=g(y),a.opacity=p(y),a+""}}return s.gamma=e,s})(1);function bs(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Jg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,vg=new RegExp(Jg.source,"g");function rV(e){return function(){return e}}function sV(e){return function(t){return e(t)+""}}function aV(e,t){var n=Jg.lastIndex=vg.lastIndex=0,s,a,u,c=-1,d=[],g=[];for(e=e+"",t=t+"";(s=Jg.exec(e))&&(a=vg.exec(t));)(u=a.index)>n&&(u=t.slice(n,u),d[c]?d[c]+=u:d[++c]=u),(s=s[0])===(a=a[0])?d[c]?d[c]+=a:d[++c]=a:(d[++c]=null,g.push({i:c,x:bs(s,a)})),n=vg.lastIndex;return n<t.length&&(u=t.slice(n),d[c]?d[c]+=u:d[++c]=u),d.length<2?g[0]?sV(g[0].x):rV(t):(t=g.length,function(p){for(var y=0,v;y<t;++y)d[(v=g[y]).i]=v.x(p);return d.join("")})}var CT=180/Math.PI,tp={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Gw(e,t,n,s,a,u){var c,d,g;return(c=Math.sqrt(e*e+t*t))&&(e/=c,t/=c),(g=e*n+t*s)&&(n-=e*g,s-=t*g),(d=Math.sqrt(n*n+s*s))&&(n/=d,s/=d,g/=d),e*s<t*n&&(e=-e,t=-t,g=-g,c=-c),{translateX:a,translateY:u,rotate:Math.atan2(t,e)*CT,skewX:Math.atan(g)*CT,scaleX:c,scaleY:d}}var Vh;function oV(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?tp:Gw(t.a,t.b,t.c,t.d,t.e,t.f)}function lV(e){return e==null||(Vh||(Vh=document.createElementNS("http://www.w3.org/2000/svg","g")),Vh.setAttribute("transform",e),!(e=Vh.transform.baseVal.consolidate()))?tp:(e=e.matrix,Gw(e.a,e.b,e.c,e.d,e.e,e.f))}function $w(e,t,n,s){function a(p){return p.length?p.pop()+" ":""}function u(p,y,v,S,b,k){if(p!==v||y!==S){var P=b.push("translate(",null,t,null,n);k.push({i:P-4,x:bs(p,v)},{i:P-2,x:bs(y,S)})}else(v||S)&&b.push("translate("+v+t+S+n)}function c(p,y,v,S){p!==y?(p-y>180?y+=360:y-p>180&&(p+=360),S.push({i:v.push(a(v)+"rotate(",null,s)-2,x:bs(p,y)})):y&&v.push(a(v)+"rotate("+y+s)}function d(p,y,v,S){p!==y?S.push({i:v.push(a(v)+"skewX(",null,s)-2,x:bs(p,y)}):y&&v.push(a(v)+"skewX("+y+s)}function g(p,y,v,S,b,k){if(p!==v||y!==S){var P=b.push(a(b)+"scale(",null,",",null,")");k.push({i:P-4,x:bs(p,v)},{i:P-2,x:bs(y,S)})}else(v!==1||S!==1)&&b.push(a(b)+"scale("+v+","+S+")")}return function(p,y){var v=[],S=[];return p=e(p),y=e(y),u(p.translateX,p.translateY,y.translateX,y.translateY,v,S),c(p.rotate,y.rotate,v,S),d(p.skewX,y.skewX,v,S),g(p.scaleX,p.scaleY,y.scaleX,y.scaleY,v,S),p=y=null,function(b){for(var k=-1,P=S.length,U;++k<P;)v[(U=S[k]).i]=U.x(b);return v.join("")}}}var uV=$w(oV,"px, ","px)","deg)"),cV=$w(lV,", ",")",")"),hV=1e-12;function NT(e){return((e=Math.exp(e))+1/e)/2}function fV(e){return((e=Math.exp(e))-1/e)/2}function dV(e){return((e=Math.exp(2*e))-1)/(e+1)}const mV=(function e(t,n,s){function a(u,c){var d=u[0],g=u[1],p=u[2],y=c[0],v=c[1],S=c[2],b=y-d,k=v-g,P=b*b+k*k,U,B;if(P<hV)B=Math.log(S/p)/t,U=function(N){return[d+N*b,g+N*k,p*Math.exp(t*N*B)]};else{var j=Math.sqrt(P),X=(S*S-p*p+s*P)/(2*p*n*j),F=(S*S-p*p-s*P)/(2*S*n*j),at=Math.log(Math.sqrt(X*X+1)-X),Z=Math.log(Math.sqrt(F*F+1)-F);B=(Z-at)/t,U=function(N){var A=N*B,R=NT(at),D=p/(n*j)*(R*dV(t*A+at)-fV(at));return[d+D*b,g+D*k,p*R/NT(t*A+at)]}}return U.duration=B*1e3*t/Math.SQRT2,U}return a.rho=function(u){var c=Math.max(.001,+u),d=c*c,g=d*d;return e(c,d,g)},a})(Math.SQRT2,2,4);var il=0,wu=0,mu=0,Yw=1e3,bf,bu,Af=0,Va=0,Kf=0,Yu=typeof performance=="object"&&performance.now?performance:Date,Xw=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function oy(){return Va||(Xw(gV),Va=Yu.now()+Kf)}function gV(){Va=0}function Rf(){this._call=this._time=this._next=null}Rf.prototype=Kw.prototype={constructor:Rf,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?oy():+n)+(t==null?0:+t),!this._next&&bu!==this&&(bu?bu._next=this:bf=this,bu=this),this._call=e,this._time=n,ep()},stop:function(){this._call&&(this._call=null,this._time=1/0,ep())}};function Kw(e,t,n){var s=new Rf;return s.restart(e,t,n),s}function pV(){oy(),++il;for(var e=bf,t;e;)(t=Va-e._time)>=0&&e._call.call(void 0,t),e=e._next;--il}function DT(){Va=(Af=Yu.now())+Kf,il=wu=0;try{pV()}finally{il=0,_V(),Va=0}}function yV(){var e=Yu.now(),t=e-Af;t>Yw&&(Kf-=t,Af=e)}function _V(){for(var e,t=bf,n,s=1/0;t;)t._call?(s>t._time&&(s=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:bf=n);bu=e,ep(s)}function ep(e){if(!il){wu&&(wu=clearTimeout(wu));var t=e-Va;t>24?(e<1/0&&(wu=setTimeout(DT,e-Yu.now()-Kf)),mu&&(mu=clearInterval(mu))):(mu||(Af=Yu.now(),mu=setInterval(yV,Yw)),il=1,Xw(DT))}}function MT(e,t,n){var s=new Rf;return t=t==null?0:+t,s.restart(a=>{s.stop(),e(a+t)},t,n),s}var vV=Yf("start","end","cancel","interrupt"),EV=[],Qw=0,OT=1,np=2,Zh=3,VT=4,ip=5,Wh=6;function Qf(e,t,n,s,a,u){var c=e.__transition;if(!c)e.__transition={};else if(n in c)return;TV(e,n,{name:t,index:s,group:a,on:vV,tween:EV,time:u.time,delay:u.delay,duration:u.duration,ease:u.ease,timer:null,state:Qw})}function ly(e,t){var n=Oi(e,t);if(n.state>Qw)throw new Error("too late; already scheduled");return n}function fr(e,t){var n=Oi(e,t);if(n.state>Zh)throw new Error("too late; already running");return n}function Oi(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function TV(e,t,n){var s=e.__transition,a;s[t]=n,n.timer=Kw(u,0,n.time);function u(p){n.state=OT,n.timer.restart(c,n.delay,n.time),n.delay<=p&&c(p-n.delay)}function c(p){var y,v,S,b;if(n.state!==OT)return g();for(y in s)if(b=s[y],b.name===n.name){if(b.state===Zh)return MT(c);b.state===VT?(b.state=Wh,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete s[y]):+y<t&&(b.state=Wh,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete s[y])}if(MT(function(){n.state===Zh&&(n.state=VT,n.timer.restart(d,n.delay,n.time),d(p))}),n.state=np,n.on.call("start",e,e.__data__,n.index,n.group),n.state===np){for(n.state=Zh,a=new Array(S=n.tween.length),y=0,v=-1;y<S;++y)(b=n.tween[y].value.call(e,e.__data__,n.index,n.group))&&(a[++v]=b);a.length=v+1}}function d(p){for(var y=p<n.duration?n.ease.call(null,p/n.duration):(n.timer.restart(g),n.state=ip,1),v=-1,S=a.length;++v<S;)a[v].call(e,y);n.state===ip&&(n.on.call("end",e,e.__data__,n.index,n.group),g())}function g(){n.state=Wh,n.timer.stop(),delete s[t];for(var p in s)return;delete e.__transition}}function Jh(e,t){var n=e.__transition,s,a,u=!0,c;if(n){t=t==null?null:t+"";for(c in n){if((s=n[c]).name!==t){u=!1;continue}a=s.state>np&&s.state<ip,s.state=Wh,s.timer.stop(),s.on.call(a?"interrupt":"cancel",e,e.__data__,s.index,s.group),delete n[c]}u&&delete e.__transition}}function SV(e){return this.each(function(){Jh(this,e)})}function wV(e,t){var n,s;return function(){var a=fr(this,e),u=a.tween;if(u!==n){s=n=u;for(var c=0,d=s.length;c<d;++c)if(s[c].name===t){s=s.slice(),s.splice(c,1);break}}a.tween=s}}function bV(e,t,n){var s,a;if(typeof n!="function")throw new Error;return function(){var u=fr(this,e),c=u.tween;if(c!==s){a=(s=c).slice();for(var d={name:t,value:n},g=0,p=a.length;g<p;++g)if(a[g].name===t){a[g]=d;break}g===p&&a.push(d)}u.tween=a}}function AV(e,t){var n=this._id;if(e+="",arguments.length<2){for(var s=Oi(this.node(),n).tween,a=0,u=s.length,c;a<u;++a)if((c=s[a]).name===e)return c.value;return null}return this.each((t==null?wV:bV)(n,e,t))}function uy(e,t,n){var s=e._id;return e.each(function(){var a=fr(this,s);(a.value||(a.value={}))[t]=n.apply(this,arguments)}),function(a){return Oi(a,s).value[t]}}function Zw(e,t){var n;return(typeof t=="number"?bs:t instanceof $u?IT:(n=$u(t))?(t=n,IT):aV)(e,t)}function RV(e){return function(){this.removeAttribute(e)}}function xV(e){return function(){this.removeAttributeNS(e.space,e.local)}}function IV(e,t,n){var s,a=n+"",u;return function(){var c=this.getAttribute(e);return c===a?null:c===s?u:u=t(s=c,n)}}function CV(e,t,n){var s,a=n+"",u;return function(){var c=this.getAttributeNS(e.space,e.local);return c===a?null:c===s?u:u=t(s=c,n)}}function NV(e,t,n){var s,a,u;return function(){var c,d=n(this),g;return d==null?void this.removeAttribute(e):(c=this.getAttribute(e),g=d+"",c===g?null:c===s&&g===a?u:(a=g,u=t(s=c,d)))}}function DV(e,t,n){var s,a,u;return function(){var c,d=n(this),g;return d==null?void this.removeAttributeNS(e.space,e.local):(c=this.getAttributeNS(e.space,e.local),g=d+"",c===g?null:c===s&&g===a?u:(a=g,u=t(s=c,d)))}}function MV(e,t){var n=Xf(e),s=n==="transform"?cV:Zw;return this.attrTween(e,typeof t=="function"?(n.local?DV:NV)(n,s,uy(this,"attr."+e,t)):t==null?(n.local?xV:RV)(n):(n.local?CV:IV)(n,s,t))}function OV(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function VV(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function kV(e,t){var n,s;function a(){var u=t.apply(this,arguments);return u!==s&&(n=(s=u)&&VV(e,u)),n}return a._value=t,a}function PV(e,t){var n,s;function a(){var u=t.apply(this,arguments);return u!==s&&(n=(s=u)&&OV(e,u)),n}return a._value=t,a}function LV(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var s=Xf(e);return this.tween(n,(s.local?kV:PV)(s,t))}function UV(e,t){return function(){ly(this,e).delay=+t.apply(this,arguments)}}function zV(e,t){return t=+t,function(){ly(this,e).delay=t}}function BV(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?UV:zV)(t,e)):Oi(this.node(),t).delay}function HV(e,t){return function(){fr(this,e).duration=+t.apply(this,arguments)}}function qV(e,t){return t=+t,function(){fr(this,e).duration=t}}function jV(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?HV:qV)(t,e)):Oi(this.node(),t).duration}function FV(e,t){if(typeof t!="function")throw new Error;return function(){fr(this,e).ease=t}}function GV(e){var t=this._id;return arguments.length?this.each(FV(t,e)):Oi(this.node(),t).ease}function $V(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;fr(this,e).ease=n}}function YV(e){if(typeof e!="function")throw new Error;return this.each($V(this._id,e))}function XV(e){typeof e!="function"&&(e=Cw(e));for(var t=this._groups,n=t.length,s=new Array(n),a=0;a<n;++a)for(var u=t[a],c=u.length,d=s[a]=[],g,p=0;p<c;++p)(g=u[p])&&e.call(g,g.__data__,p,u)&&d.push(g);return new Yr(s,this._parents,this._name,this._id)}function KV(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,s=t.length,a=n.length,u=Math.min(s,a),c=new Array(s),d=0;d<u;++d)for(var g=t[d],p=n[d],y=g.length,v=c[d]=new Array(y),S,b=0;b<y;++b)(S=g[b]||p[b])&&(v[b]=S);for(;d<s;++d)c[d]=t[d];return new Yr(c,this._parents,this._name,this._id)}function QV(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function ZV(e,t,n){var s,a,u=QV(t)?ly:fr;return function(){var c=u(this,e),d=c.on;d!==s&&(a=(s=d).copy()).on(t,n),c.on=a}}function WV(e,t){var n=this._id;return arguments.length<2?Oi(this.node(),n).on.on(e):this.each(ZV(n,e,t))}function JV(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function t3(){return this.on("end.remove",JV(this._id))}function e3(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ry(e));for(var s=this._groups,a=s.length,u=new Array(a),c=0;c<a;++c)for(var d=s[c],g=d.length,p=u[c]=new Array(g),y,v,S=0;S<g;++S)(y=d[S])&&(v=e.call(y,y.__data__,S,d))&&("__data__"in y&&(v.__data__=y.__data__),p[S]=v,Qf(p[S],t,n,S,p,Oi(y,n)));return new Yr(u,this._parents,t,n)}function n3(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Iw(e));for(var s=this._groups,a=s.length,u=[],c=[],d=0;d<a;++d)for(var g=s[d],p=g.length,y,v=0;v<p;++v)if(y=g[v]){for(var S=e.call(y,y.__data__,v,g),b,k=Oi(y,n),P=0,U=S.length;P<U;++P)(b=S[P])&&Qf(b,t,n,P,S,k);u.push(S),c.push(y)}return new Yr(u,c,t,n)}var i3=oc.prototype.constructor;function r3(){return new i3(this._groups,this._parents)}function s3(e,t){var n,s,a;return function(){var u=nl(this,e),c=(this.style.removeProperty(e),nl(this,e));return u===c?null:u===n&&c===s?a:a=t(n=u,s=c)}}function Ww(e){return function(){this.style.removeProperty(e)}}function a3(e,t,n){var s,a=n+"",u;return function(){var c=nl(this,e);return c===a?null:c===s?u:u=t(s=c,n)}}function o3(e,t,n){var s,a,u;return function(){var c=nl(this,e),d=n(this),g=d+"";return d==null&&(g=d=(this.style.removeProperty(e),nl(this,e))),c===g?null:c===s&&g===a?u:(a=g,u=t(s=c,d))}}function l3(e,t){var n,s,a,u="style."+t,c="end."+u,d;return function(){var g=fr(this,e),p=g.on,y=g.value[u]==null?d||(d=Ww(t)):void 0;(p!==n||a!==y)&&(s=(n=p).copy()).on(c,a=y),g.on=s}}function u3(e,t,n){var s=(e+="")=="transform"?uV:Zw;return t==null?this.styleTween(e,s3(e,s)).on("end.style."+e,Ww(e)):typeof t=="function"?this.styleTween(e,o3(e,s,uy(this,"style."+e,t))).each(l3(this._id,e)):this.styleTween(e,a3(e,s,t),n).on("end.style."+e,null)}function c3(e,t,n){return function(s){this.style.setProperty(e,t.call(this,s),n)}}function h3(e,t,n){var s,a;function u(){var c=t.apply(this,arguments);return c!==a&&(s=(a=c)&&c3(e,c,n)),s}return u._value=t,u}function f3(e,t,n){var s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(t==null)return this.tween(s,null);if(typeof t!="function")throw new Error;return this.tween(s,h3(e,t,n??""))}function d3(e){return function(){this.textContent=e}}function m3(e){return function(){var t=e(this);this.textContent=t??""}}function g3(e){return this.tween("text",typeof e=="function"?m3(uy(this,"text",e)):d3(e==null?"":e+""))}function p3(e){return function(t){this.textContent=e.call(this,t)}}function y3(e){var t,n;function s(){var a=e.apply(this,arguments);return a!==n&&(t=(n=a)&&p3(a)),t}return s._value=e,s}function _3(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,y3(e))}function v3(){for(var e=this._name,t=this._id,n=Jw(),s=this._groups,a=s.length,u=0;u<a;++u)for(var c=s[u],d=c.length,g,p=0;p<d;++p)if(g=c[p]){var y=Oi(g,t);Qf(g,e,n,p,c,{time:y.time+y.delay+y.duration,delay:0,duration:y.duration,ease:y.ease})}return new Yr(s,this._parents,e,n)}function E3(){var e,t,n=this,s=n._id,a=n.size();return new Promise(function(u,c){var d={value:c},g={value:function(){--a===0&&u()}};n.each(function(){var p=fr(this,s),y=p.on;y!==e&&(t=(e=y).copy(),t._.cancel.push(d),t._.interrupt.push(d),t._.end.push(g)),p.on=t}),a===0&&u()})}var T3=0;function Yr(e,t,n,s){this._groups=e,this._parents=t,this._name=n,this._id=s}function Jw(){return++T3}var Lr=oc.prototype;Yr.prototype={constructor:Yr,select:e3,selectAll:n3,selectChild:Lr.selectChild,selectChildren:Lr.selectChildren,filter:XV,merge:KV,selection:r3,transition:v3,call:Lr.call,nodes:Lr.nodes,node:Lr.node,size:Lr.size,empty:Lr.empty,each:Lr.each,on:WV,attr:MV,attrTween:LV,style:u3,styleTween:f3,text:g3,textTween:_3,remove:t3,tween:AV,delay:BV,duration:jV,ease:GV,easeVarying:YV,end:E3,[Symbol.iterator]:Lr[Symbol.iterator]};function S3(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var w3={time:null,delay:0,duration:250,ease:S3};function b3(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function A3(e){var t,n;e instanceof Yr?(t=e._id,e=e._name):(t=Jw(),(n=w3).time=oy(),e=e==null?null:e+"");for(var s=this._groups,a=s.length,u=0;u<a;++u)for(var c=s[u],d=c.length,g,p=0;p<d;++p)(g=c[p])&&Qf(g,e,t,p,c,n||b3(g,t));return new Yr(s,this._parents,e,t)}oc.prototype.interrupt=SV;oc.prototype.transition=A3;const kh=e=>()=>e;function R3(e,{sourceEvent:t,target:n,transform:s,dispatch:a}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:s,enumerable:!0,configurable:!0},_:{value:a}})}function Hr(e,t,n){this.k=e,this.x=t,this.y=n}Hr.prototype={constructor:Hr,scale:function(e){return e===1?this:new Hr(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Hr(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ps=new Hr(1,0,0);Hr.prototype;function Eg(e){e.stopImmediatePropagation()}function gu(e){e.preventDefault(),e.stopImmediatePropagation()}function x3(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function I3(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function kT(){return this.__zoom||Ps}function C3(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function N3(){return navigator.maxTouchPoints||"ontouchstart"in this}function D3(e,t,n){var s=e.invertX(t[0][0])-n[0][0],a=e.invertX(t[1][0])-n[1][0],u=e.invertY(t[0][1])-n[0][1],c=e.invertY(t[1][1])-n[1][1];return e.translate(a>s?(s+a)/2:Math.min(0,s)||Math.max(0,a),c>u?(u+c)/2:Math.min(0,u)||Math.max(0,c))}function M3(){var e=x3,t=I3,n=D3,s=C3,a=N3,u=[0,1/0],c=[[-1/0,-1/0],[1/0,1/0]],d=250,g=mV,p=Yf("start","zoom","end"),y,v,S,b=500,k=150,P=0,U=10;function B(M){M.property("__zoom",kT).on("wheel.zoom",A,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",D).filter(a).on("touchstart.zoom",O).on("touchmove.zoom",L).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}B.transform=function(M,et,V,G){var tt=M.selection?M.selection():M;tt.property("__zoom",kT),M!==tt?at(M,et,V,G):tt.interrupt().each(function(){Z(this,arguments).event(G).start().zoom(null,typeof et=="function"?et.apply(this,arguments):et).end()})},B.scaleBy=function(M,et,V,G){B.scaleTo(M,function(){var tt=this.__zoom.k,Y=typeof et=="function"?et.apply(this,arguments):et;return tt*Y},V,G)},B.scaleTo=function(M,et,V,G){B.transform(M,function(){var tt=t.apply(this,arguments),Y=this.__zoom,C=V==null?F(tt):typeof V=="function"?V.apply(this,arguments):V,q=Y.invert(C),J=typeof et=="function"?et.apply(this,arguments):et;return n(X(j(Y,J),C,q),tt,c)},V,G)},B.translateBy=function(M,et,V,G){B.transform(M,function(){return n(this.__zoom.translate(typeof et=="function"?et.apply(this,arguments):et,typeof V=="function"?V.apply(this,arguments):V),t.apply(this,arguments),c)},null,G)},B.translateTo=function(M,et,V,G,tt){B.transform(M,function(){var Y=t.apply(this,arguments),C=this.__zoom,q=G==null?F(Y):typeof G=="function"?G.apply(this,arguments):G;return n(Ps.translate(q[0],q[1]).scale(C.k).translate(typeof et=="function"?-et.apply(this,arguments):-et,typeof V=="function"?-V.apply(this,arguments):-V),Y,c)},G,tt)};function j(M,et){return et=Math.max(u[0],Math.min(u[1],et)),et===M.k?M:new Hr(et,M.x,M.y)}function X(M,et,V){var G=et[0]-V[0]*M.k,tt=et[1]-V[1]*M.k;return G===M.x&&tt===M.y?M:new Hr(M.k,G,tt)}function F(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function at(M,et,V,G){M.on("start.zoom",function(){Z(this,arguments).event(G).start()}).on("interrupt.zoom end.zoom",function(){Z(this,arguments).event(G).end()}).tween("zoom",function(){var tt=this,Y=arguments,C=Z(tt,Y).event(G),q=t.apply(tt,Y),J=V==null?F(q):typeof V=="function"?V.apply(tt,Y):V,rt=Math.max(q[1][0]-q[0][0],q[1][1]-q[0][1]),ht=tt.__zoom,yt=typeof et=="function"?et.apply(tt,Y):et,_t=g(ht.invert(J).concat(rt/ht.k),yt.invert(J).concat(rt/yt.k));return function(Nt){if(Nt===1)Nt=yt;else{var At=_t(Nt),Zt=rt/At[2];Nt=new Hr(Zt,J[0]-At[0]*Zt,J[1]-At[1]*Zt)}C.zoom(null,Nt)}})}function Z(M,et,V){return!V&&M.__zooming||new N(M,et)}function N(M,et){this.that=M,this.args=et,this.active=0,this.sourceEvent=null,this.extent=t.apply(M,et),this.taps=0}N.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,et){return this.mouse&&M!=="mouse"&&(this.mouse[1]=et.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=et.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=et.invert(this.touch1[0])),this.that.__zoom=et,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var et=xi(this.that).datum();p.call(M,this.that,new R3(M,{sourceEvent:this.sourceEvent,target:B,transform:this.that.__zoom,dispatch:p}),et)}};function A(M,...et){if(!e.apply(this,arguments))return;var V=Z(this,et).event(M),G=this.__zoom,tt=Math.max(u[0],Math.min(u[1],G.k*Math.pow(2,s.apply(this,arguments)))),Y=nr(M);if(V.wheel)(V.mouse[0][0]!==Y[0]||V.mouse[0][1]!==Y[1])&&(V.mouse[1]=G.invert(V.mouse[0]=Y)),clearTimeout(V.wheel);else{if(G.k===tt)return;V.mouse=[Y,G.invert(Y)],Jh(this),V.start()}gu(M),V.wheel=setTimeout(C,k),V.zoom("mouse",n(X(j(G,tt),V.mouse[0],V.mouse[1]),V.extent,c));function C(){V.wheel=null,V.end()}}function R(M,...et){if(S||!e.apply(this,arguments))return;var V=M.currentTarget,G=Z(this,et,!0).event(M),tt=xi(M.view).on("mousemove.zoom",J,!0).on("mouseup.zoom",rt,!0),Y=nr(M,V),C=M.clientX,q=M.clientY;zw(M.view),Eg(M),G.mouse=[Y,this.__zoom.invert(Y)],Jh(this),G.start();function J(ht){if(gu(ht),!G.moved){var yt=ht.clientX-C,_t=ht.clientY-q;G.moved=yt*yt+_t*_t>P}G.event(ht).zoom("mouse",n(X(G.that.__zoom,G.mouse[0]=nr(ht,V),G.mouse[1]),G.extent,c))}function rt(ht){tt.on("mousemove.zoom mouseup.zoom",null),Bw(ht.view,G.moved),gu(ht),G.event(ht).end()}}function D(M,...et){if(e.apply(this,arguments)){var V=this.__zoom,G=nr(M.changedTouches?M.changedTouches[0]:M,this),tt=V.invert(G),Y=V.k*(M.shiftKey?.5:2),C=n(X(j(V,Y),G,tt),t.apply(this,et),c);gu(M),d>0?xi(this).transition().duration(d).call(at,C,G,M):xi(this).call(B.transform,C,G,M)}}function O(M,...et){if(e.apply(this,arguments)){var V=M.touches,G=V.length,tt=Z(this,et,M.changedTouches.length===G).event(M),Y,C,q,J;for(Eg(M),C=0;C<G;++C)q=V[C],J=nr(q,this),J=[J,this.__zoom.invert(J),q.identifier],tt.touch0?!tt.touch1&&tt.touch0[2]!==J[2]&&(tt.touch1=J,tt.taps=0):(tt.touch0=J,Y=!0,tt.taps=1+!!y);y&&(y=clearTimeout(y)),Y&&(tt.taps<2&&(v=J[0],y=setTimeout(function(){y=null},b)),Jh(this),tt.start())}}function L(M,...et){if(this.__zooming){var V=Z(this,et).event(M),G=M.changedTouches,tt=G.length,Y,C,q,J;for(gu(M),Y=0;Y<tt;++Y)C=G[Y],q=nr(C,this),V.touch0&&V.touch0[2]===C.identifier?V.touch0[0]=q:V.touch1&&V.touch1[2]===C.identifier&&(V.touch1[0]=q);if(C=V.that.__zoom,V.touch1){var rt=V.touch0[0],ht=V.touch0[1],yt=V.touch1[0],_t=V.touch1[1],Nt=(Nt=yt[0]-rt[0])*Nt+(Nt=yt[1]-rt[1])*Nt,At=(At=_t[0]-ht[0])*At+(At=_t[1]-ht[1])*At;C=j(C,Math.sqrt(Nt/At)),q=[(rt[0]+yt[0])/2,(rt[1]+yt[1])/2],J=[(ht[0]+_t[0])/2,(ht[1]+_t[1])/2]}else if(V.touch0)q=V.touch0[0],J=V.touch0[1];else return;V.zoom("touch",n(X(C,q,J),V.extent,c))}}function I(M,...et){if(this.__zooming){var V=Z(this,et).event(M),G=M.changedTouches,tt=G.length,Y,C;for(Eg(M),S&&clearTimeout(S),S=setTimeout(function(){S=null},b),Y=0;Y<tt;++Y)C=G[Y],V.touch0&&V.touch0[2]===C.identifier?delete V.touch0:V.touch1&&V.touch1[2]===C.identifier&&delete V.touch1;if(V.touch1&&!V.touch0&&(V.touch0=V.touch1,delete V.touch1),V.touch0)V.touch0[1]=this.__zoom.invert(V.touch0[0]);else if(V.end(),V.taps===2&&(C=nr(C,this),Math.hypot(v[0]-C[0],v[1]-C[1])<U)){var q=xi(this).on("dblclick.zoom");q&&q.apply(this,arguments)}}}return B.wheelDelta=function(M){return arguments.length?(s=typeof M=="function"?M:kh(+M),B):s},B.filter=function(M){return arguments.length?(e=typeof M=="function"?M:kh(!!M),B):e},B.touchable=function(M){return arguments.length?(a=typeof M=="function"?M:kh(!!M),B):a},B.extent=function(M){return arguments.length?(t=typeof M=="function"?M:kh([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),B):t},B.scaleExtent=function(M){return arguments.length?(u[0]=+M[0],u[1]=+M[1],B):[u[0],u[1]]},B.translateExtent=function(M){return arguments.length?(c[0][0]=+M[0][0],c[1][0]=+M[1][0],c[0][1]=+M[0][1],c[1][1]=+M[1][1],B):[[c[0][0],c[0][1]],[c[1][0],c[1][1]]]},B.constrain=function(M){return arguments.length?(n=M,B):n},B.duration=function(M){return arguments.length?(d=+M,B):d},B.interpolate=function(M){return arguments.length?(g=M,B):g},B.on=function(){var M=p.on.apply(p,arguments);return M===p?B:M},B.clickDistance=function(M){return arguments.length?(P=(M=+M)*M,B):Math.sqrt(P)},B.tapDistance=function(M){return arguments.length?(U=+M,B):U},B}a1();const Zf=it.createContext(null),O3=Zf.Provider,Xr={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},tb=Xr.error001();function Ee(e,t){const n=it.useContext(Zf);if(n===null)throw new Error(tb);return Rw(n,e,t)}const rn=()=>{const e=it.useContext(Zf);if(e===null)throw new Error(tb);return it.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},V3=e=>e.userSelectionActive?"none":"all";function eb({position:e,children:t,className:n,style:s,...a}){const u=Ee(V3),c=`${e}`.split("-");return ut.createElement("div",{className:Cn(["react-flow__panel",n,...c]),style:{...s,pointerEvents:u},...a},t)}function k3({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:ut.createElement(eb,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},ut.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const P3=({x:e,y:t,label:n,labelStyle:s={},labelShowBg:a=!0,labelBgStyle:u={},labelBgPadding:c=[2,4],labelBgBorderRadius:d=2,children:g,className:p,...y})=>{const v=it.useRef(null),[S,b]=it.useState({x:0,y:0,width:0,height:0}),k=Cn(["react-flow__edge-textwrapper",p]);return it.useEffect(()=>{if(v.current){const P=v.current.getBBox();b({x:P.x,y:P.y,width:P.width,height:P.height})}},[n]),typeof n>"u"||!n?null:ut.createElement("g",{transform:`translate(${e-S.width/2} ${t-S.height/2})`,className:k,visibility:S.width?"visible":"hidden",...y},a&&ut.createElement("rect",{width:S.width+2*c[0],x:-c[0],y:-c[1],height:S.height+2*c[1],className:"react-flow__edge-textbg",style:u,rx:d,ry:d}),ut.createElement("text",{className:"react-flow__edge-text",y:S.height/2,dy:"0.3em",ref:v,style:s},n),g)};var L3=it.memo(P3);const cy=e=>({width:e.offsetWidth,height:e.offsetHeight}),rl=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),hy=(e={x:0,y:0},t)=>({x:rl(e.x,t[0][0],t[1][0]),y:rl(e.y,t[0][1],t[1][1])}),PT=(e,t,n)=>e<t?rl(Math.abs(e-t),1,50)/50:e>n?-rl(Math.abs(e-n),1,50)/50:0,nb=(e,t)=>{const n=PT(e.x,35,t.width-35)*20,s=PT(e.y,35,t.height-35)*20;return[n,s]},ib=e=>e.getRootNode?.()||window?.document,U3=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),fy=({x:e,y:t,width:n,height:s})=>({x:e,y:t,x2:e+n,y2:t+s}),z3=({x:e,y:t,x2:n,y2:s})=>({x:e,y:t,width:n-e,height:s-t}),LT=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),rp=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),s=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*s)},B3=e=>pi(e.width)&&pi(e.height)&&pi(e.x)&&pi(e.y),pi=e=>!isNaN(e)&&isFinite(e),be=Symbol.for("internals"),rb=["Enter"," ","Escape"],H3=(e,t)=>{},q3=e=>"nativeEvent"in e;function sp(e){const n=(q3(e)?e.nativeEvent:e).composedPath?.()?.[0]||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const sb=e=>"clientX"in e,Ls=(e,t)=>{const n=sb(e),s=n?e.clientX:e.touches?.[0].clientX,a=n?e.clientY:e.touches?.[0].clientY;return{x:s-(t?.left??0),y:a-(t?.top??0)}},xf=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,uc=({id:e,path:t,labelX:n,labelY:s,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:p,style:y,markerEnd:v,markerStart:S,interactionWidth:b=20})=>ut.createElement(ut.Fragment,null,ut.createElement("path",{id:e,style:y,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:v,markerStart:S}),b&&ut.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:b,className:"react-flow__edge-interaction"}),a&&pi(n)&&pi(s)?ut.createElement(L3,{x:n,y:s,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:p}):null);uc.displayName="BaseEdge";function pu(e,t,n){return n===void 0?n:s=>{const a=t().edges.find(u=>u.id===e);a&&n(s,{...a})}}function ab({sourceX:e,sourceY:t,targetX:n,targetY:s}){const a=Math.abs(n-e)/2,u=n<e?n+a:n-a,c=Math.abs(s-t)/2,d=s<t?s+c:s-c;return[u,d,a,c]}function ob({sourceX:e,sourceY:t,targetX:n,targetY:s,sourceControlX:a,sourceControlY:u,targetControlX:c,targetControlY:d}){const g=e*.125+a*.375+c*.375+n*.125,p=t*.125+u*.375+d*.375+s*.125,y=Math.abs(g-e),v=Math.abs(p-t);return[g,p,y,v]}var ka;(function(e){e.Strict="strict",e.Loose="loose"})(ka||(ka={}));var Aa;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Aa||(Aa={}));var Xu;(function(e){e.Partial="partial",e.Full="full"})(Xu||(Xu={}));var Cs;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Cs||(Cs={}));var If;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(If||(If={}));var bt;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(bt||(bt={}));function UT({pos:e,x1:t,y1:n,x2:s,y2:a}){return e===bt.Left||e===bt.Right?[.5*(t+s),n]:[t,.5*(n+a)]}function lb({sourceX:e,sourceY:t,sourcePosition:n=bt.Bottom,targetX:s,targetY:a,targetPosition:u=bt.Top}){const[c,d]=UT({pos:n,x1:e,y1:t,x2:s,y2:a}),[g,p]=UT({pos:u,x1:s,y1:a,x2:e,y2:t}),[y,v,S,b]=ob({sourceX:e,sourceY:t,targetX:s,targetY:a,sourceControlX:c,sourceControlY:d,targetControlX:g,targetControlY:p});return[`M${e},${t} C${c},${d} ${g},${p} ${s},${a}`,y,v,S,b]}const dy=it.memo(({sourceX:e,sourceY:t,targetX:n,targetY:s,sourcePosition:a=bt.Bottom,targetPosition:u=bt.Top,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:v,style:S,markerEnd:b,markerStart:k,interactionWidth:P})=>{const[U,B,j]=lb({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:s,targetPosition:u});return ut.createElement(uc,{path:U,labelX:B,labelY:j,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:v,style:S,markerEnd:b,markerStart:k,interactionWidth:P})});dy.displayName="SimpleBezierEdge";const zT={[bt.Left]:{x:-1,y:0},[bt.Right]:{x:1,y:0},[bt.Top]:{x:0,y:-1},[bt.Bottom]:{x:0,y:1}},j3=({source:e,sourcePosition:t=bt.Bottom,target:n})=>t===bt.Left||t===bt.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},BT=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function F3({source:e,sourcePosition:t=bt.Bottom,target:n,targetPosition:s=bt.Top,center:a,offset:u}){const c=zT[t],d=zT[s],g={x:e.x+c.x*u,y:e.y+c.y*u},p={x:n.x+d.x*u,y:n.y+d.y*u},y=j3({source:g,sourcePosition:t,target:p}),v=y.x!==0?"x":"y",S=y[v];let b=[],k,P;const U={x:0,y:0},B={x:0,y:0},[j,X,F,at]=ab({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(c[v]*d[v]===-1){k=a.x??j,P=a.y??X;const N=[{x:k,y:g.y},{x:k,y:p.y}],A=[{x:g.x,y:P},{x:p.x,y:P}];c[v]===S?b=v==="x"?N:A:b=v==="x"?A:N}else{const N=[{x:g.x,y:p.y}],A=[{x:p.x,y:g.y}];if(v==="x"?b=c.x===S?A:N:b=c.y===S?N:A,t===s){const I=Math.abs(e[v]-n[v]);if(I<=u){const M=Math.min(u-1,u-I);c[v]===S?U[v]=(g[v]>e[v]?-1:1)*M:B[v]=(p[v]>n[v]?-1:1)*M}}if(t!==s){const I=v==="x"?"y":"x",M=c[v]===d[I],et=g[I]>p[I],V=g[I]<p[I];(c[v]===1&&(!M&&et||M&&V)||c[v]!==1&&(!M&&V||M&&et))&&(b=v==="x"?N:A)}const R={x:g.x+U.x,y:g.y+U.y},D={x:p.x+B.x,y:p.y+B.y},O=Math.max(Math.abs(R.x-b[0].x),Math.abs(D.x-b[0].x)),L=Math.max(Math.abs(R.y-b[0].y),Math.abs(D.y-b[0].y));O>=L?(k=(R.x+D.x)/2,P=b[0].y):(k=b[0].x,P=(R.y+D.y)/2)}return[[e,{x:g.x+U.x,y:g.y+U.y},...b,{x:p.x+B.x,y:p.y+B.y},n],k,P,F,at]}function G3(e,t,n,s){const a=Math.min(BT(e,t)/2,BT(t,n)/2,s),{x:u,y:c}=t;if(e.x===u&&u===n.x||e.y===c&&c===n.y)return`L${u} ${c}`;if(e.y===c){const p=e.x<n.x?-1:1,y=e.y<n.y?1:-1;return`L ${u+a*p},${c}Q ${u},${c} ${u},${c+a*y}`}const d=e.x<n.x?1:-1,g=e.y<n.y?-1:1;return`L ${u},${c+a*g}Q ${u},${c} ${u+a*d},${c}`}function Cf({sourceX:e,sourceY:t,sourcePosition:n=bt.Bottom,targetX:s,targetY:a,targetPosition:u=bt.Top,borderRadius:c=5,centerX:d,centerY:g,offset:p=20}){const[y,v,S,b,k]=F3({source:{x:e,y:t},sourcePosition:n,target:{x:s,y:a},targetPosition:u,center:{x:d,y:g},offset:p});return[y.reduce((U,B,j)=>{let X="";return j>0&&j<y.length-1?X=G3(y[j-1],B,y[j+1],c):X=`${j===0?"M":"L"}${B.x} ${B.y}`,U+=X,U},""),v,S,b,k]}const Wf=it.memo(({sourceX:e,sourceY:t,targetX:n,targetY:s,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:p,style:y,sourcePosition:v=bt.Bottom,targetPosition:S=bt.Top,markerEnd:b,markerStart:k,pathOptions:P,interactionWidth:U})=>{const[B,j,X]=Cf({sourceX:e,sourceY:t,sourcePosition:v,targetX:n,targetY:s,targetPosition:S,borderRadius:P?.borderRadius,offset:P?.offset});return ut.createElement(uc,{path:B,labelX:j,labelY:X,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:p,style:y,markerEnd:b,markerStart:k,interactionWidth:U})});Wf.displayName="SmoothStepEdge";const my=it.memo(e=>ut.createElement(Wf,{...e,pathOptions:it.useMemo(()=>({borderRadius:0,offset:e.pathOptions?.offset}),[e.pathOptions?.offset])}));my.displayName="StepEdge";function $3({sourceX:e,sourceY:t,targetX:n,targetY:s}){const[a,u,c,d]=ab({sourceX:e,sourceY:t,targetX:n,targetY:s});return[`M ${e},${t}L ${n},${s}`,a,u,c,d]}const gy=it.memo(({sourceX:e,sourceY:t,targetX:n,targetY:s,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:p,style:y,markerEnd:v,markerStart:S,interactionWidth:b})=>{const[k,P,U]=$3({sourceX:e,sourceY:t,targetX:n,targetY:s});return ut.createElement(uc,{path:k,labelX:P,labelY:U,label:a,labelStyle:u,labelShowBg:c,labelBgStyle:d,labelBgPadding:g,labelBgBorderRadius:p,style:y,markerEnd:v,markerStart:S,interactionWidth:b})});gy.displayName="StraightEdge";function Ph(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function HT({pos:e,x1:t,y1:n,x2:s,y2:a,c:u}){switch(e){case bt.Left:return[t-Ph(t-s,u),n];case bt.Right:return[t+Ph(s-t,u),n];case bt.Top:return[t,n-Ph(n-a,u)];case bt.Bottom:return[t,n+Ph(a-n,u)]}}function ub({sourceX:e,sourceY:t,sourcePosition:n=bt.Bottom,targetX:s,targetY:a,targetPosition:u=bt.Top,curvature:c=.25}){const[d,g]=HT({pos:n,x1:e,y1:t,x2:s,y2:a,c}),[p,y]=HT({pos:u,x1:s,y1:a,x2:e,y2:t,c}),[v,S,b,k]=ob({sourceX:e,sourceY:t,targetX:s,targetY:a,sourceControlX:d,sourceControlY:g,targetControlX:p,targetControlY:y});return[`M${e},${t} C${d},${g} ${p},${y} ${s},${a}`,v,S,b,k]}const Nf=it.memo(({sourceX:e,sourceY:t,targetX:n,targetY:s,sourcePosition:a=bt.Bottom,targetPosition:u=bt.Top,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:v,style:S,markerEnd:b,markerStart:k,pathOptions:P,interactionWidth:U})=>{const[B,j,X]=ub({sourceX:e,sourceY:t,sourcePosition:a,targetX:n,targetY:s,targetPosition:u,curvature:P?.curvature});return ut.createElement(uc,{path:B,labelX:j,labelY:X,label:c,labelStyle:d,labelShowBg:g,labelBgStyle:p,labelBgPadding:y,labelBgBorderRadius:v,style:S,markerEnd:b,markerStart:k,interactionWidth:U})});Nf.displayName="BezierEdge";const py=it.createContext(null),Y3=py.Provider;py.Consumer;const X3=()=>it.useContext(py),K3=e=>"id"in e&&"source"in e&&"target"in e,Q3=({source:e,sourceHandle:t,target:n,targetHandle:s})=>`reactflow__edge-${e}${t||""}-${n}${s||""}`,ap=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(s=>`${s}=${e[s]}`).join("&")}`,Z3=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),W3=(e,t)=>{if(!e.source||!e.target)return t;let n;return K3(e)?n={...e}:n={...e,id:Q3(e)},Z3(n,t)?t:t.concat(n)},op=({x:e,y:t},[n,s,a],u,[c,d])=>{const g={x:(e-n)/a,y:(t-s)/a};return u?{x:c*Math.round(g.x/c),y:d*Math.round(g.y/d)}:g},cb=({x:e,y:t},[n,s,a])=>({x:e*a+n,y:t*a+s}),$o=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],s=(e.height??0)*t[1],a={x:e.position.x-n,y:e.position.y-s};return{...a,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-s}:a}},yy=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((s,a)=>{const{x:u,y:c}=$o(a,t).positionAbsolute;return U3(s,fy({x:u,y:c,width:a.width||0,height:a.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return z3(n)},hb=(e,t,[n,s,a]=[0,0,1],u=!1,c=!1,d=[0,0])=>{const g={x:(t.x-n)/a,y:(t.y-s)/a,width:t.width/a,height:t.height/a},p=[];return e.forEach(y=>{const{width:v,height:S,selectable:b=!0,hidden:k=!1}=y;if(c&&!b||k)return!1;const{positionAbsolute:P}=$o(y,d),U={x:P.x,y:P.y,width:v||0,height:S||0},B=rp(g,U),j=typeof v>"u"||typeof S>"u"||v===null||S===null,X=u&&B>0,F=(v||0)*(S||0);(j||X||B>=F||y.dragging)&&p.push(y)}),p},fb=(e,t)=>{const n=e.map(s=>s.id);return t.filter(s=>n.includes(s.source)||n.includes(s.target))},db=(e,t,n,s,a,u=.1)=>{const c=t/(e.width*(1+u)),d=n/(e.height*(1+u)),g=Math.min(c,d),p=rl(g,s,a),y=e.x+e.width/2,v=e.y+e.height/2,S=t/2-y*p,b=n/2-v*p;return{x:S,y:b,zoom:p}},Ta=(e,t=0)=>e.transition().duration(t);function qT(e,t,n,s){return(t[n]||[]).reduce((a,u)=>(`${e.id}-${u.id}-${n}`!==s&&a.push({id:u.id||null,type:n,nodeId:e.id,x:(e.positionAbsolute?.x??0)+u.x+u.width/2,y:(e.positionAbsolute?.y??0)+u.y+u.height/2}),a),[])}function J3(e,t,n,s,a,u){const{x:c,y:d}=Ls(e),p=t.elementsFromPoint(c,d).find(k=>k.classList.contains("react-flow__handle"));if(p){const k=p.getAttribute("data-nodeid");if(k){const P=_y(void 0,p),U=p.getAttribute("data-handleid"),B=u({nodeId:k,id:U,type:P});if(B){const j=a.find(X=>X.nodeId===k&&X.type===P&&X.id===U);return{handle:{id:U,type:P,nodeId:k,x:j?.x||n.x,y:j?.y||n.y},validHandleResult:B}}}}let y=[],v=1/0;if(a.forEach(k=>{const P=Math.sqrt((k.x-n.x)**2+(k.y-n.y)**2);if(P<=s){const U=u(k);P<=v&&(P<v?y=[{handle:k,validHandleResult:U}]:P===v&&y.push({handle:k,validHandleResult:U}),v=P)}}),!y.length)return{handle:null,validHandleResult:mb()};if(y.length===1)return y[0];const S=y.some(({validHandleResult:k})=>k.isValid),b=y.some(({handle:k})=>k.type==="target");return y.find(({handle:k,validHandleResult:P})=>b?k.type==="target":S?P.isValid:!0)||y[0]}const t6={source:null,target:null,sourceHandle:null,targetHandle:null},mb=()=>({handleDomNode:null,isValid:!1,connection:t6,endHandle:null});function gb(e,t,n,s,a,u,c){const d=a==="target",g=c.querySelector(`.react-flow__handle[data-id="${e?.nodeId}-${e?.id}-${e?.type}"]`),p={...mb(),handleDomNode:g};if(g){const y=_y(void 0,g),v=g.getAttribute("data-nodeid"),S=g.getAttribute("data-handleid"),b=g.classList.contains("connectable"),k=g.classList.contains("connectableend"),P={source:d?v:n,sourceHandle:d?S:s,target:d?n:v,targetHandle:d?s:S};p.connection=P,b&&k&&(t===ka.Strict?d&&y==="source"||!d&&y==="target":v!==n||S!==s)&&(p.endHandle={nodeId:v,handleId:S,type:y},p.isValid=u(P))}return p}function e6({nodes:e,nodeId:t,handleId:n,handleType:s}){return e.reduce((a,u)=>{if(u[be]){const{handleBounds:c}=u[be];let d=[],g=[];c&&(d=qT(u,c,"source",`${t}-${n}-${s}`),g=qT(u,c,"target",`${t}-${n}-${s}`)),a.push(...d,...g)}return a},[])}function _y(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Tg(e){e?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function n6(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function pb({event:e,handleId:t,nodeId:n,onConnect:s,isTarget:a,getState:u,setState:c,isValidConnection:d,edgeUpdaterType:g,onReconnectEnd:p}){const y=ib(e.target),{connectionMode:v,domNode:S,autoPanOnConnect:b,connectionRadius:k,onConnectStart:P,panBy:U,getNodes:B,cancelConnection:j}=u();let X=0,F;const{x:at,y:Z}=Ls(e),N=y?.elementFromPoint(at,Z),A=_y(g,N),R=S?.getBoundingClientRect();if(!R||!A)return;let D,O=Ls(e,R),L=!1,I=null,M=!1,et=null;const V=e6({nodes:B(),nodeId:n,handleId:t,handleType:A}),G=()=>{if(!b)return;const[C,q]=nb(O,R);U({x:C,y:q}),X=requestAnimationFrame(G)};c({connectionPosition:O,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:A,connectionStartHandle:{nodeId:n,handleId:t,type:A},connectionEndHandle:null}),P?.(e,{nodeId:n,handleId:t,handleType:A});function tt(C){const{transform:q}=u();O=Ls(C,R);const{handle:J,validHandleResult:rt}=J3(C,y,op(O,q,!1,[1,1]),k,V,ht=>gb(ht,v,n,t,a?"target":"source",d,y));if(F=J,L||(G(),L=!0),et=rt.handleDomNode,I=rt.connection,M=rt.isValid,c({connectionPosition:F&&M?cb({x:F.x,y:F.y},q):O,connectionStatus:n6(!!F,M),connectionEndHandle:rt.endHandle}),!F&&!M&&!et)return Tg(D);I.source!==I.target&&et&&(Tg(D),D=et,et.classList.add("connecting","react-flow__handle-connecting"),et.classList.toggle("valid",M),et.classList.toggle("react-flow__handle-valid",M))}function Y(C){(F||et)&&I&&M&&s?.(I),u().onConnectEnd?.(C),g&&p?.(C),Tg(D),j(),cancelAnimationFrame(X),L=!1,M=!1,I=null,et=null,y.removeEventListener("mousemove",tt),y.removeEventListener("mouseup",Y),y.removeEventListener("touchmove",tt),y.removeEventListener("touchend",Y)}y.addEventListener("mousemove",tt),y.addEventListener("mouseup",Y),y.addEventListener("touchmove",tt),y.addEventListener("touchend",Y)}const jT=()=>!0,i6=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),r6=(e,t,n)=>s=>{const{connectionStartHandle:a,connectionEndHandle:u,connectionClickStartHandle:c}=s;return{connecting:a?.nodeId===e&&a?.handleId===t&&a?.type===n||u?.nodeId===e&&u?.handleId===t&&u?.type===n,clickConnecting:c?.nodeId===e&&c?.handleId===t&&c?.type===n}},yb=it.forwardRef(({type:e="source",position:t=bt.Top,isValidConnection:n,isConnectable:s=!0,isConnectableStart:a=!0,isConnectableEnd:u=!0,id:c,onConnect:d,children:g,className:p,onMouseDown:y,onTouchStart:v,...S},b)=>{const k=c||null,P=e==="target",U=rn(),B=X3(),{connectOnClick:j,noPanClassName:X}=Ee(i6,En),{connecting:F,clickConnecting:at}=Ee(r6(B,k,e),En);B||U.getState().onError?.("010",Xr.error010());const Z=R=>{const{defaultEdgeOptions:D,onConnect:O,hasDefaultEdges:L}=U.getState(),I={...D,...R};if(L){const{edges:M,setEdges:et}=U.getState();et(W3(I,M))}O?.(I),d?.(I)},N=R=>{if(!B)return;const D=sb(R);a&&(D&&R.button===0||!D)&&pb({event:R,handleId:k,nodeId:B,onConnect:Z,isTarget:P,getState:U.getState,setState:U.setState,isValidConnection:n||U.getState().isValidConnection||jT}),D?y?.(R):v?.(R)},A=R=>{const{onClickConnectStart:D,onClickConnectEnd:O,connectionClickStartHandle:L,connectionMode:I,isValidConnection:M}=U.getState();if(!B||!L&&!a)return;if(!L){D?.(R,{nodeId:B,handleId:k,handleType:e}),U.setState({connectionClickStartHandle:{nodeId:B,type:e,handleId:k}});return}const et=ib(R.target),V=n||M||jT,{connection:G,isValid:tt}=gb({nodeId:B,id:k,type:e},I,L.nodeId,L.handleId||null,L.type,V,et);tt&&Z(G),O?.(R),U.setState({connectionClickStartHandle:null})};return ut.createElement("div",{"data-handleid":k,"data-nodeid":B,"data-handlepos":t,"data-id":`${B}-${k}-${e}`,className:Cn(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",X,p,{source:!P,target:P,connectable:s,connectablestart:a,connectableend:u,connecting:at,connectionindicator:s&&(a&&!F||u&&F)}]),onMouseDown:N,onTouchStart:N,onClick:j?A:void 0,ref:b,...S},g)});yb.displayName="Handle";var sl=it.memo(yb);const _b=({data:e,isConnectable:t,targetPosition:n=bt.Top,sourcePosition:s=bt.Bottom})=>ut.createElement(ut.Fragment,null,ut.createElement(sl,{type:"target",position:n,isConnectable:t}),e?.label,ut.createElement(sl,{type:"source",position:s,isConnectable:t}));_b.displayName="DefaultNode";var lp=it.memo(_b);const vb=({data:e,isConnectable:t,sourcePosition:n=bt.Bottom})=>ut.createElement(ut.Fragment,null,e?.label,ut.createElement(sl,{type:"source",position:n,isConnectable:t}));vb.displayName="InputNode";var Eb=it.memo(vb);const Tb=({data:e,isConnectable:t,targetPosition:n=bt.Top})=>ut.createElement(ut.Fragment,null,ut.createElement(sl,{type:"target",position:n,isConnectable:t}),e?.label);Tb.displayName="OutputNode";var Sb=it.memo(Tb);const vy=()=>null;vy.displayName="GroupNode";const s6=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),Lh=e=>e.id;function a6(e,t){return En(e.selectedNodes.map(Lh),t.selectedNodes.map(Lh))&&En(e.selectedEdges.map(Lh),t.selectedEdges.map(Lh))}const wb=it.memo(({onSelectionChange:e})=>{const t=rn(),{selectedNodes:n,selectedEdges:s}=Ee(s6,a6);return it.useEffect(()=>{const a={nodes:n,edges:s};e?.(a),t.getState().onSelectionChange.forEach(u=>u(a))},[n,s,e]),null});wb.displayName="SelectionListener";const o6=e=>!!e.onSelectionChange;function l6({onSelectionChange:e}){const t=Ee(o6);return e||t?ut.createElement(wb,{onSelectionChange:e}):null}const u6=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function Do(e,t){it.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function zt(e,t,n){it.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const c6=({nodes:e,edges:t,defaultNodes:n,defaultEdges:s,onConnect:a,onConnectStart:u,onConnectEnd:c,onClickConnectStart:d,onClickConnectEnd:g,nodesDraggable:p,nodesConnectable:y,nodesFocusable:v,edgesFocusable:S,edgesUpdatable:b,elevateNodesOnSelect:k,minZoom:P,maxZoom:U,nodeExtent:B,onNodesChange:j,onEdgesChange:X,elementsSelectable:F,connectionMode:at,snapGrid:Z,snapToGrid:N,translateExtent:A,connectOnClick:R,defaultEdgeOptions:D,fitView:O,fitViewOptions:L,onNodesDelete:I,onEdgesDelete:M,onNodeDrag:et,onNodeDragStart:V,onNodeDragStop:G,onSelectionDrag:tt,onSelectionDragStart:Y,onSelectionDragStop:C,noPanClassName:q,nodeOrigin:J,rfId:rt,autoPanOnConnect:ht,autoPanOnNodeDrag:yt,onError:_t,connectionRadius:Nt,isValidConnection:At,nodeDragThreshold:Zt})=>{const{setNodes:$t,setEdges:Ae,setDefaultNodesAndEdges:Ne,setMinZoom:ze,setMaxZoom:De,setTranslateExtent:fe,setNodeExtent:Tn,reset:Lt}=Ee(u6,En),wt=rn();return it.useEffect(()=>{const Be=s?.map(Nn=>({...Nn,...D}));return Ne(n,Be),()=>{Lt()}},[]),zt("defaultEdgeOptions",D,wt.setState),zt("connectionMode",at,wt.setState),zt("onConnect",a,wt.setState),zt("onConnectStart",u,wt.setState),zt("onConnectEnd",c,wt.setState),zt("onClickConnectStart",d,wt.setState),zt("onClickConnectEnd",g,wt.setState),zt("nodesDraggable",p,wt.setState),zt("nodesConnectable",y,wt.setState),zt("nodesFocusable",v,wt.setState),zt("edgesFocusable",S,wt.setState),zt("edgesUpdatable",b,wt.setState),zt("elementsSelectable",F,wt.setState),zt("elevateNodesOnSelect",k,wt.setState),zt("snapToGrid",N,wt.setState),zt("snapGrid",Z,wt.setState),zt("onNodesChange",j,wt.setState),zt("onEdgesChange",X,wt.setState),zt("connectOnClick",R,wt.setState),zt("fitViewOnInit",O,wt.setState),zt("fitViewOnInitOptions",L,wt.setState),zt("onNodesDelete",I,wt.setState),zt("onEdgesDelete",M,wt.setState),zt("onNodeDrag",et,wt.setState),zt("onNodeDragStart",V,wt.setState),zt("onNodeDragStop",G,wt.setState),zt("onSelectionDrag",tt,wt.setState),zt("onSelectionDragStart",Y,wt.setState),zt("onSelectionDragStop",C,wt.setState),zt("noPanClassName",q,wt.setState),zt("nodeOrigin",J,wt.setState),zt("rfId",rt,wt.setState),zt("autoPanOnConnect",ht,wt.setState),zt("autoPanOnNodeDrag",yt,wt.setState),zt("onError",_t,wt.setState),zt("connectionRadius",Nt,wt.setState),zt("isValidConnection",At,wt.setState),zt("nodeDragThreshold",Zt,wt.setState),Do(e,$t),Do(t,Ae),Do(P,ze),Do(U,De),Do(A,fe),Do(B,Tn),null},FT={display:"none"},h6={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},bb="react-flow__node-desc",Ab="react-flow__edge-desc",f6="react-flow__aria-live",d6=e=>e.ariaLiveMessage;function m6({rfId:e}){const t=Ee(d6);return ut.createElement("div",{id:`${f6}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:h6},t)}function g6({rfId:e,disableKeyboardA11y:t}){return ut.createElement(ut.Fragment,null,ut.createElement("div",{id:`${bb}-${e}`,style:FT},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),ut.createElement("div",{id:`${Ab}-${e}`,style:FT},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&ut.createElement(m6,{rfId:e}))}var Ku=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,s]=it.useState(!1),a=it.useRef(!1),u=it.useRef(new Set([])),[c,d]=it.useMemo(()=>{if(e!==null){const p=(Array.isArray(e)?e:[e]).filter(v=>typeof v=="string").map(v=>v.split("+")),y=p.reduce((v,S)=>v.concat(...S),[]);return[p,y]}return[[],[]]},[e]);return it.useEffect(()=>{const g=typeof document<"u"?document:null,p=t?.target||g;if(e!==null){const y=b=>{if(a.current=b.ctrlKey||b.metaKey||b.shiftKey,(!a.current||a.current&&!t.actInsideInputWithModifier)&&sp(b))return!1;const P=$T(b.code,d);u.current.add(b[P]),GT(c,u.current,!1)&&(b.preventDefault(),s(!0))},v=b=>{if((!a.current||a.current&&!t.actInsideInputWithModifier)&&sp(b))return!1;const P=$T(b.code,d);GT(c,u.current,!0)?(s(!1),u.current.clear()):u.current.delete(b[P]),b.key==="Meta"&&u.current.clear(),a.current=!1},S=()=>{u.current.clear(),s(!1)};return p?.addEventListener("keydown",y),p?.addEventListener("keyup",v),window.addEventListener("blur",S),()=>{p?.removeEventListener("keydown",y),p?.removeEventListener("keyup",v),window.removeEventListener("blur",S)}}},[e,s]),n};function GT(e,t,n){return e.filter(s=>n||s.length===t.size).some(s=>s.every(a=>t.has(a)))}function $T(e,t){return t.includes(e)?"code":"key"}function Rb(e,t,n,s){const a=e.parentNode||e.parentId;if(!a)return n;const u=t.get(a),c=$o(u,s);return Rb(u,t,{x:(n.x??0)+c.x,y:(n.y??0)+c.y,z:(u[be]?.z??0)>(n.z??0)?u[be]?.z??0:n.z??0},s)}function xb(e,t,n){e.forEach(s=>{const a=s.parentNode||s.parentId;if(a&&!e.has(a))throw new Error(`Parent node ${a} not found`);if(a||n?.[s.id]){const{x:u,y:c,z:d}=Rb(s,e,{...s.position,z:s[be]?.z??0},t);s.positionAbsolute={x:u,y:c},s[be].z=d,n?.[s.id]&&(s[be].isParent=!0)}})}function Sg(e,t,n,s){const a=new Map,u={},c=s?1e3:0;return e.forEach(d=>{const g=(pi(d.zIndex)?d.zIndex:0)+(d.selected?c:0),p=t.get(d.id),y={...d,positionAbsolute:{x:d.position.x,y:d.position.y}},v=d.parentNode||d.parentId;v&&(u[v]=!0);const S=p?.type&&p?.type!==d.type;Object.defineProperty(y,be,{enumerable:!1,value:{handleBounds:S?void 0:p?.[be]?.handleBounds,z:g}}),a.set(d.id,y)}),xb(a,n,u),a}function Ib(e,t={}){const{getNodes:n,width:s,height:a,minZoom:u,maxZoom:c,d3Zoom:d,d3Selection:g,fitViewOnInitDone:p,fitViewOnInit:y,nodeOrigin:v}=e(),S=t.initial&&!p&&y;if(d&&g&&(S||!t.initial)){const k=n().filter(U=>{const B=t.includeHiddenNodes?U.width&&U.height:!U.hidden;return t.nodes?.length?B&&t.nodes.some(j=>j.id===U.id):B}),P=k.every(U=>U.width&&U.height);if(k.length>0&&P){const U=yy(k,v),{x:B,y:j,zoom:X}=db(U,s,a,t.minZoom??u,t.maxZoom??c,t.padding??.1),F=Ps.translate(B,j).scale(X);return typeof t.duration=="number"&&t.duration>0?d.transform(Ta(g,t.duration),F):d.transform(g,F),!0}}return!1}function p6(e,t){return e.forEach(n=>{const s=t.get(n.id);s&&t.set(s.id,{...s,[be]:s[be],selected:n.selected})}),new Map(t)}function y6(e,t){return t.map(n=>{const s=e.find(a=>a.id===n.id);return s&&(n.selected=s.selected),n})}function Uh({changedNodes:e,changedEdges:t,get:n,set:s}){const{nodeInternals:a,edges:u,onNodesChange:c,onEdgesChange:d,hasDefaultNodes:g,hasDefaultEdges:p}=n();e?.length&&(g&&s({nodeInternals:p6(e,a)}),c?.(e)),t?.length&&(p&&s({edges:y6(t,u)}),d?.(t))}const Mo=()=>{},_6={zoomIn:Mo,zoomOut:Mo,zoomTo:Mo,getZoom:()=>1,setViewport:Mo,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Mo,fitBounds:Mo,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},v6=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),E6=()=>{const e=rn(),{d3Zoom:t,d3Selection:n}=Ee(v6,En);return it.useMemo(()=>n&&t?{zoomIn:a=>t.scaleBy(Ta(n,a?.duration),1.2),zoomOut:a=>t.scaleBy(Ta(n,a?.duration),1/1.2),zoomTo:(a,u)=>t.scaleTo(Ta(n,u?.duration),a),getZoom:()=>e.getState().transform[2],setViewport:(a,u)=>{const[c,d,g]=e.getState().transform,p=Ps.translate(a.x??c,a.y??d).scale(a.zoom??g);t.transform(Ta(n,u?.duration),p)},getViewport:()=>{const[a,u,c]=e.getState().transform;return{x:a,y:u,zoom:c}},fitView:a=>Ib(e.getState,a),setCenter:(a,u,c)=>{const{width:d,height:g,maxZoom:p}=e.getState(),y=typeof c?.zoom<"u"?c.zoom:p,v=d/2-a*y,S=g/2-u*y,b=Ps.translate(v,S).scale(y);t.transform(Ta(n,c?.duration),b)},fitBounds:(a,u)=>{const{width:c,height:d,minZoom:g,maxZoom:p}=e.getState(),{x:y,y:v,zoom:S}=db(a,c,d,g,p,u?.padding??.1),b=Ps.translate(y,v).scale(S);t.transform(Ta(n,u?.duration),b)},project:a=>{const{transform:u,snapToGrid:c,snapGrid:d}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),op(a,u,c,d)},screenToFlowPosition:a=>{const{transform:u,snapToGrid:c,snapGrid:d,domNode:g}=e.getState();if(!g)return a;const{x:p,y}=g.getBoundingClientRect(),v={x:a.x-p,y:a.y-y};return op(v,u,c,d)},flowToScreenPosition:a=>{const{transform:u,domNode:c}=e.getState();if(!c)return a;const{x:d,y:g}=c.getBoundingClientRect(),p=cb(a,u);return{x:p.x+d,y:p.y+g}},viewportInitialized:!0}:_6,[t,n])};function Ey(){const e=E6(),t=rn(),n=it.useCallback(()=>t.getState().getNodes().map(P=>({...P})),[]),s=it.useCallback(P=>t.getState().nodeInternals.get(P),[]),a=it.useCallback(()=>{const{edges:P=[]}=t.getState();return P.map(U=>({...U}))},[]),u=it.useCallback(P=>{const{edges:U=[]}=t.getState();return U.find(B=>B.id===P)},[]),c=it.useCallback(P=>{const{getNodes:U,setNodes:B,hasDefaultNodes:j,onNodesChange:X}=t.getState(),F=U(),at=typeof P=="function"?P(F):P;if(j)B(at);else if(X){const Z=at.length===0?F.map(N=>({type:"remove",id:N.id})):at.map(N=>({item:N,type:"reset"}));X(Z)}},[]),d=it.useCallback(P=>{const{edges:U=[],setEdges:B,hasDefaultEdges:j,onEdgesChange:X}=t.getState(),F=typeof P=="function"?P(U):P;if(j)B(F);else if(X){const at=F.length===0?U.map(Z=>({type:"remove",id:Z.id})):F.map(Z=>({item:Z,type:"reset"}));X(at)}},[]),g=it.useCallback(P=>{const U=Array.isArray(P)?P:[P],{getNodes:B,setNodes:j,hasDefaultNodes:X,onNodesChange:F}=t.getState();if(X){const Z=[...B(),...U];j(Z)}else if(F){const at=U.map(Z=>({item:Z,type:"add"}));F(at)}},[]),p=it.useCallback(P=>{const U=Array.isArray(P)?P:[P],{edges:B=[],setEdges:j,hasDefaultEdges:X,onEdgesChange:F}=t.getState();if(X)j([...B,...U]);else if(F){const at=U.map(Z=>({item:Z,type:"add"}));F(at)}},[]),y=it.useCallback(()=>{const{getNodes:P,edges:U=[],transform:B}=t.getState(),[j,X,F]=B;return{nodes:P().map(at=>({...at})),edges:U.map(at=>({...at})),viewport:{x:j,y:X,zoom:F}}},[]),v=it.useCallback(({nodes:P,edges:U})=>{const{nodeInternals:B,getNodes:j,edges:X,hasDefaultNodes:F,hasDefaultEdges:at,onNodesDelete:Z,onEdgesDelete:N,onNodesChange:A,onEdgesChange:R}=t.getState(),D=(P||[]).map(et=>et.id),O=(U||[]).map(et=>et.id),L=j().reduce((et,V)=>{const G=V.parentNode||V.parentId,tt=!D.includes(V.id)&&G&&et.find(C=>C.id===G);return(typeof V.deletable=="boolean"?V.deletable:!0)&&(D.includes(V.id)||tt)&&et.push(V),et},[]),I=X.filter(et=>typeof et.deletable=="boolean"?et.deletable:!0),M=I.filter(et=>O.includes(et.id));if(L||M){const et=fb(L,I),V=[...M,...et],G=V.reduce((tt,Y)=>(tt.includes(Y.id)||tt.push(Y.id),tt),[]);if((at||F)&&(at&&t.setState({edges:X.filter(tt=>!G.includes(tt.id))}),F&&(L.forEach(tt=>{B.delete(tt.id)}),t.setState({nodeInternals:new Map(B)}))),G.length>0&&(N?.(V),R&&R(G.map(tt=>({id:tt,type:"remove"})))),L.length>0&&(Z?.(L),A)){const tt=L.map(Y=>({id:Y.id,type:"remove"}));A(tt)}}},[]),S=it.useCallback(P=>{const U=B3(P),B=U?null:t.getState().nodeInternals.get(P.id);return!U&&!B?[null,null,U]:[U?P:LT(B),B,U]},[]),b=it.useCallback((P,U=!0,B)=>{const[j,X,F]=S(P);return j?(B||t.getState().getNodes()).filter(at=>{if(!F&&(at.id===X.id||!at.positionAbsolute))return!1;const Z=LT(at),N=rp(Z,j);return U&&N>0||N>=j.width*j.height}):[]},[]),k=it.useCallback((P,U,B=!0)=>{const[j]=S(P);if(!j)return!1;const X=rp(j,U);return B&&X>0||X>=j.width*j.height},[]);return it.useMemo(()=>({...e,getNodes:n,getNode:s,getEdges:a,getEdge:u,setNodes:c,setEdges:d,addNodes:g,addEdges:p,toObject:y,deleteElements:v,getIntersectingNodes:b,isNodeIntersecting:k}),[e,n,s,a,u,c,d,g,p,y,v,b,k])}const T6={actInsideInputWithModifier:!1};var S6=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=rn(),{deleteElements:s}=Ey(),a=Ku(e,T6),u=Ku(t);it.useEffect(()=>{if(a){const{edges:c,getNodes:d}=n.getState(),g=d().filter(y=>y.selected),p=c.filter(y=>y.selected);s({nodes:g,edges:p}),n.setState({nodesSelectionActive:!1})}},[a]),it.useEffect(()=>{n.setState({multiSelectionActive:u})},[u])};function w6(e){const t=rn();it.useEffect(()=>{let n;const s=()=>{if(!e.current)return;const a=cy(e.current);(a.height===0||a.width===0)&&t.getState().onError?.("004",Xr.error004()),t.setState({width:a.width||500,height:a.height||500})};return s(),window.addEventListener("resize",s),e.current&&(n=new ResizeObserver(()=>s()),n.observe(e.current)),()=>{window.removeEventListener("resize",s),n&&e.current&&n.unobserve(e.current)}},[])}const Ty={position:"absolute",width:"100%",height:"100%",top:0,left:0},b6=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,zh=e=>({x:e.x,y:e.y,zoom:e.k}),Oo=(e,t)=>e.target.closest(`.${t}`),YT=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),XT=e=>{const t=e.ctrlKey&&xf()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},A6=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),R6=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:s,zoomOnScroll:a=!0,zoomOnPinch:u=!0,panOnScroll:c=!1,panOnScrollSpeed:d=.5,panOnScrollMode:g=Aa.Free,zoomOnDoubleClick:p=!0,elementsSelectable:y,panOnDrag:v=!0,defaultViewport:S,translateExtent:b,minZoom:k,maxZoom:P,zoomActivationKeyCode:U,preventScrolling:B=!0,children:j,noWheelClassName:X,noPanClassName:F})=>{const at=it.useRef(),Z=rn(),N=it.useRef(!1),A=it.useRef(!1),R=it.useRef(null),D=it.useRef({x:0,y:0,zoom:0}),{d3Zoom:O,d3Selection:L,d3ZoomHandler:I,userSelectionActive:M}=Ee(A6,En),et=Ku(U),V=it.useRef(0),G=it.useRef(!1),tt=it.useRef();return w6(R),it.useEffect(()=>{if(R.current){const Y=R.current.getBoundingClientRect(),C=M3().scaleExtent([k,P]).translateExtent(b),q=xi(R.current).call(C),J=Ps.translate(S.x,S.y).scale(rl(S.zoom,k,P)),rt=[[0,0],[Y.width,Y.height]],ht=C.constrain()(J,rt,b);C.transform(q,ht),C.wheelDelta(XT),Z.setState({d3Zoom:C,d3Selection:q,d3ZoomHandler:q.on("wheel.zoom"),transform:[ht.x,ht.y,ht.k],domNode:R.current.closest(".react-flow")})}},[]),it.useEffect(()=>{L&&O&&(c&&!et&&!M?L.on("wheel.zoom",Y=>{if(Oo(Y,X))return!1;Y.preventDefault(),Y.stopImmediatePropagation();const C=L.property("__zoom").k||1;if(Y.ctrlKey&&u){const At=nr(Y),Zt=XT(Y),$t=C*Math.pow(2,Zt);O.scaleTo(L,$t,At,Y);return}const q=Y.deltaMode===1?20:1;let J=g===Aa.Vertical?0:Y.deltaX*q,rt=g===Aa.Horizontal?0:Y.deltaY*q;!xf()&&Y.shiftKey&&g!==Aa.Vertical&&(J=Y.deltaY*q,rt=0),O.translateBy(L,-(J/C)*d,-(rt/C)*d,{internal:!0});const ht=zh(L.property("__zoom")),{onViewportChangeStart:yt,onViewportChange:_t,onViewportChangeEnd:Nt}=Z.getState();clearTimeout(tt.current),G.current||(G.current=!0,t?.(Y,ht),yt?.(ht)),G.current&&(e?.(Y,ht),_t?.(ht),tt.current=setTimeout(()=>{n?.(Y,ht),Nt?.(ht),G.current=!1},150))},{passive:!1}):typeof I<"u"&&L.on("wheel.zoom",function(Y,C){if(!B&&Y.type==="wheel"&&!Y.ctrlKey||Oo(Y,X))return null;Y.preventDefault(),I.call(this,Y,C)},{passive:!1}))},[M,c,g,L,O,I,et,u,B,X,t,e,n]),it.useEffect(()=>{O&&O.on("start",Y=>{if(!Y.sourceEvent||Y.sourceEvent.internal)return null;V.current=Y.sourceEvent?.button;const{onViewportChangeStart:C}=Z.getState(),q=zh(Y.transform);N.current=!0,D.current=q,Y.sourceEvent?.type==="mousedown"&&Z.setState({paneDragging:!0}),C?.(q),t?.(Y.sourceEvent,q)})},[O,t]),it.useEffect(()=>{O&&(M&&!N.current?O.on("zoom",null):M||O.on("zoom",Y=>{const{onViewportChange:C}=Z.getState();if(Z.setState({transform:[Y.transform.x,Y.transform.y,Y.transform.k]}),A.current=!!(s&&YT(v,V.current??0)),(e||C)&&!Y.sourceEvent?.internal){const q=zh(Y.transform);C?.(q),e?.(Y.sourceEvent,q)}}))},[M,O,e,v,s]),it.useEffect(()=>{O&&O.on("end",Y=>{if(!Y.sourceEvent||Y.sourceEvent.internal)return null;const{onViewportChangeEnd:C}=Z.getState();if(N.current=!1,Z.setState({paneDragging:!1}),s&&YT(v,V.current??0)&&!A.current&&s(Y.sourceEvent),A.current=!1,(n||C)&&b6(D.current,Y.transform)){const q=zh(Y.transform);D.current=q,clearTimeout(at.current),at.current=setTimeout(()=>{C?.(q),n?.(Y.sourceEvent,q)},c?150:0)}})},[O,c,v,n,s]),it.useEffect(()=>{O&&O.filter(Y=>{const C=et||a,q=u&&Y.ctrlKey;if((v===!0||Array.isArray(v)&&v.includes(1))&&Y.button===1&&Y.type==="mousedown"&&(Oo(Y,"react-flow__node")||Oo(Y,"react-flow__edge")))return!0;if(!v&&!C&&!c&&!p&&!u||M||!p&&Y.type==="dblclick"||Oo(Y,X)&&Y.type==="wheel"||Oo(Y,F)&&(Y.type!=="wheel"||c&&Y.type==="wheel"&&!et)||!u&&Y.ctrlKey&&Y.type==="wheel"||!C&&!c&&!q&&Y.type==="wheel"||!v&&(Y.type==="mousedown"||Y.type==="touchstart")||Array.isArray(v)&&!v.includes(Y.button)&&Y.type==="mousedown")return!1;const J=Array.isArray(v)&&v.includes(Y.button)||!Y.button||Y.button<=1;return(!Y.ctrlKey||Y.type==="wheel")&&J})},[M,O,a,u,c,p,v,y,et]),ut.createElement("div",{className:"react-flow__renderer",ref:R,style:Ty},j)},x6=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function I6(){const{userSelectionActive:e,userSelectionRect:t}=Ee(x6,En);return e&&t?ut.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function KT(e,t){const n=t.parentNode||t.parentId,s=e.find(a=>a.id===n);if(s){const a=t.position.x+t.width-s.width,u=t.position.y+t.height-s.height;if(a>0||u>0||t.position.x<0||t.position.y<0){if(s.style={...s.style},s.style.width=s.style.width??s.width,s.style.height=s.style.height??s.height,a>0&&(s.style.width+=a),u>0&&(s.style.height+=u),t.position.x<0){const c=Math.abs(t.position.x);s.position.x=s.position.x-c,s.style.width+=c,t.position.x=0}if(t.position.y<0){const c=Math.abs(t.position.y);s.position.y=s.position.y-c,s.style.height+=c,t.position.y=0}s.width=s.style.width,s.height=s.style.height}}}function Cb(e,t){if(e.some(s=>s.type==="reset"))return e.filter(s=>s.type==="reset").map(s=>s.item);const n=e.filter(s=>s.type==="add").map(s=>s.item);return t.reduce((s,a)=>{const u=e.filter(d=>d.id===a.id);if(u.length===0)return s.push(a),s;const c={...a};for(const d of u)if(d)switch(d.type){case"select":{c.selected=d.selected;break}case"position":{typeof d.position<"u"&&(c.position=d.position),typeof d.positionAbsolute<"u"&&(c.positionAbsolute=d.positionAbsolute),typeof d.dragging<"u"&&(c.dragging=d.dragging),c.expandParent&&KT(s,c);break}case"dimensions":{typeof d.dimensions<"u"&&(c.width=d.dimensions.width,c.height=d.dimensions.height),typeof d.updateStyle<"u"&&(c.style={...c.style||{},...d.dimensions}),typeof d.resizing=="boolean"&&(c.resizing=d.resizing),c.expandParent&&KT(s,c);break}case"remove":return s}return s.push(c),s},n)}function Nb(e,t){return Cb(e,t)}function C6(e,t){return Cb(e,t)}const As=(e,t)=>({id:e,type:"select",selected:t});function zo(e,t){return e.reduce((n,s)=>{const a=t.includes(s.id);return!s.selected&&a?(s.selected=!0,n.push(As(s.id,!0))):s.selected&&!a&&(s.selected=!1,n.push(As(s.id,!1))),n},[])}const wg=(e,t)=>n=>{n.target===t.current&&e?.(n)},N6=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),Db=it.memo(({isSelecting:e,selectionMode:t=Xu.Full,panOnDrag:n,onSelectionStart:s,onSelectionEnd:a,onPaneClick:u,onPaneContextMenu:c,onPaneScroll:d,onPaneMouseEnter:g,onPaneMouseMove:p,onPaneMouseLeave:y,children:v})=>{const S=it.useRef(null),b=rn(),k=it.useRef(0),P=it.useRef(0),U=it.useRef(),{userSelectionActive:B,elementsSelectable:j,dragging:X}=Ee(N6,En),F=()=>{b.setState({userSelectionActive:!1,userSelectionRect:null}),k.current=0,P.current=0},at=I=>{u?.(I),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1})},Z=I=>{if(Array.isArray(n)&&n?.includes(2)){I.preventDefault();return}c?.(I)},N=d?I=>d(I):void 0,A=I=>{const{resetSelectedElements:M,domNode:et}=b.getState();if(U.current=et?.getBoundingClientRect(),!j||!e||I.button!==0||I.target!==S.current||!U.current)return;const{x:V,y:G}=Ls(I,U.current);M(),b.setState({userSelectionRect:{width:0,height:0,startX:V,startY:G,x:V,y:G}}),s?.(I)},R=I=>{const{userSelectionRect:M,nodeInternals:et,edges:V,transform:G,onNodesChange:tt,onEdgesChange:Y,nodeOrigin:C,getNodes:q}=b.getState();if(!e||!U.current||!M)return;b.setState({userSelectionActive:!0,nodesSelectionActive:!1});const J=Ls(I,U.current),rt=M.startX??0,ht=M.startY??0,yt={...M,x:J.x<rt?J.x:rt,y:J.y<ht?J.y:ht,width:Math.abs(J.x-rt),height:Math.abs(J.y-ht)},_t=q(),Nt=hb(et,yt,G,t===Xu.Partial,!0,C),At=fb(Nt,V).map($t=>$t.id),Zt=Nt.map($t=>$t.id);if(k.current!==Zt.length){k.current=Zt.length;const $t=zo(_t,Zt);$t.length&&tt?.($t)}if(P.current!==At.length){P.current=At.length;const $t=zo(V,At);$t.length&&Y?.($t)}b.setState({userSelectionRect:yt})},D=I=>{if(I.button!==0)return;const{userSelectionRect:M}=b.getState();!B&&M&&I.target===S.current&&at?.(I),b.setState({nodesSelectionActive:k.current>0}),F(),a?.(I)},O=I=>{B&&(b.setState({nodesSelectionActive:k.current>0}),a?.(I)),F()},L=j&&(e||B);return ut.createElement("div",{className:Cn(["react-flow__pane",{dragging:X,selection:e}]),onClick:L?void 0:wg(at,S),onContextMenu:wg(Z,S),onWheel:wg(N,S),onMouseEnter:L?void 0:g,onMouseDown:L?A:void 0,onMouseMove:L?R:p,onMouseUp:L?D:void 0,onMouseLeave:L?O:y,ref:S,style:Ty},v,ut.createElement(I6,null))});Db.displayName="Pane";function Mb(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const s=t.get(n);return s?s.selected?!0:Mb(s,t):!1}function QT(e,t,n){let s=e;do{if(s?.matches(t))return!0;if(s===n.current)return!1;s=s.parentElement}while(s);return!1}function D6(e,t,n,s){return Array.from(e.values()).filter(a=>(a.selected||a.id===s)&&(!a.parentNode||a.parentId||!Mb(a,e))&&(a.draggable||t&&typeof a.draggable>"u")).map(a=>({id:a.id,position:a.position||{x:0,y:0},positionAbsolute:a.positionAbsolute||{x:0,y:0},distance:{x:n.x-(a.positionAbsolute?.x??0),y:n.y-(a.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:a.extent,parentNode:a.parentNode||a.parentId,parentId:a.parentNode||a.parentId,width:a.width,height:a.height,expandParent:a.expandParent}))}function M6(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function Ob(e,t,n,s,a=[0,0],u){const c=M6(e,e.extent||s);let d=c;const g=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(g&&e.width&&e.height){const v=n.get(g),{x:S,y:b}=$o(v,a).positionAbsolute;d=v&&pi(S)&&pi(b)&&pi(v.width)&&pi(v.height)?[[S+e.width*a[0],b+e.height*a[1]],[S+v.width-e.width+e.width*a[0],b+v.height-e.height+e.height*a[1]]]:d}else u?.("005",Xr.error005()),d=c;else if(e.extent&&g&&e.extent!=="parent"){const v=n.get(g),{x:S,y:b}=$o(v,a).positionAbsolute;d=[[e.extent[0][0]+S,e.extent[0][1]+b],[e.extent[1][0]+S,e.extent[1][1]+b]]}let p={x:0,y:0};if(g){const v=n.get(g);p=$o(v,a).positionAbsolute}const y=d&&d!=="parent"?hy(t,d):t;return{position:{x:y.x-p.x,y:y.y-p.y},positionAbsolute:y}}function bg({nodeId:e,dragItems:t,nodeInternals:n}){const s=t.map(a=>({...n.get(a.id),position:a.position,positionAbsolute:a.positionAbsolute}));return[e?s.find(a=>a.id===e):s[0],s]}const ZT=(e,t,n,s)=>{const a=t.querySelectorAll(e);if(!a||!a.length)return null;const u=Array.from(a),c=t.getBoundingClientRect(),d={x:c.width*s[0],y:c.height*s[1]};return u.map(g=>{const p=g.getBoundingClientRect();return{id:g.getAttribute("data-handleid"),position:g.getAttribute("data-handlepos"),x:(p.left-c.left-d.x)/n,y:(p.top-c.top-d.y)/n,...cy(g)}})};function yu(e,t,n){return n===void 0?n:s=>{const a=t().nodeInternals.get(e);a&&n(s,{...a})}}function up({id:e,store:t,unselect:n=!1,nodeRef:s}){const{addSelectedNodes:a,unselectNodesAndEdges:u,multiSelectionActive:c,nodeInternals:d,onError:g}=t.getState(),p=d.get(e);if(!p){g?.("012",Xr.error012(e));return}t.setState({nodesSelectionActive:!1}),p.selected?(n||p.selected&&c)&&(u({nodes:[p],edges:[]}),requestAnimationFrame(()=>s?.current?.blur())):a([e])}function O6(){const e=rn();return it.useCallback(({sourceEvent:n})=>{const{transform:s,snapGrid:a,snapToGrid:u}=e.getState(),c=n.touches?n.touches[0].clientX:n.clientX,d=n.touches?n.touches[0].clientY:n.clientY,g={x:(c-s[0])/s[2],y:(d-s[1])/s[2]};return{xSnapped:u?a[0]*Math.round(g.x/a[0]):g.x,ySnapped:u?a[1]*Math.round(g.y/a[1]):g.y,...g}},[])}function Ag(e){return(t,n,s)=>e?.(t,s)}function Vb({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:s,nodeId:a,isSelectable:u,selectNodesOnDrag:c}){const d=rn(),[g,p]=it.useState(!1),y=it.useRef([]),v=it.useRef({x:null,y:null}),S=it.useRef(0),b=it.useRef(null),k=it.useRef({x:0,y:0}),P=it.useRef(null),U=it.useRef(!1),B=it.useRef(!1),j=it.useRef(!1),X=O6();return it.useEffect(()=>{if(e?.current){const F=xi(e.current),at=({x:A,y:R})=>{const{nodeInternals:D,onNodeDrag:O,onSelectionDrag:L,updateNodePositions:I,nodeExtent:M,snapGrid:et,snapToGrid:V,nodeOrigin:G,onError:tt}=d.getState();v.current={x:A,y:R};let Y=!1,C={x:0,y:0,x2:0,y2:0};if(y.current.length>1&&M){const J=yy(y.current,G);C=fy(J)}if(y.current=y.current.map(J=>{const rt={x:A-J.distance.x,y:R-J.distance.y};V&&(rt.x=et[0]*Math.round(rt.x/et[0]),rt.y=et[1]*Math.round(rt.y/et[1]));const ht=[[M[0][0],M[0][1]],[M[1][0],M[1][1]]];y.current.length>1&&M&&!J.extent&&(ht[0][0]=J.positionAbsolute.x-C.x+M[0][0],ht[1][0]=J.positionAbsolute.x+(J.width??0)-C.x2+M[1][0],ht[0][1]=J.positionAbsolute.y-C.y+M[0][1],ht[1][1]=J.positionAbsolute.y+(J.height??0)-C.y2+M[1][1]);const yt=Ob(J,rt,D,ht,G,tt);return Y=Y||J.position.x!==yt.position.x||J.position.y!==yt.position.y,J.position=yt.position,J.positionAbsolute=yt.positionAbsolute,J}),!Y)return;I(y.current,!0,!0),p(!0);const q=a?O:Ag(L);if(q&&P.current){const[J,rt]=bg({nodeId:a,dragItems:y.current,nodeInternals:D});q(P.current,J,rt)}},Z=()=>{if(!b.current)return;const[A,R]=nb(k.current,b.current);if(A!==0||R!==0){const{transform:D,panBy:O}=d.getState();v.current.x=(v.current.x??0)-A/D[2],v.current.y=(v.current.y??0)-R/D[2],O({x:A,y:R})&&at(v.current)}S.current=requestAnimationFrame(Z)},N=A=>{const{nodeInternals:R,multiSelectionActive:D,nodesDraggable:O,unselectNodesAndEdges:L,onNodeDragStart:I,onSelectionDragStart:M}=d.getState();B.current=!0;const et=a?I:Ag(M);(!c||!u)&&!D&&a&&(R.get(a)?.selected||L()),a&&u&&c&&up({id:a,store:d,nodeRef:e});const V=X(A);if(v.current=V,y.current=D6(R,O,V,a),et&&y.current){const[G,tt]=bg({nodeId:a,dragItems:y.current,nodeInternals:R});et(A.sourceEvent,G,tt)}};if(t)F.on(".drag",null);else{const A=q4().on("start",R=>{const{domNode:D,nodeDragThreshold:O}=d.getState();O===0&&N(R),j.current=!1;const L=X(R);v.current=L,b.current=D?.getBoundingClientRect()||null,k.current=Ls(R.sourceEvent,b.current)}).on("drag",R=>{const D=X(R),{autoPanOnNodeDrag:O,nodeDragThreshold:L}=d.getState();if(R.sourceEvent.type==="touchmove"&&R.sourceEvent.touches.length>1&&(j.current=!0),!j.current){if(!U.current&&B.current&&O&&(U.current=!0,Z()),!B.current){const I=D.xSnapped-(v?.current?.x??0),M=D.ySnapped-(v?.current?.y??0);Math.sqrt(I*I+M*M)>L&&N(R)}(v.current.x!==D.xSnapped||v.current.y!==D.ySnapped)&&y.current&&B.current&&(P.current=R.sourceEvent,k.current=Ls(R.sourceEvent,b.current),at(D))}}).on("end",R=>{if(!(!B.current||j.current)&&(p(!1),U.current=!1,B.current=!1,cancelAnimationFrame(S.current),y.current)){const{updateNodePositions:D,nodeInternals:O,onNodeDragStop:L,onSelectionDragStop:I}=d.getState(),M=a?L:Ag(I);if(D(y.current,!1,!1),M){const[et,V]=bg({nodeId:a,dragItems:y.current,nodeInternals:O});M(R.sourceEvent,et,V)}}}).filter(R=>{const D=R.target;return!R.button&&(!n||!QT(D,`.${n}`,e))&&(!s||QT(D,s,e))});return F.call(A),()=>{F.on(".drag",null)}}}},[e,t,n,s,u,d,a,c,X]),g}function kb(){const e=rn();return it.useCallback(n=>{const{nodeInternals:s,nodeExtent:a,updateNodePositions:u,getNodes:c,snapToGrid:d,snapGrid:g,onError:p,nodesDraggable:y}=e.getState(),v=c().filter(j=>j.selected&&(j.draggable||y&&typeof j.draggable>"u")),S=d?g[0]:5,b=d?g[1]:5,k=n.isShiftPressed?4:1,P=n.x*S*k,U=n.y*b*k,B=v.map(j=>{if(j.positionAbsolute){const X={x:j.positionAbsolute.x+P,y:j.positionAbsolute.y+U};d&&(X.x=g[0]*Math.round(X.x/g[0]),X.y=g[1]*Math.round(X.y/g[1]));const{positionAbsolute:F,position:at}=Ob(j,X,s,a,void 0,p);j.position=at,j.positionAbsolute=F}return j});u(B,!0,!1)},[])}const Yo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var _u=e=>{const t=({id:n,type:s,data:a,xPos:u,yPos:c,xPosOrigin:d,yPosOrigin:g,selected:p,onClick:y,onMouseEnter:v,onMouseMove:S,onMouseLeave:b,onContextMenu:k,onDoubleClick:P,style:U,className:B,isDraggable:j,isSelectable:X,isConnectable:F,isFocusable:at,selectNodesOnDrag:Z,sourcePosition:N,targetPosition:A,hidden:R,resizeObserver:D,dragHandle:O,zIndex:L,isParent:I,noDragClassName:M,noPanClassName:et,initialized:V,disableKeyboardA11y:G,ariaLabel:tt,rfId:Y,hasHandleBounds:C})=>{const q=rn(),J=it.useRef(null),rt=it.useRef(null),ht=it.useRef(N),yt=it.useRef(A),_t=it.useRef(s),Nt=X||j||y||v||S||b,At=kb(),Zt=yu(n,q.getState,v),$t=yu(n,q.getState,S),Ae=yu(n,q.getState,b),Ne=yu(n,q.getState,k),ze=yu(n,q.getState,P),De=Lt=>{const{nodeDragThreshold:wt}=q.getState();if(X&&(!Z||!j||wt>0)&&up({id:n,store:q,nodeRef:J}),y){const Be=q.getState().nodeInternals.get(n);Be&&y(Lt,{...Be})}},fe=Lt=>{if(!sp(Lt)&&!G)if(rb.includes(Lt.key)&&X){const wt=Lt.key==="Escape";up({id:n,store:q,unselect:wt,nodeRef:J})}else j&&p&&Object.prototype.hasOwnProperty.call(Yo,Lt.key)&&(q.setState({ariaLiveMessage:`Moved selected node ${Lt.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~u}, y: ${~~c}`}),At({x:Yo[Lt.key].x,y:Yo[Lt.key].y,isShiftPressed:Lt.shiftKey}))};it.useEffect(()=>()=>{rt.current&&(D?.unobserve(rt.current),rt.current=null)},[]),it.useEffect(()=>{if(J.current&&!R){const Lt=J.current;(!V||!C||rt.current!==Lt)&&(rt.current&&D?.unobserve(rt.current),D?.observe(Lt),rt.current=Lt)}},[R,V,C]),it.useEffect(()=>{const Lt=_t.current!==s,wt=ht.current!==N,Be=yt.current!==A;J.current&&(Lt||wt||Be)&&(Lt&&(_t.current=s),wt&&(ht.current=N),Be&&(yt.current=A),q.getState().updateNodeDimensions([{id:n,nodeElement:J.current,forceUpdate:!0}]))},[n,s,N,A]);const Tn=Vb({nodeRef:J,disabled:R||!j,noDragClassName:M,handleSelector:O,nodeId:n,isSelectable:X,selectNodesOnDrag:Z});return R?null:ut.createElement("div",{className:Cn(["react-flow__node",`react-flow__node-${s}`,{[et]:j},B,{selected:p,selectable:X,parent:I,dragging:Tn}]),ref:J,style:{zIndex:L,transform:`translate(${d}px,${g}px)`,pointerEvents:Nt?"all":"none",visibility:V?"visible":"hidden",...U},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:Zt,onMouseMove:$t,onMouseLeave:Ae,onContextMenu:Ne,onClick:De,onDoubleClick:ze,onKeyDown:at?fe:void 0,tabIndex:at?0:void 0,role:at?"button":void 0,"aria-describedby":G?void 0:`${bb}-${Y}`,"aria-label":tt},ut.createElement(Y3,{value:n},ut.createElement(e,{id:n,data:a,type:s,xPos:u,yPos:c,selected:p,isConnectable:F,sourcePosition:N,targetPosition:A,dragging:Tn,dragHandle:O,zIndex:L})))};return t.displayName="NodeWrapper",it.memo(t)};const V6=e=>{const t=e.getNodes().filter(n=>n.selected);return{...yy(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function k6({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const s=rn(),{width:a,height:u,x:c,y:d,transformString:g,userSelectionActive:p}=Ee(V6,En),y=kb(),v=it.useRef(null);if(it.useEffect(()=>{n||v.current?.focus({preventScroll:!0})},[n]),Vb({nodeRef:v}),p||!a||!u)return null;const S=e?k=>{const P=s.getState().getNodes().filter(U=>U.selected);e(k,P)}:void 0,b=k=>{Object.prototype.hasOwnProperty.call(Yo,k.key)&&y({x:Yo[k.key].x,y:Yo[k.key].y,isShiftPressed:k.shiftKey})};return ut.createElement("div",{className:Cn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:g}},ut.createElement("div",{ref:v,className:"react-flow__nodesselection-rect",onContextMenu:S,tabIndex:n?void 0:-1,onKeyDown:n?void 0:b,style:{width:a,height:u,top:d,left:c}}))}var P6=it.memo(k6);const L6=e=>e.nodesSelectionActive,Pb=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:s,onPaneMouseLeave:a,onPaneContextMenu:u,onPaneScroll:c,deleteKeyCode:d,onMove:g,onMoveStart:p,onMoveEnd:y,selectionKeyCode:v,selectionOnDrag:S,selectionMode:b,onSelectionStart:k,onSelectionEnd:P,multiSelectionKeyCode:U,panActivationKeyCode:B,zoomActivationKeyCode:j,elementsSelectable:X,zoomOnScroll:F,zoomOnPinch:at,panOnScroll:Z,panOnScrollSpeed:N,panOnScrollMode:A,zoomOnDoubleClick:R,panOnDrag:D,defaultViewport:O,translateExtent:L,minZoom:I,maxZoom:M,preventScrolling:et,onSelectionContextMenu:V,noWheelClassName:G,noPanClassName:tt,disableKeyboardA11y:Y})=>{const C=Ee(L6),q=Ku(v),J=Ku(B),rt=J||D,ht=J||Z,yt=q||S&&rt!==!0;return S6({deleteKeyCode:d,multiSelectionKeyCode:U}),ut.createElement(R6,{onMove:g,onMoveStart:p,onMoveEnd:y,onPaneContextMenu:u,elementsSelectable:X,zoomOnScroll:F,zoomOnPinch:at,panOnScroll:ht,panOnScrollSpeed:N,panOnScrollMode:A,zoomOnDoubleClick:R,panOnDrag:!q&&rt,defaultViewport:O,translateExtent:L,minZoom:I,maxZoom:M,zoomActivationKeyCode:j,preventScrolling:et,noWheelClassName:G,noPanClassName:tt},ut.createElement(Db,{onSelectionStart:k,onSelectionEnd:P,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:s,onPaneMouseLeave:a,onPaneContextMenu:u,onPaneScroll:c,panOnDrag:rt,isSelecting:!!yt,selectionMode:b},e,C&&ut.createElement(P6,{onSelectionContextMenu:V,noPanClassName:tt,disableKeyboardA11y:Y})))};Pb.displayName="FlowRenderer";var U6=it.memo(Pb);function z6(e){return Ee(it.useCallback(n=>e?hb(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function B6(e){const t={input:_u(e.input||Eb),default:_u(e.default||lp),output:_u(e.output||Sb),group:_u(e.group||vy)},n={},s=Object.keys(e).filter(a=>!["input","default","output","group"].includes(a)).reduce((a,u)=>(a[u]=_u(e[u]||lp),a),n);return{...t,...s}}const H6=({x:e,y:t,width:n,height:s,origin:a})=>!n||!s?{x:e,y:t}:a[0]<0||a[1]<0||a[0]>1||a[1]>1?{x:e,y:t}:{x:e-n*a[0],y:t-s*a[1]},q6=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),Lb=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:s,elementsSelectable:a,updateNodeDimensions:u,onError:c}=Ee(q6,En),d=z6(e.onlyRenderVisibleElements),g=it.useRef(),p=it.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const y=new ResizeObserver(v=>{const S=v.map(b=>({id:b.target.getAttribute("data-id"),nodeElement:b.target,forceUpdate:!0}));u(S)});return g.current=y,y},[]);return it.useEffect(()=>()=>{g?.current?.disconnect()},[]),ut.createElement("div",{className:"react-flow__nodes",style:Ty},d.map(y=>{let v=y.type||"default";e.nodeTypes[v]||(c?.("003",Xr.error003(v)),v="default");const S=e.nodeTypes[v]||e.nodeTypes.default,b=!!(y.draggable||t&&typeof y.draggable>"u"),k=!!(y.selectable||a&&typeof y.selectable>"u"),P=!!(y.connectable||n&&typeof y.connectable>"u"),U=!!(y.focusable||s&&typeof y.focusable>"u"),B=e.nodeExtent?hy(y.positionAbsolute,e.nodeExtent):y.positionAbsolute,j=B?.x??0,X=B?.y??0,F=H6({x:j,y:X,width:y.width??0,height:y.height??0,origin:e.nodeOrigin});return ut.createElement(S,{key:y.id,id:y.id,className:y.className,style:y.style,type:v,data:y.data,sourcePosition:y.sourcePosition||bt.Bottom,targetPosition:y.targetPosition||bt.Top,hidden:y.hidden,xPos:j,yPos:X,xPosOrigin:F.x,yPosOrigin:F.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!y.selected,isDraggable:b,isSelectable:k,isConnectable:P,isFocusable:U,resizeObserver:p,dragHandle:y.dragHandle,zIndex:y[be]?.z??0,isParent:!!y[be]?.isParent,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!y.width&&!!y.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:y.ariaLabel,hasHandleBounds:!!y[be]?.handleBounds})}))};Lb.displayName="NodeRenderer";var j6=it.memo(Lb);const F6=(e,t,n)=>n===bt.Left?e-t:n===bt.Right?e+t:e,G6=(e,t,n)=>n===bt.Top?e-t:n===bt.Bottom?e+t:e,WT="react-flow__edgeupdater",JT=({position:e,centerX:t,centerY:n,radius:s=10,onMouseDown:a,onMouseEnter:u,onMouseOut:c,type:d})=>ut.createElement("circle",{onMouseDown:a,onMouseEnter:u,onMouseOut:c,className:Cn([WT,`${WT}-${d}`]),cx:F6(t,s,e),cy:G6(n,s,e),r:s,stroke:"transparent",fill:"transparent"}),$6=()=>!0;var Vo=e=>{const t=({id:n,className:s,type:a,data:u,onClick:c,onEdgeDoubleClick:d,selected:g,animated:p,label:y,labelStyle:v,labelShowBg:S,labelBgStyle:b,labelBgPadding:k,labelBgBorderRadius:P,style:U,source:B,target:j,sourceX:X,sourceY:F,targetX:at,targetY:Z,sourcePosition:N,targetPosition:A,elementsSelectable:R,hidden:D,sourceHandleId:O,targetHandleId:L,onContextMenu:I,onMouseEnter:M,onMouseMove:et,onMouseLeave:V,reconnectRadius:G,onReconnect:tt,onReconnectStart:Y,onReconnectEnd:C,markerEnd:q,markerStart:J,rfId:rt,ariaLabel:ht,isFocusable:yt,isReconnectable:_t,pathOptions:Nt,interactionWidth:At,disableKeyboardA11y:Zt})=>{const $t=it.useRef(null),[Ae,Ne]=it.useState(!1),[ze,De]=it.useState(!1),fe=rn(),Tn=it.useMemo(()=>`url('#${ap(J,rt)}')`,[J,rt]),Lt=it.useMemo(()=>`url('#${ap(q,rt)}')`,[q,rt]);if(D)return null;const wt=Oe=>{const{edges:Xe,addSelectedEdges:wn,unselectNodesAndEdges:bn,multiSelectionActive:Ke}=fe.getState(),sn=Xe.find(An=>An.id===n);sn&&(R&&(fe.setState({nodesSelectionActive:!1}),sn.selected&&Ke?(bn({nodes:[],edges:[sn]}),$t.current?.blur()):wn([n])),c&&c(Oe,sn))},Be=pu(n,fe.getState,d),Nn=pu(n,fe.getState,I),Ln=pu(n,fe.getState,M),Vi=pu(n,fe.getState,et),Un=pu(n,fe.getState,V),Sn=(Oe,Xe)=>{if(Oe.button!==0)return;const{edges:wn,isValidConnection:bn}=fe.getState(),Ke=Xe?j:B,sn=(Xe?L:O)||null,An=Xe?"target":"source",dr=bn||$6,mr=Xe,vi=wn.find(Bn=>Bn.id===n);De(!0),Y?.(Oe,vi,An);const zn=Bn=>{De(!1),C?.(Bn,vi,An)};pb({event:Oe,handleId:sn,nodeId:Ke,onConnect:Bn=>tt?.(vi,Bn),isTarget:mr,getState:fe.getState,setState:fe.setState,isValidConnection:dr,edgeUpdaterType:An,onReconnectEnd:zn})},_i=Oe=>Sn(Oe,!0),te=Oe=>Sn(Oe,!1),Bt=()=>Ne(!0),Me=()=>Ne(!1),ge=!R&&!c,ki=Oe=>{if(!Zt&&rb.includes(Oe.key)&&R){const{unselectNodesAndEdges:Xe,addSelectedEdges:wn,edges:bn}=fe.getState();Oe.key==="Escape"?($t.current?.blur(),Xe({edges:[bn.find(sn=>sn.id===n)]})):wn([n])}};return ut.createElement("g",{className:Cn(["react-flow__edge",`react-flow__edge-${a}`,s,{selected:g,animated:p,inactive:ge,updating:Ae}]),onClick:wt,onDoubleClick:Be,onContextMenu:Nn,onMouseEnter:Ln,onMouseMove:Vi,onMouseLeave:Un,onKeyDown:yt?ki:void 0,tabIndex:yt?0:void 0,role:yt?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":ht===null?void 0:ht||`Edge from ${B} to ${j}`,"aria-describedby":yt?`${Ab}-${rt}`:void 0,ref:$t},!ze&&ut.createElement(e,{id:n,source:B,target:j,selected:g,animated:p,label:y,labelStyle:v,labelShowBg:S,labelBgStyle:b,labelBgPadding:k,labelBgBorderRadius:P,data:u,style:U,sourceX:X,sourceY:F,targetX:at,targetY:Z,sourcePosition:N,targetPosition:A,sourceHandleId:O,targetHandleId:L,markerStart:Tn,markerEnd:Lt,pathOptions:Nt,interactionWidth:At}),_t&&ut.createElement(ut.Fragment,null,(_t==="source"||_t===!0)&&ut.createElement(JT,{position:N,centerX:X,centerY:F,radius:G,onMouseDown:_i,onMouseEnter:Bt,onMouseOut:Me,type:"source"}),(_t==="target"||_t===!0)&&ut.createElement(JT,{position:A,centerX:at,centerY:Z,radius:G,onMouseDown:te,onMouseEnter:Bt,onMouseOut:Me,type:"target"})))};return t.displayName="EdgeWrapper",it.memo(t)};function Y6(e){const t={default:Vo(e.default||Nf),straight:Vo(e.bezier||gy),step:Vo(e.step||my),smoothstep:Vo(e.step||Wf),simplebezier:Vo(e.simplebezier||dy)},n={},s=Object.keys(e).filter(a=>!["default","bezier"].includes(a)).reduce((a,u)=>(a[u]=Vo(e[u]||Nf),a),n);return{...t,...s}}function t1(e,t,n=null){const s=(n?.x||0)+t.x,a=(n?.y||0)+t.y,u=n?.width||t.width,c=n?.height||t.height;switch(e){case bt.Top:return{x:s+u/2,y:a};case bt.Right:return{x:s+u,y:a+c/2};case bt.Bottom:return{x:s+u/2,y:a+c};case bt.Left:return{x:s,y:a+c/2}}}function e1(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const X6=(e,t,n,s,a,u)=>{const c=t1(n,e,t),d=t1(u,s,a);return{sourceX:c.x,sourceY:c.y,targetX:d.x,targetY:d.y}};function K6({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:s,targetWidth:a,targetHeight:u,width:c,height:d,transform:g}){const p={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+a),y2:Math.max(e.y+s,t.y+u)};p.x===p.x2&&(p.x2+=1),p.y===p.y2&&(p.y2+=1);const y=fy({x:(0-g[0])/g[2],y:(0-g[1])/g[2],width:c/g[2],height:d/g[2]}),v=Math.max(0,Math.min(y.x2,p.x2)-Math.max(y.x,p.x)),S=Math.max(0,Math.min(y.y2,p.y2)-Math.max(y.y,p.y));return Math.ceil(v*S)>0}function n1(e){const t=e?.[be]?.handleBounds||null,n=t&&e?.width&&e?.height&&typeof e?.positionAbsolute?.x<"u"&&typeof e?.positionAbsolute?.y<"u";return[{x:e?.positionAbsolute?.x||0,y:e?.positionAbsolute?.y||0,width:e?.width||0,height:e?.height||0},t,!!n]}const Q6=[{level:0,isMaxLevel:!0,edges:[]}];function Z6(e,t,n=!1){let s=-1;const a=e.reduce((c,d)=>{const g=pi(d.zIndex);let p=g?d.zIndex:0;if(n){const y=t.get(d.target),v=t.get(d.source),S=d.selected||y?.selected||v?.selected,b=Math.max(v?.[be]?.z||0,y?.[be]?.z||0,1e3);p=(g?d.zIndex:0)+(S?b:0)}return c[p]?c[p].push(d):c[p]=[d],s=p>s?p:s,c},{}),u=Object.entries(a).map(([c,d])=>{const g=+c;return{edges:d,level:g,isMaxLevel:g===s}});return u.length===0?Q6:u}function W6(e,t,n){const s=Ee(it.useCallback(a=>e?a.edges.filter(u=>{const c=t.get(u.source),d=t.get(u.target);return c?.width&&c?.height&&d?.width&&d?.height&&K6({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:d.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:d.width,targetHeight:d.height,width:a.width,height:a.height,transform:a.transform})}):a.edges,[e,t]));return Z6(s,t,n)}const J6=({color:e="none",strokeWidth:t=1})=>ut.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),tk=({color:e="none",strokeWidth:t=1})=>ut.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),i1={[If.Arrow]:J6,[If.ArrowClosed]:tk};function ek(e){const t=rn();return it.useMemo(()=>Object.prototype.hasOwnProperty.call(i1,e)?i1[e]:(t.getState().onError?.("009",Xr.error009(e)),null),[e])}const nk=({id:e,type:t,color:n,width:s=12.5,height:a=12.5,markerUnits:u="strokeWidth",strokeWidth:c,orient:d="auto-start-reverse"})=>{const g=ek(t);return g?ut.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${s}`,markerHeight:`${a}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:d,refX:"0",refY:"0"},ut.createElement(g,{color:n,strokeWidth:c})):null},ik=({defaultColor:e,rfId:t})=>n=>{const s=[];return n.edges.reduce((a,u)=>([u.markerStart,u.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const d=ap(c,t);s.includes(d)||(a.push({id:d,color:c.color||e,...c}),s.push(d))}}),a),[]).sort((a,u)=>a.id.localeCompare(u.id))},Ub=({defaultColor:e,rfId:t})=>{const n=Ee(it.useCallback(ik({defaultColor:e,rfId:t}),[e,t]),(s,a)=>!(s.length!==a.length||s.some((u,c)=>u.id!==a[c].id)));return ut.createElement("defs",null,n.map(s=>ut.createElement(nk,{id:s.id,key:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient})))};Ub.displayName="MarkerDefinitions";var rk=it.memo(Ub);const sk=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),zb=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:s,edgeTypes:a,noPanClassName:u,onEdgeContextMenu:c,onEdgeMouseEnter:d,onEdgeMouseMove:g,onEdgeMouseLeave:p,onEdgeClick:y,onEdgeDoubleClick:v,onReconnect:S,onReconnectStart:b,onReconnectEnd:k,reconnectRadius:P,children:U,disableKeyboardA11y:B})=>{const{edgesFocusable:j,edgesUpdatable:X,elementsSelectable:F,width:at,height:Z,connectionMode:N,nodeInternals:A,onError:R}=Ee(sk,En),D=W6(t,A,n);return at?ut.createElement(ut.Fragment,null,D.map(({level:O,edges:L,isMaxLevel:I})=>ut.createElement("svg",{key:O,style:{zIndex:O},width:at,height:Z,className:"react-flow__edges react-flow__container"},I&&ut.createElement(rk,{defaultColor:e,rfId:s}),ut.createElement("g",null,L.map(M=>{const[et,V,G]=n1(A.get(M.source)),[tt,Y,C]=n1(A.get(M.target));if(!G||!C)return null;let q=M.type||"default";a[q]||(R?.("011",Xr.error011(q)),q="default");const J=a[q]||a.default,rt=N===ka.Strict?Y.target:(Y.target??[]).concat(Y.source??[]),ht=e1(V.source,M.sourceHandle),yt=e1(rt,M.targetHandle),_t=ht?.position||bt.Bottom,Nt=yt?.position||bt.Top,At=!!(M.focusable||j&&typeof M.focusable>"u"),Zt=M.reconnectable||M.updatable,$t=typeof S<"u"&&(Zt||X&&typeof Zt>"u");if(!ht||!yt)return R?.("008",Xr.error008(ht,M)),null;const{sourceX:Ae,sourceY:Ne,targetX:ze,targetY:De}=X6(et,ht,_t,tt,yt,Nt);return ut.createElement(J,{key:M.id,id:M.id,className:Cn([M.className,u]),type:q,data:M.data,selected:!!M.selected,animated:!!M.animated,hidden:!!M.hidden,label:M.label,labelStyle:M.labelStyle,labelShowBg:M.labelShowBg,labelBgStyle:M.labelBgStyle,labelBgPadding:M.labelBgPadding,labelBgBorderRadius:M.labelBgBorderRadius,style:M.style,source:M.source,target:M.target,sourceHandleId:M.sourceHandle,targetHandleId:M.targetHandle,markerEnd:M.markerEnd,markerStart:M.markerStart,sourceX:Ae,sourceY:Ne,targetX:ze,targetY:De,sourcePosition:_t,targetPosition:Nt,elementsSelectable:F,onContextMenu:c,onMouseEnter:d,onMouseMove:g,onMouseLeave:p,onClick:y,onEdgeDoubleClick:v,onReconnect:S,onReconnectStart:b,onReconnectEnd:k,reconnectRadius:P,rfId:s,ariaLabel:M.ariaLabel,isFocusable:At,isReconnectable:$t,pathOptions:"pathOptions"in M?M.pathOptions:void 0,interactionWidth:M.interactionWidth,disableKeyboardA11y:B})})))),U):null};zb.displayName="EdgeRenderer";var ak=it.memo(zb);const ok=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function lk({children:e}){const t=Ee(ok);return ut.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function uk(e){const t=Ey(),n=it.useRef(!1);it.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const ck={[bt.Left]:bt.Right,[bt.Right]:bt.Left,[bt.Top]:bt.Bottom,[bt.Bottom]:bt.Top},Bb=({nodeId:e,handleType:t,style:n,type:s=Cs.Bezier,CustomComponent:a,connectionStatus:u})=>{const{fromNode:c,handleId:d,toX:g,toY:p,connectionMode:y}=Ee(it.useCallback(Z=>({fromNode:Z.nodeInternals.get(e),handleId:Z.connectionHandleId,toX:(Z.connectionPosition.x-Z.transform[0])/Z.transform[2],toY:(Z.connectionPosition.y-Z.transform[1])/Z.transform[2],connectionMode:Z.connectionMode}),[e]),En),v=c?.[be]?.handleBounds;let S=v?.[t];if(y===ka.Loose&&(S=S||v?.[t==="source"?"target":"source"]),!c||!S)return null;const b=d?S.find(Z=>Z.id===d):S[0],k=b?b.x+b.width/2:(c.width??0)/2,P=b?b.y+b.height/2:c.height??0,U=(c.positionAbsolute?.x??0)+k,B=(c.positionAbsolute?.y??0)+P,j=b?.position,X=j?ck[j]:null;if(!j||!X)return null;if(a)return ut.createElement(a,{connectionLineType:s,connectionLineStyle:n,fromNode:c,fromHandle:b,fromX:U,fromY:B,toX:g,toY:p,fromPosition:j,toPosition:X,connectionStatus:u});let F="";const at={sourceX:U,sourceY:B,sourcePosition:j,targetX:g,targetY:p,targetPosition:X};return s===Cs.Bezier?[F]=ub(at):s===Cs.Step?[F]=Cf({...at,borderRadius:0}):s===Cs.SmoothStep?[F]=Cf(at):s===Cs.SimpleBezier?[F]=lb(at):F=`M${U},${B} ${g},${p}`,ut.createElement("path",{d:F,fill:"none",className:"react-flow__connection-path",style:n})};Bb.displayName="ConnectionLine";const hk=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function fk({containerStyle:e,style:t,type:n,component:s}){const{nodeId:a,handleType:u,nodesConnectable:c,width:d,height:g,connectionStatus:p}=Ee(hk,En);return!(a&&u&&d&&c)?null:ut.createElement("svg",{style:e,width:d,height:g,className:"react-flow__edges react-flow__connectionline react-flow__container"},ut.createElement("g",{className:Cn(["react-flow__connection",p])},ut.createElement(Bb,{nodeId:a,handleType:u,style:t,type:n,CustomComponent:s,connectionStatus:p})))}function r1(e,t){return it.useRef(null),rn(),it.useMemo(()=>t(e),[e])}const Hb=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:s,onMoveEnd:a,onInit:u,onNodeClick:c,onEdgeClick:d,onNodeDoubleClick:g,onEdgeDoubleClick:p,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:S,onNodeContextMenu:b,onSelectionContextMenu:k,onSelectionStart:P,onSelectionEnd:U,connectionLineType:B,connectionLineStyle:j,connectionLineComponent:X,connectionLineContainerStyle:F,selectionKeyCode:at,selectionOnDrag:Z,selectionMode:N,multiSelectionKeyCode:A,panActivationKeyCode:R,zoomActivationKeyCode:D,deleteKeyCode:O,onlyRenderVisibleElements:L,elementsSelectable:I,selectNodesOnDrag:M,defaultViewport:et,translateExtent:V,minZoom:G,maxZoom:tt,preventScrolling:Y,defaultMarkerColor:C,zoomOnScroll:q,zoomOnPinch:J,panOnScroll:rt,panOnScrollSpeed:ht,panOnScrollMode:yt,zoomOnDoubleClick:_t,panOnDrag:Nt,onPaneClick:At,onPaneMouseEnter:Zt,onPaneMouseMove:$t,onPaneMouseLeave:Ae,onPaneScroll:Ne,onPaneContextMenu:ze,onEdgeContextMenu:De,onEdgeMouseEnter:fe,onEdgeMouseMove:Tn,onEdgeMouseLeave:Lt,onReconnect:wt,onReconnectStart:Be,onReconnectEnd:Nn,reconnectRadius:Ln,noDragClassName:Vi,noWheelClassName:Un,noPanClassName:Sn,elevateEdgesOnSelect:_i,disableKeyboardA11y:te,nodeOrigin:Bt,nodeExtent:Me,rfId:ge})=>{const ki=r1(e,B6),Oe=r1(t,Y6);return uk(u),ut.createElement(U6,{onPaneClick:At,onPaneMouseEnter:Zt,onPaneMouseMove:$t,onPaneMouseLeave:Ae,onPaneContextMenu:ze,onPaneScroll:Ne,deleteKeyCode:O,selectionKeyCode:at,selectionOnDrag:Z,selectionMode:N,onSelectionStart:P,onSelectionEnd:U,multiSelectionKeyCode:A,panActivationKeyCode:R,zoomActivationKeyCode:D,elementsSelectable:I,onMove:n,onMoveStart:s,onMoveEnd:a,zoomOnScroll:q,zoomOnPinch:J,zoomOnDoubleClick:_t,panOnScroll:rt,panOnScrollSpeed:ht,panOnScrollMode:yt,panOnDrag:Nt,defaultViewport:et,translateExtent:V,minZoom:G,maxZoom:tt,onSelectionContextMenu:k,preventScrolling:Y,noDragClassName:Vi,noWheelClassName:Un,noPanClassName:Sn,disableKeyboardA11y:te},ut.createElement(lk,null,ut.createElement(ak,{edgeTypes:Oe,onEdgeClick:d,onEdgeDoubleClick:p,onlyRenderVisibleElements:L,onEdgeContextMenu:De,onEdgeMouseEnter:fe,onEdgeMouseMove:Tn,onEdgeMouseLeave:Lt,onReconnect:wt,onReconnectStart:Be,onReconnectEnd:Nn,reconnectRadius:Ln,defaultMarkerColor:C,noPanClassName:Sn,elevateEdgesOnSelect:!!_i,disableKeyboardA11y:te,rfId:ge},ut.createElement(fk,{style:j,type:B,component:X,containerStyle:F})),ut.createElement("div",{className:"react-flow__edgelabel-renderer"}),ut.createElement(j6,{nodeTypes:ki,onNodeClick:c,onNodeDoubleClick:g,onNodeMouseEnter:y,onNodeMouseMove:v,onNodeMouseLeave:S,onNodeContextMenu:b,selectNodesOnDrag:M,onlyRenderVisibleElements:L,noPanClassName:Sn,noDragClassName:Vi,disableKeyboardA11y:te,nodeOrigin:Bt,nodeExtent:Me,rfId:ge})))};Hb.displayName="GraphView";var dk=it.memo(Hb);const cp=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],ws={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:cp,nodeExtent:cp,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:ka.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:H3,isValidConnection:void 0},mk=()=>tO((e,t)=>({...ws,setNodes:n=>{const{nodeInternals:s,nodeOrigin:a,elevateNodesOnSelect:u}=t();e({nodeInternals:Sg(n,s,a,u)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:s={}}=t();e({edges:n.map(a=>({...s,...a}))})},setDefaultNodesAndEdges:(n,s)=>{const a=typeof n<"u",u=typeof s<"u",c=a?Sg(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:c,edges:u?s:[],hasDefaultNodes:a,hasDefaultEdges:u})},updateNodeDimensions:n=>{const{onNodesChange:s,nodeInternals:a,fitViewOnInit:u,fitViewOnInitDone:c,fitViewOnInitOptions:d,domNode:g,nodeOrigin:p}=t(),y=g?.querySelector(".react-flow__viewport");if(!y)return;const v=window.getComputedStyle(y),{m22:S}=new window.DOMMatrixReadOnly(v.transform),b=n.reduce((P,U)=>{const B=a.get(U.id);if(B?.hidden)a.set(B.id,{...B,[be]:{...B[be],handleBounds:void 0}});else if(B){const j=cy(U.nodeElement);!!(j.width&&j.height&&(B.width!==j.width||B.height!==j.height||U.forceUpdate))&&(a.set(B.id,{...B,[be]:{...B[be],handleBounds:{source:ZT(".source",U.nodeElement,S,p),target:ZT(".target",U.nodeElement,S,p)}},...j}),P.push({id:B.id,type:"dimensions",dimensions:j}))}return P},[]);xb(a,p);const k=c||u&&!c&&Ib(t,{initial:!0,...d});e({nodeInternals:new Map(a),fitViewOnInitDone:k}),b?.length>0&&s?.(b)},updateNodePositions:(n,s=!0,a=!1)=>{const{triggerNodeChanges:u}=t(),c=n.map(d=>{const g={id:d.id,type:"position",dragging:a};return s&&(g.positionAbsolute=d.positionAbsolute,g.position=d.position),g});u(c)},triggerNodeChanges:n=>{const{onNodesChange:s,nodeInternals:a,hasDefaultNodes:u,nodeOrigin:c,getNodes:d,elevateNodesOnSelect:g}=t();if(n?.length){if(u){const p=Nb(n,d()),y=Sg(p,a,c,g);e({nodeInternals:y})}s?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:s,edges:a,getNodes:u}=t();let c,d=null;s?c=n.map(g=>As(g,!0)):(c=zo(u(),n),d=zo(a,[])),Uh({changedNodes:c,changedEdges:d,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:s,edges:a,getNodes:u}=t();let c,d=null;s?c=n.map(g=>As(g,!0)):(c=zo(a,n),d=zo(u(),[])),Uh({changedNodes:d,changedEdges:c,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:s}={})=>{const{edges:a,getNodes:u}=t(),c=n||u(),d=s||a,g=c.map(y=>(y.selected=!1,As(y.id,!1))),p=d.map(y=>As(y.id,!1));Uh({changedNodes:g,changedEdges:p,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:s,maxZoom:a}=t();s?.scaleExtent([n,a]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:s,minZoom:a}=t();s?.scaleExtent([a,n]),e({maxZoom:n})},setTranslateExtent:n=>{t().d3Zoom?.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:s}=t(),u=s().filter(d=>d.selected).map(d=>As(d.id,!1)),c=n.filter(d=>d.selected).map(d=>As(d.id,!1));Uh({changedNodes:u,changedEdges:c,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:s}=t();s.forEach(a=>{a.positionAbsolute=hy(a.position,n)}),e({nodeExtent:n,nodeInternals:new Map(s)})},panBy:n=>{const{transform:s,width:a,height:u,d3Zoom:c,d3Selection:d,translateExtent:g}=t();if(!c||!d||!n.x&&!n.y)return!1;const p=Ps.translate(s[0]+n.x,s[1]+n.y).scale(s[2]),y=[[0,0],[a,u]],v=c?.constrain()(p,y,g);return c.transform(d,v),s[0]!==v.x||s[1]!==v.y||s[2]!==v.k},cancelConnection:()=>e({connectionNodeId:ws.connectionNodeId,connectionHandleId:ws.connectionHandleId,connectionHandleType:ws.connectionHandleType,connectionStatus:ws.connectionStatus,connectionStartHandle:ws.connectionStartHandle,connectionEndHandle:ws.connectionEndHandle}),reset:()=>e({...ws})}),Object.is),Sy=({children:e})=>{const t=it.useRef(null);return t.current||(t.current=mk()),ut.createElement(O3,{value:t.current},e)};Sy.displayName="ReactFlowProvider";const qb=({children:e})=>it.useContext(Zf)?ut.createElement(ut.Fragment,null,e):ut.createElement(Sy,null,e);qb.displayName="ReactFlowWrapper";const gk={input:Eb,default:lp,output:Sb,group:vy},pk={default:Nf,straight:gy,step:my,smoothstep:Wf,simplebezier:dy},yk=[0,0],_k=[15,15],vk={x:0,y:0,zoom:1},Ek={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},jb=it.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:s,className:a,nodeTypes:u=gk,edgeTypes:c=pk,onNodeClick:d,onEdgeClick:g,onInit:p,onMove:y,onMoveStart:v,onMoveEnd:S,onConnect:b,onConnectStart:k,onConnectEnd:P,onClickConnectStart:U,onClickConnectEnd:B,onNodeMouseEnter:j,onNodeMouseMove:X,onNodeMouseLeave:F,onNodeContextMenu:at,onNodeDoubleClick:Z,onNodeDragStart:N,onNodeDrag:A,onNodeDragStop:R,onNodesDelete:D,onEdgesDelete:O,onSelectionChange:L,onSelectionDragStart:I,onSelectionDrag:M,onSelectionDragStop:et,onSelectionContextMenu:V,onSelectionStart:G,onSelectionEnd:tt,connectionMode:Y=ka.Strict,connectionLineType:C=Cs.Bezier,connectionLineStyle:q,connectionLineComponent:J,connectionLineContainerStyle:rt,deleteKeyCode:ht="Backspace",selectionKeyCode:yt="Shift",selectionOnDrag:_t=!1,selectionMode:Nt=Xu.Full,panActivationKeyCode:At="Space",multiSelectionKeyCode:Zt=xf()?"Meta":"Control",zoomActivationKeyCode:$t=xf()?"Meta":"Control",snapToGrid:Ae=!1,snapGrid:Ne=_k,onlyRenderVisibleElements:ze=!1,selectNodesOnDrag:De=!0,nodesDraggable:fe,nodesConnectable:Tn,nodesFocusable:Lt,nodeOrigin:wt=yk,edgesFocusable:Be,edgesUpdatable:Nn,elementsSelectable:Ln,defaultViewport:Vi=vk,minZoom:Un=.5,maxZoom:Sn=2,translateExtent:_i=cp,preventScrolling:te=!0,nodeExtent:Bt,defaultMarkerColor:Me="#b1b1b7",zoomOnScroll:ge=!0,zoomOnPinch:ki=!0,panOnScroll:Oe=!1,panOnScrollSpeed:Xe=.5,panOnScrollMode:wn=Aa.Free,zoomOnDoubleClick:bn=!0,panOnDrag:Ke=!0,onPaneClick:sn,onPaneMouseEnter:An,onPaneMouseMove:dr,onPaneMouseLeave:mr,onPaneScroll:vi,onPaneContextMenu:zn,children:Zn,onEdgeContextMenu:Bn,onEdgeDoubleClick:Wn,onEdgeMouseEnter:Fs,onEdgeMouseMove:Pi,onEdgeMouseLeave:Qr,onEdgeUpdate:Li,onEdgeUpdateStart:Ba,onEdgeUpdateEnd:ce,onReconnect:Re,onReconnectStart:Te,onReconnectEnd:Dn,reconnectRadius:Gs=10,edgeUpdaterRadius:dl=10,onNodesChange:Ui,onEdgesChange:Ha,noDragClassName:gr="nodrag",noWheelClassName:zi="nowheel",noPanClassName:Jn="nopan",fitView:ti=!1,fitViewOptions:ei,connectOnClick:an=!0,attributionPosition:pe,proOptions:$s,defaultEdgeOptions:Zr,elevateNodesOnSelect:Hn=!0,elevateEdgesOnSelect:Ei=!1,disableKeyboardA11y:Ys=!1,autoPanOnConnect:qa=!0,autoPanOnNodeDrag:pr=!0,connectionRadius:ja=20,isValidConnection:Bi,onError:ni,style:He,id:Hi,nodeDragThreshold:Fa,...Ti},Wr)=>{const qi=Hi||"1";return ut.createElement("div",{...Ti,style:{...He,...Ek},ref:Wr,className:Cn(["react-flow",a]),"data-testid":"rf__wrapper",id:Hi},ut.createElement(qb,null,ut.createElement(dk,{onInit:p,onMove:y,onMoveStart:v,onMoveEnd:S,onNodeClick:d,onEdgeClick:g,onNodeMouseEnter:j,onNodeMouseMove:X,onNodeMouseLeave:F,onNodeContextMenu:at,onNodeDoubleClick:Z,nodeTypes:u,edgeTypes:c,connectionLineType:C,connectionLineStyle:q,connectionLineComponent:J,connectionLineContainerStyle:rt,selectionKeyCode:yt,selectionOnDrag:_t,selectionMode:Nt,deleteKeyCode:ht,multiSelectionKeyCode:Zt,panActivationKeyCode:At,zoomActivationKeyCode:$t,onlyRenderVisibleElements:ze,selectNodesOnDrag:De,defaultViewport:Vi,translateExtent:_i,minZoom:Un,maxZoom:Sn,preventScrolling:te,zoomOnScroll:ge,zoomOnPinch:ki,zoomOnDoubleClick:bn,panOnScroll:Oe,panOnScrollSpeed:Xe,panOnScrollMode:wn,panOnDrag:Ke,onPaneClick:sn,onPaneMouseEnter:An,onPaneMouseMove:dr,onPaneMouseLeave:mr,onPaneScroll:vi,onPaneContextMenu:zn,onSelectionContextMenu:V,onSelectionStart:G,onSelectionEnd:tt,onEdgeContextMenu:Bn,onEdgeDoubleClick:Wn,onEdgeMouseEnter:Fs,onEdgeMouseMove:Pi,onEdgeMouseLeave:Qr,onReconnect:Re??Li,onReconnectStart:Te??Ba,onReconnectEnd:Dn??ce,reconnectRadius:Gs??dl,defaultMarkerColor:Me,noDragClassName:gr,noWheelClassName:zi,noPanClassName:Jn,elevateEdgesOnSelect:Ei,rfId:qi,disableKeyboardA11y:Ys,nodeOrigin:wt,nodeExtent:Bt}),ut.createElement(c6,{nodes:e,edges:t,defaultNodes:n,defaultEdges:s,onConnect:b,onConnectStart:k,onConnectEnd:P,onClickConnectStart:U,onClickConnectEnd:B,nodesDraggable:fe,nodesConnectable:Tn,nodesFocusable:Lt,edgesFocusable:Be,edgesUpdatable:Nn,elementsSelectable:Ln,elevateNodesOnSelect:Hn,minZoom:Un,maxZoom:Sn,nodeExtent:Bt,onNodesChange:Ui,onEdgesChange:Ha,snapToGrid:Ae,snapGrid:Ne,connectionMode:Y,translateExtent:_i,connectOnClick:an,defaultEdgeOptions:Zr,fitView:ti,fitViewOptions:ei,onNodesDelete:D,onEdgesDelete:O,onNodeDragStart:N,onNodeDrag:A,onNodeDragStop:R,onSelectionDrag:M,onSelectionDragStart:I,onSelectionDragStop:et,noPanClassName:Jn,nodeOrigin:wt,rfId:qi,autoPanOnConnect:qa,autoPanOnNodeDrag:pr,onError:ni,connectionRadius:ja,isValidConnection:Bi,nodeDragThreshold:Fa}),ut.createElement(l6,{onSelectionChange:L}),Zn,ut.createElement(k3,{proOptions:$s,position:pe}),ut.createElement(g6,{rfId:qi,disableKeyboardA11y:Ys})))});jb.displayName="ReactFlow";function Tk(){return ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},ut.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Sk(){return ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},ut.createElement("path",{d:"M0 0h32v4.2H0z"}))}function wk(){return ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},ut.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function bk(){return ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ut.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Ak(){return ut.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},ut.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Au=({children:e,className:t,...n})=>ut.createElement("button",{type:"button",className:Cn(["react-flow__controls-button",t]),...n},e);Au.displayName="ControlButton";const Rk=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),Fb=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:s=!0,fitViewOptions:a,onZoomIn:u,onZoomOut:c,onFitView:d,onInteractiveChange:g,className:p,children:y,position:v="bottom-left"})=>{const S=rn(),[b,k]=it.useState(!1),{isInteractive:P,minZoomReached:U,maxZoomReached:B}=Ee(Rk,En),{zoomIn:j,zoomOut:X,fitView:F}=Ey();if(it.useEffect(()=>{k(!0)},[]),!b)return null;const at=()=>{j(),u?.()},Z=()=>{X(),c?.()},N=()=>{F(a),d?.()},A=()=>{S.setState({nodesDraggable:!P,nodesConnectable:!P,elementsSelectable:!P}),g?.(!P)};return ut.createElement(eb,{className:Cn(["react-flow__controls",p]),position:v,style:e,"data-testid":"rf__controls"},t&&ut.createElement(ut.Fragment,null,ut.createElement(Au,{onClick:at,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:B},ut.createElement(Tk,null)),ut.createElement(Au,{onClick:Z,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:U},ut.createElement(Sk,null))),n&&ut.createElement(Au,{className:"react-flow__controls-fitview",onClick:N,title:"fit view","aria-label":"fit view"},ut.createElement(wk,null)),s&&ut.createElement(Au,{className:"react-flow__controls-interactive",onClick:A,title:"toggle interactivity","aria-label":"toggle interactivity"},P?ut.createElement(Ak,null):ut.createElement(bk,null)),y)};Fb.displayName="Controls";var xk=it.memo(Fb),Mi;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Mi||(Mi={}));function Ik({color:e,dimensions:t,lineWidth:n}){return ut.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function Ck({color:e,radius:t}){return ut.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const Nk={[Mi.Dots]:"#91919a",[Mi.Lines]:"#eee",[Mi.Cross]:"#e2e2e2"},Dk={[Mi.Dots]:1,[Mi.Lines]:1,[Mi.Cross]:6},Mk=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Gb({id:e,variant:t=Mi.Dots,gap:n=20,size:s,lineWidth:a=1,offset:u=2,color:c,style:d,className:g}){const p=it.useRef(null),{transform:y,patternId:v}=Ee(Mk,En),S=c||Nk[t],b=s||Dk[t],k=t===Mi.Dots,P=t===Mi.Cross,U=Array.isArray(n)?n:[n,n],B=[U[0]*y[2]||1,U[1]*y[2]||1],j=b*y[2],X=P?[j,j]:B,F=k?[j/u,j/u]:[X[0]/u,X[1]/u];return ut.createElement("svg",{className:Cn(["react-flow__background",g]),style:{...d,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:p,"data-testid":"rf__background"},ut.createElement("pattern",{id:v+e,x:y[0]%B[0],y:y[1]%B[1],width:B[0],height:B[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${F[0]},-${F[1]})`},k?ut.createElement(Ck,{color:S,radius:j/u}):ut.createElement(Ik,{dimensions:X,color:S,lineWidth:a})),ut.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${v+e})`}))}Gb.displayName="Background";var Ok=it.memo(Gb);const Vk=({data:e})=>{const{label:t,status:n}=e,s=n==="done",a=s?"border-teal-500":"border-slate-400",u=s?"text-slate-400":"text-slate-800";return gt.jsxs(gt.Fragment,{children:[gt.jsx(sl,{type:"target",position:bt.Left,className:"!w-3 !h-3 !border-2 !border-white !bg-teal-500"}),gt.jsx("div",{className:`bg-white rounded-full w-48 h-48 flex items-center justify-center text-center p-2 shadow-xl shadow-slate-300/60 ${a}`,children:gt.jsx("p",{className:`font-bold text-lg px-2 ${u}`,children:t})}),gt.jsx(sl,{type:"source",position:bt.Right,className:"!w-3 !h-3 !border-2 !border-white !bg-teal-500"})]})},kk=it.memo(Vk),Pk=({id:e,sourceX:t,sourceY:n,targetX:s,targetY:a,sourcePosition:u,targetPosition:c,style:d={},markerEnd:g,data:p})=>{const[y,v,S]=Cf({sourceX:t,sourceY:n,sourcePosition:u,targetX:s,targetY:a,targetPosition:c}),b=k=>{k.stopPropagation(),p.onAddNode(e)};return gt.jsxs(gt.Fragment,{children:[gt.jsx("path",{id:e,style:d,className:"react-flow__edge-path",d:y,markerEnd:g}),gt.jsx("path",{id:e,style:{...d,strokeWidth:20,stroke:"transparent"},className:"react-flow__edge-path",d:y,markerEnd:g}),gt.jsx("foreignObject",{width:40,height:40,x:v-20,y:S-20,className:"edgebutton-foreignobject",requiredExtensions:"http://www.w3.org/1999/xhtml",children:gt.jsx("div",{className:"flex items-center justify-center h-full w-full",children:gt.jsx("button",{className:"w-8 h-8 bg-indigo-600 rounded-full text-white text-lg font-bold shadow-lg opacity-0 hover:opacity-100 transition-opacity duration-300 flex items-center justify-center",onClick:b,title:"Add a step in the middle",children:"+"})})})]})},Lk={bubble:kk},Uk=({nodes:e,edges:t,setNodes:n,onNodesChange:s,onEdgesChange:a,onNodeContextMenu:u,setReactFlowInstance:c,nodesDraggable:d,onAddNodeInMiddle:g})=>{const p=it.useCallback((S,b)=>{n(k=>{const P=k.findIndex(B=>B.id===b.id);if(k[P].data.status==="done")return k.map((B,j)=>j>=P?{...B,data:{...B.data,status:"pending"}}:B);{const B=P===0,j=k[P-1];if(B||j&&j.data.status==="done"){const X=[...k];return X[P]={...X[P],data:{...X[P].data,status:"done"}},X}}return k})},[n]),y=it.useMemo(()=>({custom:Pk}),[]),v=t.map(S=>({...S,type:"custom",data:{...S.data,onAddNode:g}}));return gt.jsx("div",{style:{height:"75vh",width:"100%"},children:gt.jsxs(jb,{nodes:e,edges:v,nodeTypes:Lk,edgeTypes:y,onNodesChange:s,onEdgesChange:a,onNodeClick:p,onNodeContextMenu:u,onInit:c,nodesDraggable:d,nodesConnectable:!1,fitView:!0,fitViewOptions:{padding:.2},children:[gt.jsx(xk,{}),gt.jsx(Ok,{})]})})},zk=e=>gt.jsx(Sy,{children:gt.jsx(Uk,{...e})}),Bk=({progress:e=0})=>{const t=Math.max(0,Math.min(100,e));return gt.jsxs("div",{children:[gt.jsxs("div",{className:"flex justify-between mb-1",children:[gt.jsx("span",{className:"text-base font-medium text-slate-700",children:"Progress"}),gt.jsxs("span",{className:"text-sm font-medium text-slate-700",children:[Math.round(t),"%"]})]}),gt.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2.5",children:gt.jsx("div",{className:"bg-teal-500 h-2.5 rounded-full transition-all duration-500 ease-out",style:{width:`${t}%`}})})]})},Hk=({isOpen:e,onClose:t,onSubmit:n,initialValue:s="",title:a})=>{const[u,c]=it.useState(s);if(it.useEffect(()=>{e&&c(s)},[e,s]),!e)return null;const d=g=>{g.preventDefault(),u.trim()&&n(u)};return gt.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center",onClick:t,children:gt.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",onClick:g=>g.stopPropagation(),children:[gt.jsx("h2",{className:"text-2xl font-bold mb-4",children:a}),gt.jsxs("form",{onSubmit:d,children:[gt.jsx("textarea",{value:u,onChange:g=>c(g.target.value),maxLength:500,ref:g=>{g&&(g.style.height="auto",g.style.height=`${g.scrollHeight}px`)},className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none min-h-[6rem] max-h-96 overflow-auto",autoFocus:!0}),gt.jsxs("div",{className:"flex justify-end mt-4",children:[gt.jsx("button",{type:"button",onClick:t,className:"mr-2 px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),gt.jsx("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Save"})]})]})]})})},qk=({x:e,y:t,onEdit:n,onDelete:s})=>gt.jsx("div",{style:{top:t,left:e},className:"absolute bg-white rounded-md shadow-lg z-50 border border-gray-200",children:gt.jsxs("ul",{className:"py-1",children:[gt.jsx("li",{children:gt.jsx("button",{onClick:n,className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Edit Text"})}),gt.jsx("li",{children:gt.jsx("button",{onClick:s,className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:"Delete Bubble"})})]})}),jk=[{id:"1",type:"bubble",data:{label:"Left click on me to mark me done",status:"pending"},position:{x:100,y:125}},{id:"2",type:"bubble",data:{label:"Right click on me to edit me",status:"pending"},position:{x:350,y:125}}],s1={stroke:"#94a3b8",strokeWidth:2,strokeDasharray:"5,5"},Fk=[{id:"e1-2",source:"1",target:"2",type:"smoothstep",style:s1},{id:"e2-3",source:"2",target:"3",type:"smoothstep",style:s1}],$b=e=>gM(PM,"roadmaps",e),Gk=async(e,t)=>{if(e)try{const n=$b(e);await MM(n,t,{merge:!0})}catch(n){console.error("Error saving roadmap: ",n)}},$k=async e=>{if(!e)return null;try{const t=$b(e),n=await NM(t);return n.exists()?n.data():(console.log("No saved roadmap found for this user."),null)}catch(t){return console.error("Error getting roadmap: ",t),null}},Yk=()=>{const{currentUser:e}=iy(),t=it.useRef(!0),[n,s]=it.useState([]),[a,u]=it.useState([]),[c,d]=it.useState(!0),[g,p]=it.useState(0),[y,v]=it.useState(null),[S,b]=it.useState(null),[k,P]=it.useState(null);it.useEffect(()=>{(async()=>{if(e){d(!0);const N=await $k(e.uid);N&&N.nodes?.length>0?(s(N.nodes),u(N.edges||[])):(s(jk),u(Fk)),d(!1)}})()},[e]),it.useEffect(()=>{if(t.current||c){c||(t.current=!1);return}e&&Gk(e.uid,{nodes:n,edges:a})},[n,a,e,c]),it.useEffect(()=>{const Z=n.filter(N=>N.data.status==="done").length;p(n.length>0?Z/n.length*100:0)},[n]);const U=it.useCallback(Z=>s(N=>Nb(Z,N)),[]),B=it.useCallback(Z=>u(N=>C6(Z,N)),[]),j=it.useCallback((Z,N)=>{Z.preventDefault(),b({x:Z.clientX,y:Z.clientY,node:N})},[]),X=it.useCallback(Z=>{v({mode:"insert",edgeId:Z})},[]),F=it.useCallback(Z=>{let N=null;const A={stroke:"#94a3b8",strokeWidth:2,strokeDasharray:"5,5"},R=()=>"id_"+Date.now();if(y?.mode==="new"){const D=n[n.length-1],O=R(),L={id:O,type:"bubble",data:{label:Z,status:"pending"},position:{x:D?D.position.x+250:100,y:125}},I=D?{id:`e${D.id}-${O}`,source:D.id,target:O,type:"custom",style:A}:null;s(M=>[...M,L]),I&&u(M=>[...M,I]),N=L}else if(y?.mode==="edit")s(D=>D.map(O=>O.id===y.node.id?{...O,data:{...O.data,label:Z}}:O));else if(y?.mode==="insert"){const D=a.find(tt=>tt.id===y.edgeId);if(!D)return;const O=n.find(tt=>tt.id===D.source),L=n.findIndex(tt=>tt.id===O.id),I=R(),M={id:I,type:"bubble",data:{label:Z,status:"pending"},position:{x:O.position.x+250,y:O.position.y}},et=n.map((tt,Y)=>Y>L?{...tt,position:{...tt.position,x:tt.position.x+250}}:tt),V=[...et.slice(0,L+1),M,...et.slice(L+1)],G=a.filter(tt=>tt.id!==D.id).concat([{id:`e${D.source}-${I}`,source:D.source,target:I,type:"custom",style:A},{id:`e${I}-${D.target}`,source:I,target:D.target,type:"custom",style:A}]);s(V),u(G),N=M}N&&k&&setTimeout(()=>{k.setCenter(N.position.x+100,N.position.y+100,{zoom:1,duration:800})},100),v(null)},[y,n,a,k]),at=it.useCallback(()=>{if(!S?.node)return;const{node:Z}=S,N=n.findIndex(M=>M.id===Z.id),A=a.find(M=>M.target===Z.id),R=a.find(M=>M.source===Z.id),D=A?.source,O=R?.target,L=n.filter(M=>M.id!==Z.id).map((M,et)=>et>=N?{...M,position:{...M.position,x:M.position.x-250}}:M);let I=a.filter(M=>M.source!==Z.id&&M.target!==Z.id);if(D&&O){const M={id:`e${D}-${O}`,source:D,target:O,type:"custom",style:{stroke:"#94a3b8",strokeWidth:2,strokeDasharray:"5,5"}};I.push(M)}s(L),u(I),b(null)},[S,n,a]);return c?gt.jsx("div",{className:"min-h-screen flex items-center justify-center text-xl font-semibold text-gray-700",children:"Loading Your Roadmap..."}):gt.jsxs("div",{onClick:()=>b(null),children:[gt.jsxs("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:[gt.jsxs("div",{className:"px-4 pb-6 sm:px-0",children:[gt.jsxs("div",{className:"flex justify-between items-center mb-4",children:[gt.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Your Roadmap"}),gt.jsx("button",{onClick:()=>v({mode:"new"}),className:"bg-indigo-600 hover-bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg",children:"+ Add Step"})]}),gt.jsx(Bk,{progress:g})]}),gt.jsx("div",{className:"bg-white rounded-lg shadow-xl overflow-hidden",children:gt.jsx(zk,{nodes:n,edges:a,setNodes:s,onNodesChange:U,onEdgesChange:B,onNodeContextMenu:j,setReactFlowInstance:P,nodesDraggable:!1,onAddNodeInMiddle:X})})]}),S&&gt.jsx(qk,{x:S.x,y:S.y,onEdit:()=>{v({mode:"edit",node:S.node}),b(null)},onDelete:at}),gt.jsx(Hk,{isOpen:!!y,onClose:()=>v(null),onSubmit:F,initialValue:y?.mode==="edit"?y.node.data.label:"",title:y?.mode==="edit"?"Edit Step":y?.mode==="insert"?"Insert New Step":"Add New Step"})]})},Xk=()=>{const{currentUser:e}=iy();return gt.jsx("nav",{className:"bg-white shadow-md w-full",children:gt.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:gt.jsxs("div",{className:"flex items-center justify-between h-16",children:[gt.jsx("div",{className:"flex-shrink-0",children:gt.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Pathfinder"})}),e&&gt.jsxs("div",{className:"flex items-center",children:[gt.jsx("span",{className:"text-gray-700 mr-3 hidden sm:block",children:e.displayName}),e.photoURL&&gt.jsx("img",{className:"h-10 w-10 rounded-full mr-4",src:e.photoURL,alt:"User avatar",referrerPolicy:"no-referrer"}),gt.jsx("button",{onClick:BM,className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300",children:"Sign Out"})]})]})})})},Kk=({children:e})=>gt.jsxs("div",{className:"min-h-screen bg-gray-50",children:[gt.jsx(Xk,{}),gt.jsx("main",{children:e})]});function Qk(){const{currentUser:e}=iy();return e?gt.jsx(Kk,{children:gt.jsx(Yk,{})}):gt.jsx(qM,{})}RR.createRoot(document.getElementById("root")).render(gt.jsx(ut.StrictMode,{children:gt.jsx(LM,{children:gt.jsx(Qk,{})})}));
